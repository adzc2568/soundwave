<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/home.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pagePiling.js/1.5.6/jquery.pagepiling.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.10/vue.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pagePiling.js/1.5.6/jquery.pagepiling.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/5.2.0/pixi.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pixi-filters@3.0.3/dist/pixi-filters.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/110/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TweenMax.min.js"></script>
    <script>
        // jQueryMobile-SwipeUpDown
        // ----------------------------------
        //
        // Copyright (c)2012 Donnovan Lewis
        // Distributed under MIT license
        //
        // https://github.com/blackdynamo/jquerymobile-swipeupdown

        (function () {
            // initializes touch and scroll events
            var supportTouch = $.support.touch,
                scrollEvent = "touchmove scroll",
                touchStartEvent = supportTouch ? "touchstart" : "mousedown",
                touchStopEvent = supportTouch ? "touchend" : "mouseup",
                touchMoveEvent = supportTouch ? "touchmove" : "mousemove";

            // handles swipe up and swipe down
            $.event.special.swipeupdown = {
                setup: function () {
                    var thisObject = this;
                    var $this = $(thisObject);

                    $this.bind(touchStartEvent, function (event) {
                        var data = event.originalEvent.touches ?
                            event.originalEvent.touches[0] :
                            event,
                            start = {
                                time: (new Date).getTime(),
                                coords: [data.pageX, data.pageY],
                                origin: $(event.target)
                            },
                            stop;

                        function moveHandler(event) {
                            if (!start) {
                                return;
                            }

                            var data = event.originalEvent.touches ?
                                event.originalEvent.touches[0] :
                                event;
                            stop = {
                                time: (new Date).getTime(),
                                coords: [data.pageX, data.pageY]
                            };

                            // prevent scrolling
                            if (Math.abs(start.coords[1] - stop.coords[1]) > 10) {
                                event.preventDefault();
                            }
                        }

                        $this
                            .bind(touchMoveEvent, moveHandler)
                            .one(touchStopEvent, function (event) {
                                $this.unbind(touchMoveEvent, moveHandler);
                                if (start && stop) {
                                    if (stop.time - start.time < 1000 &&
                                        Math.abs(start.coords[1] - stop.coords[1]) > 30 &&
                                        Math.abs(start.coords[0] - stop.coords[0]) < 75) {
                                        start.origin
                                            .trigger("swipeupdown")
                                            .trigger(start.coords[1] > stop.coords[1] ? "swipeup" : "swipedown");
                                    }
                                }
                                start = stop = undefined;
                            });
                    });
                }
            };

            //Adds the events to the jQuery events special collection
            $.each({
                swipedown: "swipeupdown",
                swipeup: "swipeupdown"
            }, function (event, sourceEvent) {
                $.event.special[event] = {
                    setup: function () {
                        $(this).bind(sourceEvent, $.noop);
                    }
                };
            });

        })();


        // document.ready =====================================================================================================================


        $(document).ready(() => {
            /* ---------------- 全域變數 ---------------- */
            let audio = $("#player audio")[0]; //撥放器
            console.log(audio)
            let vol_s, vol_b, vol_drag = false,
                songTime,
                playStatus = true,
                nowPlaying = 0, //現在播放的歌
                myPlaylist = phpGetListName = [],
                playerListName,
                listLen = myPlaylist.length;


            /* ---------------- player load ---------------- */
            window.addEventListener('load', function () {
                //撥放器縮放
                $('#expand').click(function () {
                    $('.player_b').addClass('open');
                    $('.player_s').animate({
                        bottom: '-70px'
                    });
                });
                $('#closePlayer').click(function () {
                    $('.player_b').removeClass('open');
                    $('.player_s').animate({
                        bottom: '0'
                    });
                });

                //手機推移
                $('.left .pushBtn').click(function () {
                    $('.left').css('height', '10%');
                    $('.right').css('height', '90%');
                    $('.right .pushBtn').show();
                    $('.left .pushBtn').hide();
                });
                $('.right .pushBtn').click(function () {
                    $('.left').css('height', '90%');
                    $('.right').css('height', '10%');
                    $('.left .pushBtn').show();
                    $('.right .pushBtn').hide();
                });

                //selectbtn -- 跳燈箱
                $('#player .selectBtn').click(function () {
                    $('#player .lightCover').show();
                    $('#player #myAllList').show();
                    getLightName();
                });
                $('#player #myAllList').click(function (e) {
                    e.stopPropagation();
                });

                //歌單清單
                $('.closeLight').click(function () {
                    $('.lightCover').hide();
                    $('#player #myAllList').hide();
                });


                //點愛心
                $('#player').on('click', '.heart', function () {
                    let songName = $(this).siblings('.listSongInfo').find('.name h4').text();
                    if ($(this).hasClass('becomeRed')) {
                        $(this).html('<img src="./img/collection/grayheart.png">').removeClass('becomeRed');

                    } else {
                        $(this).html('<img src="./img/collection/redheart.png">').addClass('becomeRed');
                    }
                });

                //點歌單撥放，左側專輯唱片動畫
                $('#player').on('mouseover', '.songCover', function () {
                    $(this).find('.listPlay').show();
                });
                $('#player').on('mouseout', '.songCover', function () {
                    $(this).find('.listPlay').hide();
                });

                //選擇播放歌單
                $('#myAllList ul').on('click', 'li', function () {
                    playerListName = $(this).text();
                    $(this).addClass('choose');
                    $('#player #myAllList li').not(this).removeClass('choose');
                    $('#player .list ul').addClass('chooseList');
                    $('#plistName').val(playerListName);
                });

                $('#myAllList #mylistOK').click(function () {
                    if (playerListName == undefined) {
                        myPlaylist = myPlaylist;
                    } else {
                        isPlaying(true);
                        if (playerListName == 'Liked songs') {
                            getLikedList();
                        } else {
                            getOtherPlayList();
                        }
                        nowPlaying = 0;
                        audio.currentTime = 0;
                        $("#player audio").attr("src", myPlaylist[nowPlaying].song_addr);
                        $("#player .songInfo .name").text(myPlaylist[nowPlaying].song_name);
                        $("#player .songInfo .creator").text(myPlaylist[nowPlaying].mem_name);
                        $("#player .info img").not(".coverRec img").not(".heart img").attr("src", myPlaylist[nowPlaying].song_pic);
                    }
                    ListTopInfo();
                    $('.lightCover').hide();
                    $('#player #myAllList').hide();
                });

                /* ---------------- 音樂播放器 ---------------- */

                playerInit();

                //播放暫停按鈕 -- 音樂撥放/暫停
                $("#player .play").click(function () {
                    isPlaying(playStatus);
                });

                //下一首按鈕 -- 切換下一首
                $("#player .next").click(function () {
                    console.log(listLen);
                    if (nowPlaying == listLen - 1) {
                        nowPlaying = listLen - 1;
                    } else {
                        nowPlaying++;
                    }
                    $("#player audio").attr("src", myPlaylist[nowPlaying].song_addr);
                    if (playStatus == true) {
                        isPlaying(false);
                    } else {
                        isPlaying(true);
                    }
                    listStatus();
                });

                //上一首按鈕 -- 切換上一首
                $("#player .prev").click(function () {
                    if (nowPlaying == 0) {
                        nowPlaying = 0;
                    } else {
                        nowPlaying--;
                    }
                    $("#player audio").attr("src", myPlaylist[nowPlaying].song_addr);
                    if (playStatus == true) {
                        isPlaying(false);
                    } else {
                        isPlaying(true);
                    }
                    listStatus();
                });

                //停止按鈕 -- 音樂全數停止
                $("#player .stop").click(function () {
                    audio.pause();
                    audio.currentTime = 0;
                    isPlaying(true);
                    $("#player .songCover .listPlay").removeClass('nowlistening');
                    $(".songs .listPlay").removeClass('nowlistening');
                });

                //循環播放 -- 單首ok
                $("#player .loop").click(function () {
                    if ($(this).hasClass("becomeYel")) {
                        $(this).removeClass("becomeYel");
                        $("#player .rand").attr("disabled", false);
                        audio.loop = false;
                        autoChange(true);
                    } else {
                        $(this).addClass("becomeYel");
                        $("#player .rand").attr("disabled", true);
                        audio.loop = true;
                        autoChange(false);
                    }
                });

                //隨機播放 -- 清單隨機
                $("#player .rand").click(function () {
                    if ($(this).hasClass("becomeYel")) {
                        $(this).removeClass("becomeYel");
                        $("#player .loop").attr("disabled", false);
                        autoChange(true);
                    } else {
                        $(this).addClass("becomeYel");
                        $("#player .loop").attr("disabled", true);
                        autoChange(false);
                    }
                });

                //maybe有靜音 volIcon
                $("#player .volicon").click(function () {
                    if (audio.muted) {
                        audio.muted = false;
                        $(".player_s .volicon i").css('color', 'white');
                        $(".player_b .volicon i").css('color', '#333');
                        $(".volLine .volControl").css('background-color', '#f1c40f');
                    } else {
                        audio.muted = true;
                        $(this).find('i').css('color', '#f1c40f');
                        $(".volLine .volControl").css('background-color', 'white');
                    }
                });
                $(".volLine").mousedown(function () {
                    vol_drag = true;
                });
                $(document).mouseup(function (e) {
                    if (vol_drag) {
                        volPos(e.pageX);
                    }
                    vol_drag = false;
                });

                //clickBar -- 詳細(b)/簡易(s)
                $(".player_b .progressbar").click(function (e) {
                    let progressBarSize_b = parseInt($(".player_b .progressbar").css("width"));
                    let mouseX_b = e.clientX - $(".player_b .progressbar").offset().left;
                    $(".player_b .progressbar .progress").css('width', `${mouseX_b}px`);

                    let newTime_b = mouseX_b / (progressBarSize_b / audio.duration);
                    audio.currentTime = newTime_b;
                });
                $(".player_s .progressbar").click(function (e) {
                    let progressBarSize_s = parseInt($(".player_s .progressbar").css("width"));
                    let mouseX_s = e.clientX - $(".player_s .progressbar").offset().left;
                    $(".player_s .progressbar .progress").css('width', `${mouseX_s}px`);

                    let newTime_s = mouseX_s / (progressBarSize_s / audio.duration);
                    audio.currentTime = newTime_s;
                });

                //清單播放點擊
                $('#player').on('click', ".listPlay", function () {
                    nowPlaying = $(this).parent().parent().index();
                    $("#player .listPlay").not(this).removeClass("nowlistening").html('<img src="./img/library/coverPlay-s.png">');
                    if ($(this).hasClass('nowlistening')) {
                        if (playStatus) {
                            $(this).html('<img src="./img/library/coverPlay-s.png">');
                            isPlaying(true);
                        } else {
                            $(this).html('<img src="./img/library/coverPause-s.png">');
                            isPlaying(false);
                        }
                    } else {
                        $("#player audio").attr("src", myPlaylist[nowPlaying].song_addr);
                        audio.load();
                        $(this).html('<img src="./img/library/coverPause-s.png">');
                        isPlaying(false);
                        $(this).addClass("nowlistening");
                    }
                    listStatus();
                });
            });
            /* ---------------- load end ---------------- */

            //初始化
            function playerInit() {
                audio.volume = 0.5;
                getLikedList(); //待改-----這裡要改要判斷哪個清單
                isLocalHave();
            }

            //取得Light -- ListName
            function getLightName() {
                let xhr = new XMLHttpRequest();
                xhr.onload = function () {
                    phpGetListName = JSON.parse(xhr.responseText);
                    mylistInfo = phpGetListName;
                    lightListName(phpGetListName);
                    showAllMyList(mylistInfo);
                };
                xhr.open("get", "./php/getListName.php", true);
                xhr.send(null);
            }
            //取得Liked Songs
            function getLikedList() {
                let xhr = new XMLHttpRequest();
                xhr.onload = function () {
                    myPlaylist = JSON.parse(xhr.responseText);
                    listLen = myPlaylist.length;
                    createPlayerList(myPlaylist);
                };
                xhr.open("get", "./php/likedSongsList.php", false);
                xhr.send(null);
            }

            //取得歌單列表 -- 
            function getOtherPlayList() {
                let xhr = new XMLHttpRequest();
                xhr.onload = function () {
                    if (xhr.status == 200) {
                        myPlaylist = JSON.parse(xhr.responseText);
                        listLen = myPlaylist.length;
                        createPlayerList(myPlaylist);
                        console.log(myPlaylist);
                    } else {
                        alert(xhr.status);
                    }
                };
                let url = `./php/showPlayList.php?plistName=${playerListName}`;
                xhr.open("GET", url, false);
                xhr.send(null);
            }
            //歌單資訊
            function ListTopInfo() {
                let allListName = [];
                for (let i = 0; i < phpGetListName.length; i++) {
                    allListName.push(phpGetListName[i].plist_name);
                }
                let listIndex = allListName.indexOf(playerListName);
                if (listIndex == -1) {
                    $('.player_b .listCover img').attr('src', './img/library/list_pic0.jpg');
                    $('.player_b .listName h2').text('Liked songs');
                } else {
                    $('.player_b .listCover img').attr('src', phpGetListName[listIndex].list_pic);
                    $('.player_b .listName h2').text(playerListName);
                }
                $('.player_b .listName span').text(`${listLen} songs`);
            }

            //創建歌單
            function createPlayerList(songlistbuild) {
                $('#player .list ul').text("");
                if (songlistbuild != "{}") {
                    let li, div_songCover, listplay, listSongInfo, listSongInfo_n, total, heart, clear, img, h4, p, text;
                    for (let i = 0; i < songlistbuild.length; i++) {
                        li = document.createElement('li');
                        div_songCover = document.createElement('div');
                        div_songCover.setAttribute('class', 'songCover');

                        img = document.createElement('img');
                        img.setAttribute("src", songlistbuild[i].song_pic);
                        div_songCover.append(img);
                        listplay = document.createElement('div');
                        listplay.setAttribute('class', 'listPlay');
                        div_songCover.append(listplay);
                        img = document.createElement('img');
                        img.setAttribute("src", './img/library/coverPlay-s.png');
                        listplay.append(img);

                        listSongInfo = document.createElement('div');
                        listSongInfo.setAttribute('class', 'listSongInfo');
                        listSongInfo_n = document.createElement('div');
                        listSongInfo_n.setAttribute('class', 'name');
                        listSongInfo.append(listSongInfo_n);
                        h4 = document.createElement('h4');
                        listSongInfo_n.append(h4);
                        text = document.createTextNode(songlistbuild[i].song_name);
                        h4.append(text);
                        p = document.createElement('p');
                        listSongInfo_n.append(p);
                        text = document.createTextNode(songlistbuild[i].mem_name);
                        p.append(text);

                        total = document.createElement('div')
                        total.setAttribute('class', 'totalTime');
                        text = document.createTextNode(songlistbuild[i].totaltime);
                        total.append(text);

                        heart = document.createElement('div');
                        heart.setAttribute('class', 'heart becomeRed');
                        img = document.createElement('img');
                        img.setAttribute('src', './img/collection/redheart.png');
                        heart.append(img);

                        clear = document.createElement('div');
                        clear.setAttribute('class', 'clearfix');

                        li.append(div_songCover);
                        li.append(listSongInfo);
                        li.append(total);
                        li.append(heart);
                        li.append(clear);
                        $('#player .list ul').append(li);
                    }
                } else {
                    li = document.createElement('li');
                    li.setAttribute('style', 'text-align:center');
                    text = document.createTextNode('No songs');
                    li.append(text);
                    $('#player .list ul').append(li);
                }
            }

            //build lightbox -- allmylist
            function lightListName(ListInfo) {
                let ul, li, text;
                $('#myAllList ul').children().remove();
                ul = $('#myAllList ul');
                li = document.createElement('li');
                text = document.createTextNode('Liked songs');
                li.setAttribute('class', 'chooseList');
                li.append(text);
                ul.append(li);
                for (let i = 0; i < ListInfo.length; i++) {
                    li = document.createElement('li');
                    text = document.createTextNode(ListInfo[i].plist_name);
                    li.append(text);
                    ul.append(li);
                }
            }

            //localstorage
            function isLocalHave() {
                if (localStorage.length != 0) {
                    nowPlaying = localStorage["nowPlaying"];
                    audio.currentTime = localStorage['songTime'];
                } else {
                    nowPlaying = 0;
                }
                if (localStorage["playStatus"] == "true") {
                    playStatus = false;
                    $('#player audio').attr("autoplay", true);
                } else {
                    $('#player audio').attr("autoplay", false);
                    playStatus = true;
                }
                $('#player audio').attr("src", myPlaylist[nowPlaying].song_addr);
                audio.load();
                isPlaying(playStatus);
                setInterval(progressingShow, 100);
                listStatus();
            }

            //播放狀態控制 -- 如果沒有播放就讓他撥
            function isPlaying(isPlaying) {
                context.resume().then(() => {
                    if (!isPlaying) {
                        audio.play();
                        $("#player .play").html('<i class="fas fa-pause"></i>');
                        $(".listPlay.nowlistening").html('<img src="./img/library/coverPause-s.png">');
                        $("#player .player_b .coverRec").animate({
                            right: "-50%",
                            opacity: "1"
                        }, "fast", "swing").addClass("recRotate");
                        playStatus = true;
                        waveLooper();
                        listStatus();
                    } else {
                        audio.pause();
                        $("#player .play").html('<i class="fas fa-play"></i>');
                        $(".listPlay.nowlistening").html('<img src="./img/library/coverPlay-s.png">');
                        playStatus = false;
                        listStatus();
                        $("#player .player_b .coverRec").animate({
                            right: "0%"
                        }).removeClass("recRotate");
                    }
                });
                $("#player .songInfo .name").text(myPlaylist[nowPlaying].song_name);
                $("#player .songInfo .creator").text(myPlaylist[nowPlaying].mem_name);
                $("#player .info img").not(".coverRec img").not(".heart img").attr("src", myPlaylist[nowPlaying].song_pic);
            }

            //進度條 -- timer
            function progressingShow() {
                songTime = audio.currentTime;
                //存進localstorage
                localStorage.setItem("nowPlaying", nowPlaying);
                localStorage.setItem("songTime", songTime);
                localStorage.setItem("playStatus", playStatus);

                let progressColor = (songTime / audio.duration) * 100;
                if (audio.ended) {
                    autoChange(true);
                }
                // console.log(audio.duration); //歌曲總長秒數
                $("#player .progress").css("width", `${progressColor.toFixed(2)}%`);
                $("#player span.start").text(`${parseInt(songTime / 60)}:${parseInt(songTime % 60)}`)
                $("#player span.end").text(myPlaylist[nowPlaying].totaltime);
                //順便同步音量
                $(".player_b .volLine .volControl").css('width', `${parseInt(audio.volume * 100)}%`);
                $(".player_s .volLine .volControl").css('width', `${parseInt(audio.volume * 100)}%`);
            }

            //自動換下一首
            function autoChange(autoStatus) {
                if (autoStatus) {
                    //隨機撥放
                    if ($("#player .rand").hasClass("becomeYel")) {
                        let randNum = parseInt(Math.random() * (listLen));
                        console.log(randNum);
                        nowPlaying = randNum;
                        $("#player audio").attr("src", myPlaylist[nowPlaying].song_addr);
                        audio.load();
                        isPlaying(false);
                        listStatus();
                    } else {
                        if (nowPlaying == listLen - 1) {
                            if (audio.ended) {
                                audio.currentTime = 0;
                                isPlaying(true);
                            } else {
                                isPlaying(false);
                            }
                        } else {
                            if (audio.ended) {
                                nowPlaying++;
                                $("#player audio").attr("src", myPlaylist[nowPlaying].song_addr);
                                audio.load();
                                isPlaying(false);
                                listStatus();
                            }
                        }
                    }
                }
            }

            //清單播放狀態
            function listStatus() {
                $(`.player_b .listPlay`).removeClass("nowlistening");
                $(`.player_b li:nth-of-type(${nowPlaying + 1}) .listPlay`).addClass("nowlistening");
                if (playStatus) {
                    $(`.player_b li:nth-of-type(${nowPlaying + 1}) .listPlay`).html('<img src="./img/library/coverPause-s.png">');
                } else {
                    $(`.player_b li:nth-of-type(${nowPlaying + 1}) .listPlay`).html('<img src="./img/library/coverPlay-s.png">');
                }
            }

            //音量控制
            function volPos(mousePos) {
                let vol_bwidth = $(".player_b .volLine").width();
                if ($("#player .player_b").hasClass("open")) {
                    vol_b = mousePos - $(".player_b .volLine").offset().left;
                    vol_b = parseInt((vol_b / 100) * 100);
                    if (vol_bwidth == 100) {
                        $(".player_b .volicon i").css('color', '#333');
                        vol_b = parseInt((vol_b / 100) * 100);
                        if (vol_b < 0) {
                            vol_b = 0;
                            $(".player_b .volicon i").css('color', '#f1c40f');
                        } else if (vol_b > 100) {
                            $(".player_b .volicon i").css('color', '#333');
                            vol_b = 100;
                        }
                        audio.volume = vol_b / 100;
                        $(".player_b .volLine .volControl").css('width', `${vol_b}%`);
                    } else {
                        vol_s = parseInt((vol_s / vol_bwidth) * 100);
                        $(".player_b .volicon i").css('color', '#333');
                        vol_b = parseInt((vol_b / vol_bwidth) * 100);
                        if (vol_b < 0) {
                            vol_b = 0;
                            $(".player_b .volicon i").css('color', '#f1c40f');
                        } else if (vol_b > 100) {
                            $(".player_b .volicon i").css('color', '#333');
                            vol_b = 100;
                        }
                        audio.volume = vol_b / 100;
                        $(".player_b .volLine .volControl").css('width', `${vol_b}%`);
                    }
                } else {
                    vol_s = mousePos - $(".player_s .volLine").offset().left;
                    vol_s = parseInt((vol_s / 100) * 100);
                    $(".player_s .volicon i").css('color', 'white');
                    if (vol_s < 0) {
                        vol_s = 0;
                        $(".player_s .volicon i").css('color', '#f1c40f');
                    } else if (vol_s > 100) {
                        $(".player_s .volicon i").css('color', 'white');
                        vol_s = 100;
                    }
                    audio.volume = vol_s / 100;
                    $(".player_s .volLine .volControl").css('width', `${vol_s}%`);
                }
            }

            $('#pagepiling').pagepiling(
                {
                    verticalCentered: false, //section 內物件置中對齊
                    navigation: {
                        'bulletsColor': '#F1C40F', // 框線
                        'position': 'right',
                        'tooltips': ['SOUND WAVE', 'REMIX', 'RANK', 'ACTIVITY', 'COLLECTION', 'ABOUT']
                    },
                }
            );
            $(document).on('swipedown', () => {
                $.fn.pagepiling.moveSectionDown();
            });
            $(document).on('swipeup', () => {
                $.fn.pagepiling.moveSectionUp();
            });

            // PIXI =======================================================================================================================================


            let app = new PIXI.Application({
                width: 1320,
                height: window.innerHeight,
                transparent: true,
                antialias: true,
            });

            let sprites = new PIXI.ParticleContainer(10000, {
                scale: true,
                position: true,
                rotation: true,
                uvs: true,
                alpha: true,
            });

            let GodrayFilter = new PIXI.filters.GodrayFilter({
                angle: 0,
                gain: 0.6,
                lacunrity: 2.8,
                parallel: true,
            });


            let tt = PIXI.Sprite.from('./img/home/bg.png')
            let graphics01 = new PIXI.Graphics();
            let graphics02 = new PIXI.Graphics();
            let graphics03 = new PIXI.Graphics();
            let graphics04 = new PIXI.Graphics();
            let graphics05 = new PIXI.Graphics();


            graphics01.position = { x: 0, y: window.innerHeight }
            graphics02.position = { x: 0, y: window.innerHeight }
            graphics03.position = { x: 0, y: window.innerHeight }
            graphics04.position = { x: 0, y: window.innerHeight }
            graphics05.position = { x: 0, y: window.innerHeight }
            sprites.position = { x: 0, y: window.innerHeight }
            graphics01.scale.y = -1;
            graphics02.scale.y = -1;
            graphics03.scale.y = -1;
            graphics04.scale.y = -1;
            graphics05.scale.y = -1;
            sprites.scale.y = -1;
            // app.stage.filters = [GodrayFilter];

            app.stage.addChild(graphics01, graphics02, graphics03, graphics04, graphics05);

            let points = [];
            let totalSprites = app.renderer instanceof PIXI.Renderer ? 10000 : 100;
            document.body.appendChild(app.view);





            // audio
            // audio = new Audio();
            context = new (window.AudioContext || window.webkitAudioContext);
            analyser = context.createAnalyser();
            analyser.fftSize = 4096;

            // audio.src = "./img/home/Heroes Tonight.m4a"
            audio.volume = 0.05;
            source = context.createMediaElementSource(audio);
            source.connect(analyser);
            analyser.connect(context.destination);
            frequency_array = new Float32Array(analyser.frequencyBinCount); //音頻取值

            document.querySelector('.home_wave_container').appendChild(app.view);


            let waveLooper = () => {
                if (playStatus) {
                    sprites.removeChildren()
                    analyser.getFloatFrequencyData(frequency_array);
                    if (GodrayFilter.time >= 100) {
                        GodrayFilter.time = 0;
                    } else {
                        GodrayFilter.time += 0.01;
                    }
                    for (let i = 0; i <= 100; i++) {
                        let aa = frequency_array[i] <= -100 ? 0 : parseInt((window.innerHeight + frequency_array[i] * 10) / 10)
                        for (let j = 0; j <= aa; j++) {
                            let point = PIXI.Sprite.from('./img/home/items/star.png');

                            point.tint = Math.random() * 0xE8D4CD;
                            point.x = 20 * i;
                            point.y = (10 * j + j * 2);
                            sprites.addChild(point)
                        }
                    }

                    draw(frequency_array);
                    window.requestAnimationFrame(waveLooper);
                } else {
                    sprites.removeChildren()
                    graphics01.clear(0, 0, window.innerWidth, window.innerHeight);
                    graphics02.clear(0, 0, window.innerWidth, window.innerHeight);
                    graphics03.clear(0, 0, window.innerWidth, window.innerHeight);
                    graphics04.clear(0, 0, window.innerWidth, window.innerHeight);
                    graphics05.clear(0, 0, window.innerWidth, window.innerHeight);

                    return;
                }
            }
            document.querySelector('.home_play').addEventListener('click', () => {
                context.resume().then(() => {
                    audio.play();
                    waveLooper();
                });
            });

            let draw = (frequency_array) => {

                graphics01.clear(0, 0, window.innerWidth, window.innerHeight);
                graphics02.clear(0, 0, window.innerWidth, window.innerHeight);
                graphics03.clear(0, 0, window.innerWidth, window.innerHeight);
                graphics04.clear(0, 0, window.innerWidth, window.innerHeight);
                graphics05.clear(0, 0, window.innerWidth, window.innerHeight);

                // graphics01.lineStyle(2, 0x5BCCFD);
                graphics01.lineStyle(2, 0xFFD700);
                graphics02.lineStyle(1, 0xF5C900);
                graphics03.lineStyle(1, 0xF5C900);
                graphics04.lineStyle(1, 0xF6F63D);
                graphics05.lineStyle(1, 0xF6F63D);


                for (let i = 0; i <= 2000; i++) {
                    frequency_array[i] = frequency_array[i] <= -100 ? -100 : frequency_array[i]
                    if (i == 0) {
                        graphics01.moveTo((2 * i) + 10, window.innerHeight / 2 + (frequency_array[i] + 100) * 4);
                        graphics02.moveTo((2 * i) + 10, window.innerHeight / 2 + (frequency_array[i] + 101) * 4);
                        graphics03.moveTo((2 * i) + 10, window.innerHeight / 2 + (frequency_array[i] + 99) * 4);
                        graphics04.moveTo((2 * i) + 10, window.innerHeight / 2 + (frequency_array[i] + 102) * 4);
                        graphics05.moveTo((2 * i) + 10, window.innerHeight / 2 + (frequency_array[i] + 98) * 4);


                    } else {
                        graphics01.lineTo((2 * i) + 10, window.innerHeight / 2 + (frequency_array[i] + 100) * 4);
                        graphics02.lineTo((2 * i) + 10, window.innerHeight / 2 + (frequency_array[i] + 101) * 4);
                        graphics03.lineTo((2 * i) + 10, window.innerHeight / 2 + (frequency_array[i] + 99) * 4);
                        graphics04.lineTo((2 * i) + 10, window.innerHeight / 2 + (frequency_array[i] + 102) * 4);
                        graphics05.lineTo((2 * i) + 10, window.innerHeight / 2 + (frequency_array[i] + 98) * 4);

                    }
                }
            }



            window.addEventListener('resize', function () {
                app.renderer.resize(window.innerWidth <= 1320 ? window.innerWidth : 1320, window.innerHeight);
            });


            // RANK Slider =====================================================================================================================


            transform_rotate = new Array();
            rankOrder = 1;
            set_value = {
                size: parseInt(160 - (((1920 - window.innerWidth) / 16) * 0.01 * 60)),
                translateZ: parseInt(360 - (((1920 - window.innerWidth) / 16) * 0.01 * 130)),
            }

            for (let i = 0; i < 10; i++) {
                if (i == 0) {
                    document.querySelector(`.home_song${i + 1}`).setAttribute(
                        'style',
                        `width: ${set_value.size}px;
                        height: ${set_value.size}px;
                        transform: rotateY(${i * 36}deg) translateZ(${set_value.translateZ}px) scale(1.18);`
                    );
                    transform_rotate.push(`${parseInt(document.querySelector(`.home_song${i + 1}`).style.transform.substr(8, 3))}`);
                    document.querySelector(`.home_song${rankOrder} .home_shadow`).style.boxShadow = '5px 5px 5px 1px rgba(0, 0, 0, 0.2)';
                    if (window.innerWidth <= 576) {
                        document.querySelector(`.home_song${rankOrder} .home_song_info`).style.transform = `translateX(${set_value.size}px)`;
                    } else {
                        document.querySelector(`.home_song${rankOrder} .home_song_info`).style.transform = `translateX(${-set_value.size}px)`;
                    }
                    if (window.innerWidth <= 576) {
                        document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${-set_value.size / 2}px)`;
                    } else {
                        document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${set_value.size / 2}px)`;
                    }
                    document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${set_value.size / 2}px)`;

                } else {
                    document.querySelector(`.home_song${i + 1}`).setAttribute(
                        'style',
                        `width: ${set_value.size}px;
                        height: ${set_value.size}px;
                        transform: rotateY(${i * 36}deg) translateZ(${set_value.translateZ}px`
                    );
                    transform_rotate.push(`${parseInt(document.querySelector(`.home_song${i + 1}`).style.transform.substr(8, 3))}`);
                }
            }
            document.querySelector('.home_perspective').setAttribute(
                'style',
                `left: ${540 - (((1920 - window.innerWidth) / 16) * 0.01 * 1020)}px`
            );

            let right_arrow_click = () => {
                document.querySelector('.home_right_arrow').removeEventListener('click', right_arrow_click);
                document.querySelector('.home_slider').removeEventListener('mousedown', myMousedown);
                document.querySelector('.home_slider').removeEventListener('mousemove', myMousemove);

                rankOrder--;
                if (rankOrder == 0) {
                    rankOrder = 10;
                    document.querySelector(`.home_song${rankOrder} .home_shadow`).style.boxShadow = '5px 5px 5px 1px rgba(0, 0, 0, 0.2)';
                    if (window.innerWidth <= 576) {
                        document.querySelector(`.home_song${rankOrder} .home_song_info`).setAttribute('style', `width:200%; transform:translateX(${set_value.size}px);`);
                    } else {
                        document.querySelector(`.home_song${rankOrder} .home_song_info`).setAttribute('style', `width:100%; transform:translateX(${-set_value.size}px);`);
                    }
                    if (window.innerWidth <= 576) {
                        document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${-set_value.size / 2}px)`;
                    } else {
                        document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${set_value.size / 2}px)`;
                    }
                    document.querySelector(`.home_song1 .home_shadow`).style.boxShadow = 'none';
                    if (window.innerWidth <= 576) {
                        document.querySelector(`.home_song1 .home_song_info`).setAttribute('style', `width:100%; transform:translateX(0px);`);
                    } else {
                        document.querySelector(`.home_song1 .home_song_info`).style.transform = 'translateX(0px)';
                    }
                    document.querySelector(`.home_song1 .home_vinyl_records_s`).style.transform = 'translateX(0px)';
                } else {
                    document.querySelector(`.home_song${rankOrder} .home_shadow`).style.boxShadow = '5px 5px 5px 1px rgba(0, 0, 0, 0.2)';
                    if (window.innerWidth <= 576) {
                        document.querySelector(`.home_song${rankOrder} .home_song_info`).setAttribute('style', `width:200%; transform:translateX(${set_value.size}px);`);
                    } else {
                        document.querySelector(`.home_song${rankOrder} .home_song_info`).setAttribute('style', `width:100%; transform:translateX(${-set_value.size}px);`);
                    }
                    if (window.innerWidth <= 576) {
                        document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${-set_value.size / 2}px)`;
                    } else {
                        document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${set_value.size / 2}px)`;
                    }
                    document.querySelector(`.home_song${rankOrder + 1} .home_shadow`).style.boxShadow = 'none';
                    if (window.innerWidth <= 576) {
                        document.querySelector(`.home_song${rankOrder + 1} .home_song_info`).setAttribute('style', `width:100%; transform:translateX(0px);`);
                    } else {
                        document.querySelector(`.home_song${rankOrder + 1} .home_song_info`).style.transform = 'translateX(0px)';
                    }
                    document.querySelector(`.home_song${rankOrder + 1} .home_vinyl_records_s`).style.transform = 'translateX(0px)';
                }
                right_spin();
            };
            document.querySelector('.home_right_arrow').addEventListener('click', right_arrow_click);

            let left_arrow_click = () => {
                document.querySelector('.home_left_arrow').removeEventListener('click', left_arrow_click);
                document.querySelector('.home_slider').removeEventListener('mousedown', myMousedown);
                document.querySelector('.home_slider').removeEventListener('mousemove', myMousemove);

                rankOrder++;
                if (rankOrder == 11) {
                    rankOrder = 1;
                    document.querySelector(`.home_song${rankOrder} .home_shadow`).style.boxShadow = '5px 5px 5px 1px rgba(0, 0, 0, 0.2)';
                    if (window.innerWidth <= 576) {
                        document.querySelector(`.home_song${rankOrder} .home_song_info`).setAttribute('style', `width:200%; transform:translateX(${set_value.size}px);`);
                    } else {
                        document.querySelector(`.home_song${rankOrder} .home_song_info`).setAttribute('style', `width:100%; transform:translateX(${-set_value.size}px);`);
                    }
                    if (window.innerWidth <= 576) {
                        document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${-set_value.size / 2}px)`;
                    } else {
                        document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${set_value.size / 2}px)`;
                    }
                    document.querySelector(`.home_song10 .home_shadow`).style.boxShadow = 'none';
                    if (window.innerWidth <= 576) {
                        document.querySelector(`.home_song10 .home_song_info`).setAttribute('style', `width:100%; transform:translateX(0px);`);
                    } else {
                        document.querySelector(`.home_song10 .home_song_info`).style.transform = 'translateX(0px)';
                    }
                    document.querySelector(`.home_song10 .home_vinyl_records_s`).style.transform = 'translateX(0px)';
                } else {
                    document.querySelector(`.home_song${rankOrder} .home_shadow`).style.boxShadow = '5px 5px 5px 1px rgba(0, 0, 0, 0.2)';
                    if (window.innerWidth <= 576) {
                        document.querySelector(`.home_song${rankOrder} .home_song_info`).setAttribute('style', `width:200%; transform:translateX(${set_value.size}px);`);
                    } else {
                        document.querySelector(`.home_song${rankOrder} .home_song_info`).setAttribute('style', `width:100%; transform:translateX(${-set_value.size}px);`);
                    }
                    if (window.innerWidth <= 576) {
                        document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${-set_value.size / 2}px)`;
                    } else {
                        document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${set_value.size / 2}px)`;
                    }
                    document.querySelector(`.home_song${rankOrder - 1} .home_shadow`).style.boxShadow = 'none';
                    if (window.innerWidth <= 576) {
                        document.querySelector(`.home_song${rankOrder - 1} .home_song_info`).setAttribute('style', `width:100%; transform:translateX(0px);`);
                    } else {
                        document.querySelector(`.home_song${rankOrder - 1} .home_song_info`).style.transform = 'translateX(0px)';
                    }
                    document.querySelector(`.home_song${rankOrder - 1} .home_vinyl_records_s`).style.transform = 'translateX(0px)';
                }
                left_spin();
            };
            document.querySelector('.home_left_arrow').addEventListener('click', left_arrow_click);

            spin = 0;
            let right_spin = () => {
                if (spin <= 36) {
                    for (let i = 0; i < 10; i++) {
                        if (+transform_rotate[i] == 360 || +transform_rotate[i] == 0) {
                            document
                                .querySelector(`.home_song${i + 1}`).style.transform = `rotateY(${0 + spin}deg) translateZ(${set_value.translateZ}px) scale(${1.18 - 0.005 * spin})`;
                        } else if (+transform_rotate[i] == 324) {
                            document
                                .querySelector(`.home_song${i + 1} `).style.transform = `rotateY(${+ transform_rotate[i] + spin}deg) translateZ(${set_value.translateZ}px) scale(${1 + 0.005 * spin})`;
                        } else {
                            document
                                .querySelector(`.home_song${i + 1} `).style.transform = `rotateY(${+ transform_rotate[i] + spin}deg) translateZ(${set_value.translateZ}px) scale(1)`;
                        }
                    }
                    spin++;
                    window.requestAnimationFrame(right_spin);
                } else {
                    transform_rotate = [];
                    for (let i = 0; i < 10; i++) {
                        transform_rotate.push(`${parseInt(document.querySelector(`.home_song${i + 1}`).style.transform.substr(8, 3))} `)
                    }
                    spin = 0;
                    document.querySelector('.home_right_arrow').addEventListener('click', right_arrow_click);
                    document.querySelector('.home_slider').addEventListener('mousedown', myMousedown);
                    document.querySelector('.home_slider').addEventListener('mousemove', myMousemove);
                }
            }
            let left_spin = () => {
                if (spin <= 36) {
                    for (let i = 0; i < 10; i++) {
                        if (+transform_rotate[i] == 0 || +transform_rotate[i] == 360) {
                            document
                                .querySelector(`.home_song${i + 1} `).style.transform = `rotateY(${360 - spin}deg) translateZ(${set_value.translateZ}px) scale(${1.18 - 0.005 * spin})`;

                        } else if (+transform_rotate[i] == 36) {
                            document
                                .querySelector(`.home_song${i + 1} `).style.transform = `rotateY(${+ transform_rotate[i] - spin}deg) translateZ(${set_value.translateZ}px) scale(${1 + 0.005 * spin})`;

                        } else {
                            document
                                .querySelector(`.home_song${i + 1} `).style.transform = `rotateY(${+ transform_rotate[i] - spin}deg) translateZ(${set_value.translateZ}px)`;
                        }
                    }
                    spin++;
                    window.requestAnimationFrame(left_spin);
                } else {
                    transform_rotate = [];
                    for (let i = 0; i < 10; i++) {
                        transform_rotate.push(`${parseInt(document.querySelector(`.home_song${i + 1}`).style.transform.substr(8, 3))}`)
                    }
                    spin = 0;
                    document.querySelector('.home_left_arrow').addEventListener('click', left_arrow_click);
                    document.querySelector('.home_slider').addEventListener('mousedown', myMousedown);
                    document.querySelector('.home_slider').addEventListener('mousemove', myMousemove);
                }
            }

            press = false;
            move = false;

            document.querySelector('.home_slider').addEventListener('selectstart', (e) => {
                e.preventDefault();
            })
            let myMousedown = (e) => {
                document.querySelector('.home_slider').removeEventListener('mousedown', myMousedown);
                press = true;
                preX = e.clientX;
                document.querySelector('.home_slider').style.cursor = 'grabbing';
            };
            document.querySelector('.home_slider').addEventListener('mousedown', myMousedown)

            let myMousemove = (e) => {
                if (press == true) {
                    x = e.clientX;
                    spin = parseInt(Math.abs(preX - x) / 20);
                    if (spin >= 1) {
                        move = true;
                        if (preX < x) {
                            moveDirection = 'right';
                            for (let i = 0; i < 10; i++) {
                                if (+transform_rotate[i] == 360 || +transform_rotate[i] == 0) {
                                    document
                                        .querySelector(`.home_song${i + 1}`).style.transform = `rotateY(${0 + (spin > 36 ? 36 : spin)}deg) translateZ(${set_value.translateZ}px) scale(${1.18 - 0.005 * (spin > 36 ? 36 : spin)})`;
                                } else if (+transform_rotate[i] == 324) {
                                    document
                                        .querySelector(`.home_song${i + 1} `).style.transform = `rotateY(${+ transform_rotate[i] + (spin > 36 ? 36 : spin)}deg) translateZ(${set_value.translateZ}px) scale(${1 + 0.005 * (spin > 36 ? 36 : spin)})`;
                                } else {
                                    document
                                        .querySelector(`.home_song${i + 1} `).style.transform = `rotateY(${+ transform_rotate[i] + (spin > 36 ? 36 : spin)}deg) translateZ(${set_value.translateZ}px) scale(1)`;
                                }
                            }
                        } else if (preX > x) {
                            moveDirection = 'left';
                            for (let i = 0; i < 10; i++) {
                                if (+transform_rotate[i] == 0 || +transform_rotate[i] == 360) {
                                    document
                                        .querySelector(`.home_song${i + 1} `).style.transform = `rotateY(${360 - (spin > 36 ? 36 : spin)}deg) translateZ(${set_value.translateZ}px) scale(${1.18 - 0.005 * (spin > 36 ? 36 : spin)})`;

                                } else if (+transform_rotate[i] == 36) {
                                    document
                                        .querySelector(`.home_song${i + 1} `).style.transform = `rotateY(${+ transform_rotate[i] - (spin > 36 ? 36 : spin)}deg) translateZ(${set_value.translateZ}px) scale(${1 + 0.005 * (spin > 36 ? 36 : spin)})`;

                                } else {
                                    document
                                        .querySelector(`.home_song${i + 1} `).style.transform = `rotateY(${+ transform_rotate[i] - (spin > 36 ? 36 : spin)}deg) translateZ(${set_value.translateZ}px)`;
                                }
                            }
                        }
                    }
                }
            };
            document.querySelector('.home_slider').addEventListener('mousemove', myMousemove);

            let myMouseup = () => {
                document.querySelector('.home_slider').removeEventListener('mousemove', myMousemove);
                press = false;
                document.querySelector('.home_slider').style.cursor = 'grab';
                if (move == true) {
                    move = false;
                    if (moveDirection == 'right') {
                        rankOrder--;
                        moveDirection = '';
                        if (rankOrder == 0) {
                            rankOrder = 10;
                            document.querySelector(`.home_song${rankOrder} .home_shadow`).style.boxShadow = '5px 5px 5px 1px rgba(0, 0, 0, 0.2)';
                            if (window.innerWidth <= 576) {
                                document.querySelector(`.home_song${rankOrder} .home_song_info`).setAttribute('style', `width:200%; transform:translateX(${set_value.size}px);`);
                            } else {
                                document.querySelector(`.home_song${rankOrder} .home_song_info`).setAttribute('style', `width:100%; transform:translateX(${-set_value.size}px);`);
                            }
                            if (window.innerWidth <= 576) {
                                document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${-set_value.size / 2}px)`;
                            } else {
                                document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${set_value.size / 2}px)`;
                            }
                            document.querySelector(`.home_song1 .home_shadow`).style.boxShadow = 'none';
                            if (window.innerWidth <= 576) {
                                document.querySelector(`.home_song1 .home_song_info`).setAttribute('style', `width:100%; transform:translateX(0px);`);
                            } else {
                                document.querySelector(`.home_song1 .home_song_info`).style.transform = 'translateX(0px)';
                            }
                            document.querySelector(`.home_song1 .home_vinyl_records_s`).style.transform = 'translateX(0px)';
                        } else {
                            document.querySelector(`.home_song${rankOrder} .home_shadow`).style.boxShadow = '5px 5px 5px 1px rgba(0, 0, 0, 0.2)';
                            if (window.innerWidth <= 576) {
                                document.querySelector(`.home_song${rankOrder} .home_song_info`).setAttribute('style', `width:200%; transform:translateX(${set_value.size}px);`);
                            } else {
                                document.querySelector(`.home_song${rankOrder} .home_song_info`).setAttribute('style', `width:100%; transform:translateX(${-set_value.size}px);`);
                            }
                            if (window.innerWidth <= 576) {
                                document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${-set_value.size / 2}px)`;
                            } else {
                                document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${set_value.size / 2}px)`;
                            }
                            document.querySelector(`.home_song${rankOrder + 1} .home_shadow`).style.boxShadow = 'none';
                            if (window.innerWidth <= 576) {
                                document.querySelector(`.home_song${rankOrder + 1} .home_song_info`).setAttribute('style', `width:100%; transform:translateX(0px);`);
                            } else {
                                document.querySelector(`.home_song${rankOrder + 1} .home_song_info`).style.transform = 'translateX(0px)';
                            }
                            document.querySelector(`.home_song${rankOrder + 1} .home_vinyl_records_s`).style.transform = 'translateX(0px)';
                        }
                        right_spin();
                    } else if (moveDirection == 'left') {
                        rankOrder++;
                        moveDirection = '';
                        if (rankOrder == 11) {
                            rankOrder = 1;
                            document.querySelector(`.home_song${rankOrder} .home_shadow`).style.boxShadow = '5px 5px 5px 1px rgba(0, 0, 0, 0.2)';
                            if (window.innerWidth <= 576) {
                                document.querySelector(`.home_song${rankOrder} .home_song_info`).setAttribute('style', `width:200%; transform:translateX(${set_value.size}px);`);
                            } else {
                                document.querySelector(`.home_song${rankOrder} .home_song_info`).setAttribute('style', `width:100%; transform:translateX(${-set_value.size}px);`);
                            }
                            if (window.innerWidth <= 576) {
                                document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${-set_value.size / 2}px)`;
                            } else {
                                document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${set_value.size / 2}px)`;
                            }
                            document.querySelector(`.home_song10 .home_shadow`).style.boxShadow = 'none';
                            if (window.innerWidth <= 576) {
                                document.querySelector(`.home_song10 .home_song_info`).setAttribute('style', `width:100%; transform:translateX(0px);`);
                            } else {
                                document.querySelector(`.home_song10 .home_song_info`).style.transform = 'translateX(0px)';
                            }
                            document.querySelector(`.home_song10 .home_vinyl_records_s`).style.transform = 'translateX(0px)';
                        } else {
                            document.querySelector(`.home_song${rankOrder} .home_shadow`).style.boxShadow = '5px 5px 5px 1px rgba(0, 0, 0, 0.2)';
                            if (window.innerWidth <= 576) {
                                document.querySelector(`.home_song${rankOrder} .home_song_info`).setAttribute('style', `width:200%; transform:translateX(${set_value.size}px);`);
                            } else {
                                document.querySelector(`.home_song${rankOrder} .home_song_info`).setAttribute('style', `width:100%; transform:translateX(${-set_value.size}px);`);
                            }
                            if (window.innerWidth <= 576) {
                                document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${-set_value.size / 2}px)`;
                            } else {
                                document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${set_value.size / 2}px)`;
                            }
                            document.querySelector(`.home_song${rankOrder - 1} .home_shadow`).style.boxShadow = 'none';
                            if (window.innerWidth <= 576) {
                                document.querySelector(`.home_song${rankOrder - 1} .home_song_info`).setAttribute('style', `width:100%; transform:translateX(0px);`);
                            } else {
                                document.querySelector(`.home_song${rankOrder - 1} .home_song_info`).style.transform = 'translateX(0px)';
                            }
                            document.querySelector(`.home_song${rankOrder - 1} .home_vinyl_records_s`).style.transform = 'translateX(0px)';
                        }
                        left_spin();
                    }
                } else if (move == false) {
                    document.querySelector('.home_slider').addEventListener('mousedown', myMousedown);
                    document.querySelector('.home_slider').addEventListener('mousemove', myMousemove);
                }
            };
            window.addEventListener('mouseup', myMouseup);



            // RWD and size set =======================================================================================


            // HOME
            document.querySelector('.home_vinyl_records').setAttribute('style', `top: ${-100 - ((1920 - window.innerWidth) / 16) * 0.01 * 20}px; left: ${-250 + ((1920 - window.innerWidth) / 16) * 0.01 * 70}px; width: ${1100 - ((1920 - window.innerWidth) / 16) * 0.01 * 700}px; height: ${1100 - ((1920 - window.innerWidth) / 16) * 0.01 * 700}px`);
            document.querySelector('.home_stylus').setAttribute('style', `top: ${-30 + ((1920 - window.innerWidth) / 16) * 0.01 * 55}px; left: ${480 - ((1920 - window.innerWidth) / 16) * 0.01 * 360}px; width: ${618 - ((1920 - window.innerWidth) / 16) * 0.01 * 393}px; height: ${180 - ((1920 - window.innerWidth) / 16) * 0.01 * 114.5}px`);
            document.querySelector('.home_cover_img').setAttribute('style', `top: calc((100% - ${370 - ((1920 - window.innerWidth) / 16) * 0.01 * 230}px) / 2); left: calc((100% - ${370 - ((1920 - window.innerWidth) / 16) * 0.01 * 230}px) / 2); width: ${370 - ((1920 - window.innerWidth) / 16) * 0.01 * 230}px; height: ${370 - ((1920 - window.innerWidth) / 16) * 0.01 * 230}px`);
            document.querySelector('.home_ctrl_container').setAttribute('style', `top:${260 - ((1920 - window.innerWidth) / 16) * 0.01 * 200}px; left: ${610 - ((1920 - window.innerWidth) / 16) * 0.01 * 600}px; height:${400 - ((1080 - window.innerHeight) / 6) * 0.01 * 100}px;`);
            document.querySelector('.home_top_arrow').setAttribute('style', `width: ${100 - ((1080 - window.innerHeight) / 6) * 0.01 * 40}px; height: ${100 - ((1080 - window.innerHeight) / 6) * 0.01 * 40}px;`);
            document.querySelector('.home_bot_arrow').setAttribute('style', `width: ${100 - ((1080 - window.innerHeight) / 6) * 0.01 * 40}px; height: ${100 - ((1080 - window.innerHeight) / 6) * 0.01 * 40}px;`);

            // RANK
            if (window.innerWidth <= 576) {
                set_value = {
                    size: parseInt(160 - (((1920 - window.innerWidth) / 16) * 0.01 * 120)),
                    translateZ: parseInt(360 - (((1920 - window.innerWidth) / 16) * 0.01 * 130)),
                }
            } else {
                set_value = {
                    size: parseInt(160 - (((1920 - window.innerWidth) / 16) * 0.01 * 60)),
                    translateZ: parseInt(360 - (((1920 - window.innerWidth) / 16) * 0.01 * 130)),
                }
            }
            if (window.innerWidth <= 768) {
                document.querySelector('.home_rank').setAttribute('style', `width: ${257.5 - (((1080 - window.innerHeight) / 6) * 0.01 * 128.75)}px; height: ${115 - (((1080 - window.innerHeight) / 6) * 0.01 * 57.5)}px;`);
                document.querySelector('.home_slider .home_title').style.margin = `${180 - (((1080 - window.innerHeight) / 6) * 0.01 * 40)}px auto 0 auto`;
                document.querySelector('.home_rank').style.left = `calc((100% - ${document.querySelector('.home_rank').style.width}) / 2)`; //不可合併
            } else {
                document.querySelector('.home_rank').setAttribute('style', `left: 100px; width: 165px; height: 730px;`);
                document.querySelector('.home_slider .home_title').style.margin = `100px auto 0 auto`;
            }

            for (let i = 0; i < 10; i++) {
                if (i == 0) {
                    document.querySelector(`.home_song${i + 1}`).setAttribute(
                        'style',
                        `width: ${set_value.size}px;
                        height: ${set_value.size}px;
                        transform: rotateY(${i * 36}deg) translateZ(${set_value.translateZ}px) scale(1.18);`
                    );
                    if (window.innerWidth <= 576) {
                        document.querySelector(`.home_song${rankOrder} .home_song_info`).style.transform = `translateX(${set_value.size}px)`;
                        document.querySelector(`.home_song${rankOrder} .home_song_info`).style.width = `200%`;
                        document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${-set_value.size / 2}px)`;
                    } else {
                        document.querySelector(`.home_song${rankOrder} .home_song_info`).style.transform = `translateX(${-set_value.size}px)`;
                        document.querySelector(`.home_song${rankOrder} .home_song_info`).style.width = `100%`;
                        document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${set_value.size / 2}px)`;
                    }
                } else {
                    document.querySelector(`.home_song${i + 1}`).setAttribute(
                        'style',
                        `width: ${set_value.size}px;
                        height: ${set_value.size}px;
                        transform: rotateY(${i * 36}deg) translateZ(${set_value.translateZ}px`
                    );
                }
            }

            document.querySelector('.home_perspective').setAttribute(
                'style',
                `top: ${100 - (((1080 - window.innerHeight) / 6) * 0.01 * 40)}px; left: ${540 - (((1920 - window.innerWidth) / 16) * 0.01 * 1020)}px`
            );
            if (window.innerWidth <= 480) {
                document.querySelector('.home_arrow_container').style.margin = `${300 - (((1920 - window.innerWidth) / 16) * 0.01 * 160)}px auto 0 30px`;
            } else if (window.innerWidth <= 576) {
                document.querySelector('.home_arrow_container').style.margin = `${300 - (((1920 - window.innerWidth) / 16) * 0.01 * 160)}px auto 0 60px`;
            } else if (window.innerWidth > 576 && window.innerWidth <= 768) {
                document.querySelector('.home_arrow_container').style.margin = `260px auto 0 auto`;
            } else if (window.innerWidth > 768) {
                document.querySelector('.home_arrow_container').style.margin = `${440 - (((1920 - window.innerWidth) / 11.52) * 0.01 * 140)}px auto 0 auto`;
            }

            // ACTIVITY
            if (window.innerWidth <= 440) {
                document.querySelector('.home_activity_info').style.left = `0px`;
            }
            if (window.innerWidth <= 768 && window.innerWidth > 440) {
                document.querySelector('.home_activity_info').style.left = `${(window.innerWidth - 400) / 2}px`;
            }
            if (window.innerWidth <= 768) {
                document.querySelector('.home_activity_img').setAttribute('style', `position:initial;float:left; width: ${150 - (((768 - window.innerWidth) / 4.48) * 0.01 * 70)}px; height: ${195 - (((768 - window.innerWidth) / 4.48) * 0.01 * 91)}px;margin: 0 20px 0 0;`);
                document.querySelector('.home_activity').setAttribute('style', `width:${375 - (((768 - window.innerWidth) / 4.48) * 0.01 * 187.5)}px;; height: ${129 - (((768 - window.innerWidth) / 4.48) * 0.01 * 64.5)}px;`);
                document.querySelector('.home_activity_info').style.top = `${240 - (((768 - window.innerWidth) / 4.48) * 0.01 * 140)}px`

            }
            if (window.innerWidth <= 992 && window.innerWidth > 768) {
                document.querySelector('.home_activity').setAttribute('style', `width:${675 - (((992 - window.innerWidth) / 2.24) * 0.01 * 300)}px;; height: ${232.2 - (((992 - window.innerWidth) / 2.24) * 0.01 * 103.2)}px;`);
                document.querySelector('.home_activity_info').style.left = `${(window.innerWidth - 720) / 2}px`;
            }
            if (window.innerWidth <= 992) {
                document.querySelector('.home_activity').style.left = `calc((100% - ${document.querySelector('.home_activity').style.width}) / 2)`
                document.querySelector('.home_activity_info').style.height = '390px';
                document.querySelector('.home_DJ').style.display = 'none';
            }
            if (window.innerWidth <= 1600 && window.innerWidth > 992) {
                document.querySelector('.home_activity').setAttribute('style', `width:675px;; height: 232.2px;`);
                document.querySelector('.home_activity_info').setAttribute('style', `left: ${720 - (((1600 - window.innerWidth) / 6.08) * 0.01 * (720 - ((window.innerWidth - 720) / 2)))}px; height: 390px`);
                document.querySelector('.home_DJ').setAttribute('style', `left: ${0 - (((1600 - window.innerWidth) / 6.08) * 0.01 * 613)}px`);
            }
            if (window.innerWidth <= 1600 && window.innerWidth > 768) {
                document.querySelector('.home_activity_img').setAttribute('style', `width:300px; height: 390px;`);
                document.querySelector('.home_activity_info').style.top = `${340 - (((1600 - window.innerWidth) / 8.32) * 0.01 * 100)}px`
            }
            if (window.innerWidth <= 1600) {
                document.querySelector('.enter_bt').setAttribute('style', `bottom:-90px; width:120px; height: 80px;`);
            }
            if (window.innerWidth > 1600) {
                document.querySelector('.home_activity').setAttribute('style', `width:${750 - (((1920 - window.innerWidth) / 3.2) * 0.01 * 75)}px;; height: ${258 - (((1920 - window.innerWidth) / 3.2) * 0.01 * 25.8)}px;`);
                document.querySelector('.home_activity_info').setAttribute('style', `top:${100 + (((1920 - window.innerWidth) / 3.2) * 0.01 * 240)}px; right: ${660 - (((1920 - window.innerWidth) / 3.2) * 0.01 * 160)}px; height: ${650 - (((1920 - window.innerWidth) / 3.2) * 0.01 * 260)}px`);
                document.querySelector('.home_activity_img').setAttribute('style', `width:${500 - (((1920 - window.innerWidth) / 3.2) * 0.01 * 200)}px; height: ${650 - (((1920 - window.innerWidth) / 3.2) * 0.01 * 260)}px;`);
                document.querySelector('.enter_bt').setAttribute('style', `bottom:${80 - (((1920 - window.innerWidth) / 3.2) * 0.01 * 170)}px; width:${180 - (((1920 - window.innerWidth) / 3.2) * 0.01 * 60)}px; height: ${120 - (((1920 - window.innerWidth) / 3.2) * 0.01 * 40)}px;`);
                document.querySelector('.home_DJ').setAttribute('style', `left:0px`);

            }


            $(window).resize(() => {
                // HOME
                //                                                                 元素最大寬度 - ((螢幕最大寬度 - 當前螢幕寬度) / 16) => 最小螢幕寬度 320，1920-320=1600，除以16=100 => * 0.01 分成100% => 每一% * 元素最大寬與最小寬之差
                document.querySelector('.home_vinyl_records').setAttribute('style', `top: ${-100 - ((1920 - window.innerWidth) / 16) * 0.01 * 20}px; left: ${-250 + ((1920 - window.innerWidth) / 16) * 0.01 * 70}px; width: ${1100 - ((1920 - window.innerWidth) / 16) * 0.01 * 700}px; height: ${1100 - ((1920 - window.innerWidth) / 16) * 0.01 * 700}px`);
                document.querySelector('.home_stylus').setAttribute('style', `top: ${-30 + ((1920 - window.innerWidth) / 16) * 0.01 * 55}px; left: ${480 - ((1920 - window.innerWidth) / 16) * 0.01 * 360}px; width: ${618 - ((1920 - window.innerWidth) / 16) * 0.01 * 393}px; height: ${180 - ((1920 - window.innerWidth) / 16) * 0.01 * 114.5}px`);
                document.querySelector('.home_cover_img').setAttribute('style', `top: calc((100% - ${370 - ((1920 - window.innerWidth) / 16) * 0.01 * 230}px) / 2); left: calc((100% - ${370 - ((1920 - window.innerWidth) / 16) * 0.01 * 230}px) / 2); width: ${370 - ((1920 - window.innerWidth) / 16) * 0.01 * 230}px; height: ${370 - ((1920 - window.innerWidth) / 16) * 0.01 * 230}px`);
                document.querySelector('.home_ctrl_container').setAttribute('style', `top:${260 - ((1920 - window.innerWidth) / 16) * 0.01 * 200}px; left: ${610 - ((1920 - window.innerWidth) / 16) * 0.01 * 600}px; height:${400 - ((1080 - window.innerHeight) / 6) * 0.01 * 100}px;`);
                document.querySelector('.home_top_arrow').setAttribute('style', `width: ${100 - ((1080 - window.innerHeight) / 6) * 0.01 * 40}px; height: ${100 - ((1080 - window.innerHeight) / 6) * 0.01 * 40}px;`);
                document.querySelector('.home_bot_arrow').setAttribute('style', `width: ${100 - ((1080 - window.innerHeight) / 6) * 0.01 * 40}px; height: ${100 - ((1080 - window.innerHeight) / 6) * 0.01 * 40}px;`);

                // RANK
                if (window.innerWidth <= 576) {
                    set_value = {
                        size: parseInt(160 - (((1920 - window.innerWidth) / 16) * 0.01 * 120)),
                        translateZ: parseInt(360 - (((1920 - window.innerWidth) / 16) * 0.01 * 130)),
                    }
                } else {
                    set_value = {
                        size: parseInt(160 - (((1920 - window.innerWidth) / 16) * 0.01 * 60)),
                        translateZ: parseInt(360 - (((1920 - window.innerWidth) / 16) * 0.01 * 130)),
                    }
                }
                if (window.innerWidth <= 768) {
                    document.querySelector('.home_rank').setAttribute('style', `width: ${257.5 - (((1080 - window.innerHeight) / 6) * 0.01 * 128.75)}px; height: ${115 - (((1080 - window.innerHeight) / 6) * 0.01 * 57.5)}px;`);
                    document.querySelector('.home_slider .home_title').style.margin = `${180 - (((1080 - window.innerHeight) / 6) * 0.01 * 40)}px auto 0 auto`;
                    document.querySelector('.home_rank').style.left = `calc((100% - ${document.querySelector('.home_rank').style.width}) / 2)`; //不可合併
                } else {
                    document.querySelector('.home_rank').setAttribute('style', `left: 100px; width: 165px; height: 730px;`);
                    document.querySelector('.home_slider .home_title').style.margin = `100px auto 0 auto`;
                }

                for (let i = 0; i < 10; i++) {
                    if (i == 0) {
                        document.querySelector(`.home_song${i + 1}`).setAttribute(
                            'style',
                            `width: ${set_value.size}px;
                        height: ${set_value.size}px;
                        transform: rotateY(${i * 36}deg) translateZ(${set_value.translateZ}px) scale(1.18);`
                        );
                        if (window.innerWidth <= 576) {
                            document.querySelector(`.home_song${rankOrder} .home_song_info`).style.transform = `translateX(${set_value.size}px)`;
                            document.querySelector(`.home_song${rankOrder} .home_song_info`).style.width = `200%`;
                            document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${-set_value.size / 2}px)`;
                        } else {
                            document.querySelector(`.home_song${rankOrder} .home_song_info`).style.transform = `translateX(${-set_value.size}px)`;
                            document.querySelector(`.home_song${rankOrder} .home_song_info`).style.width = `100%`;
                            document.querySelector(`.home_song${rankOrder} .home_vinyl_records_s`).style.transform = `translateX(${set_value.size / 2}px)`;
                        }
                    } else {
                        document.querySelector(`.home_song${i + 1}`).setAttribute(
                            'style',
                            `width: ${set_value.size}px;
                        height: ${set_value.size}px;
                        transform: rotateY(${i * 36}deg) translateZ(${set_value.translateZ}px`
                        );
                    }
                }

                document.querySelector('.home_perspective').setAttribute(
                    'style',
                    `top: ${100 - (((1080 - window.innerHeight) / 6) * 0.01 * 40)}px; left: ${540 - (((1920 - window.innerWidth) / 16) * 0.01 * 1020)}px`
                );
                if (window.innerWidth <= 480) {
                    document.querySelector('.home_arrow_container').style.margin = `${300 - (((1920 - window.innerWidth) / 16) * 0.01 * 160)}px auto 0 30px`;
                } else if (window.innerWidth <= 576) {
                    document.querySelector('.home_arrow_container').style.margin = `${300 - (((1920 - window.innerWidth) / 16) * 0.01 * 160)}px auto 0 60px`;
                } else if (window.innerWidth > 576 && window.innerWidth <= 768) {
                    document.querySelector('.home_arrow_container').style.margin = `260px auto 0 auto`;
                } else if (window.innerWidth > 768) {
                    document.querySelector('.home_arrow_container').style.margin = `${440 - (((1920 - window.innerWidth) / 11.52) * 0.01 * 140)}px auto 0 auto`;
                }

                // ACTIVITY
                if (window.innerWidth <= 440) {
                    document.querySelector('.home_activity_info').style.left = `0px`;
                }
                if (window.innerWidth <= 768 && window.innerWidth > 440) {
                    document.querySelector('.home_activity_info').style.left = `${(window.innerWidth - 400) / 2}px`;
                }
                if (window.innerWidth <= 768) {
                    document.querySelector('.home_activity_img').setAttribute('style', `position:initial;float:left; width: ${150 - (((768 - window.innerWidth) / 4.48) * 0.01 * 70)}px; height: ${195 - (((768 - window.innerWidth) / 4.48) * 0.01 * 91)}px;margin: 0 20px 0 0;`);
                    document.querySelector('.home_activity').setAttribute('style', `width:${375 - (((768 - window.innerWidth) / 4.48) * 0.01 * 187.5)}px;; height: ${129 - (((768 - window.innerWidth) / 4.48) * 0.01 * 64.5)}px;`);
                    document.querySelector('.home_activity_info').style.top = `${240 - (((768 - window.innerWidth) / 4.48) * 0.01 * 140)}px`

                }
                if (window.innerWidth <= 992 && window.innerWidth > 768) {
                    document.querySelector('.home_activity').setAttribute('style', `width:${675 - (((992 - window.innerWidth) / 2.24) * 0.01 * 300)}px;; height: ${232.2 - (((992 - window.innerWidth) / 2.24) * 0.01 * 103.2)}px;`);
                    document.querySelector('.home_activity_info').style.left = `${(window.innerWidth - 720) / 2}px`;
                }
                if (window.innerWidth <= 992) {
                    document.querySelector('.home_activity').style.left = `calc((100% - ${document.querySelector('.home_activity').style.width}) / 2)`
                    document.querySelector('.home_activity_info').style.height = '390px';
                    document.querySelector('.home_DJ').style.display = 'none';
                }
                if (window.innerWidth <= 1600 && window.innerWidth > 992) {
                    document.querySelector('.home_activity').setAttribute('style', `width:675px;; height: 232.2px;`);
                    document.querySelector('.home_activity_info').setAttribute('style', `left: ${720 - (((1600 - window.innerWidth) / 6.08) * 0.01 * (720 - ((window.innerWidth - 720) / 2)))}px; height: 390px`);
                    document.querySelector('.home_DJ').setAttribute('style', `left: ${0 - (((1600 - window.innerWidth) / 6.08) * 0.01 * 613)}px`);
                }
                if (window.innerWidth <= 1600 && window.innerWidth > 768) {
                    document.querySelector('.home_activity_img').setAttribute('style', `width:300px; height: 390px;`);
                    document.querySelector('.home_activity_info').style.top = `${340 - (((1600 - window.innerWidth) / 8.32) * 0.01 * 100)}px`
                }
                if (window.innerWidth <= 1600) {
                    document.querySelector('.enter_bt').setAttribute('style', `bottom:-90px; width:120px; height: 80px;`);
                }
                if (window.innerWidth > 1600) {
                    document.querySelector('.home_activity').setAttribute('style', `width:${750 - (((1920 - window.innerWidth) / 3.2) * 0.01 * 75)}px;; height: ${258 - (((1920 - window.innerWidth) / 3.2) * 0.01 * 25.8)}px;`);
                    document.querySelector('.home_activity_info').setAttribute('style', `top:${100 + (((1920 - window.innerWidth) / 3.2) * 0.01 * 240)}px; right: ${660 - (((1920 - window.innerWidth) / 3.2) * 0.01 * 160)}px; height: ${650 - (((1920 - window.innerWidth) / 3.2) * 0.01 * 260)}px`);
                    document.querySelector('.home_activity_img').setAttribute('style', `width:${500 - (((1920 - window.innerWidth) / 3.2) * 0.01 * 200)}px; height: ${650 - (((1920 - window.innerWidth) / 3.2) * 0.01 * 260)}px;`);
                    document.querySelector('.enter_bt').setAttribute('style', `bottom:${80 - (((1920 - window.innerWidth) / 3.2) * 0.01 * 170)}px; width:${180 - (((1920 - window.innerWidth) / 3.2) * 0.01 * 60)}px; height: ${120 - (((1920 - window.innerWidth) / 3.2) * 0.01 * 40)}px;`);
                    document.querySelector('.home_DJ').setAttribute('style', `left:0px`);
                }

            });



            // var timeStart, timeEnd, time;//申明全局變數

            // function getTimeNow()//獲取此刻時間
            // {
            //     now = new Date();
            //     return now.getTime();
            // }

            // function holdDown(e)//滑鼠按下時觸發
            // {
            //     preX = e.clientX;
            //     console.log(preX);
            //     timeStart = getTimeNow();//獲取滑鼠按下時的時間
            //     time = setInterval(() =>//setInterval會每100毫秒執行一次
            //     {
            //         timeEnd = getTimeNow();//也就是每100毫秒獲取一次時間
            //         if (timeEnd - timeStart > 500)//如果此時檢測到的時間與第一次獲取的時間差有1000毫秒
            //         {
            //             clearInterval(time);//便不再繼續重覆此函數 （clearInterval取消周期性執行）
            //             document.querySelector('.home_slider').addEventListener('mousemove', (e) => {
            //                 x = e.clientX;
            //                 console.log(x);
            //             });
            //         }
            //     }, 100);
            // }
            // function holdUp() {
            //     clearInterval(time);//如果按下時間不到1000毫秒便彈起，
            // }










            // sec06 canvas
            var renderer, scene, camera, ww, wh, particles;

            ww = window.innerWidth,
                wh = window.innerHeight;

            var centerVector = new THREE.Vector3(0, 0, 0);
            var previousTime = 0;

            var getImageData = function (image) {

                var canvas = document.createElement("canvas");
                canvas.width = image.width;
                canvas.height = image.height;

                var ctx = canvas.getContext("2d");
                ctx.drawImage(image, 0, 0);

                return ctx.getImageData(0, 0, image.width, image.height);
            }

            var drawTheMap = function () {

                var geometry = new THREE.Geometry();
                var material = new THREE.PointsMaterial({
                    size: 3,
                    color: 0x000000,
                    sizeAttenuation: false
                });
                for (var y = 0, y2 = imagedata.height; y < y2; y += 2) {
                    for (var x = 0, x2 = imagedata.width; x < x2; x += 2) {
                        if (imagedata.data[(x * 4 + y * 4 * imagedata.width) + 3] > 128) {

                            var vertex = new THREE.Vector3();
                            vertex.x = Math.random() * 1000 - 500;
                            vertex.y = Math.random() * 1000 - 500;
                            vertex.z = -Math.random() * 500;

                            vertex.destination = {
                                x: x - imagedata.width / 2,
                                y: -y + imagedata.height / 2,
                                z: 0
                            };

                            vertex.speed = Math.random() / 200 + 0.015;

                            geometry.vertices.push(vertex);
                        }
                    }
                }
                particles = new THREE.Points(geometry, material);

                scene.add(particles);

                requestAnimationFrame(render);
            };

            var init = function () {
                THREE.ImageUtils.crossOrigin = '';
                renderer = new THREE.WebGLRenderer({
                    canvas: document.querySelector('.home_map'),
                    antialias: true
                });
                renderer.setSize(ww, wh);
                renderer.setClearColor(0xFAFAF1);

                scene = new THREE.Scene();

                camera = new THREE.PerspectiveCamera(100, ww / wh, 0.1, 10000);
                camera.position.set(-100, 0, 400);
                camera.lookAt(centerVector);
                scene.add(camera);

                texture = THREE.ImageUtils.loadTexture("./img/home/audio_man.png", undefined, function () {
                    imagedata = getImageData(texture.image);
                    drawTheMap();
                });
                window.addEventListener('resize', onResize, false);

            };
            var onResize = function () {
                ww = window.innerWidth;
                wh = window.innerHeight;
                renderer.setSize(ww, wh);
                camera.aspect = ww / wh;
                camera.updateProjectionMatrix();
            };

            var render = function (a) {

                requestAnimationFrame(render);

                for (var i = 0, j = particles.geometry.vertices.length; i < j; i++) {
                    var particle = particles.geometry.vertices[i];
                    particle.x += (particle.destination.x - particle.x) * particle.speed;
                    particle.y += (particle.destination.y - particle.y) * particle.speed;
                    particle.z += (particle.destination.z - particle.z) * particle.speed;
                }

                if (a - previousTime > 100) {
                    var index = Math.floor(Math.random() * particles.geometry.vertices.length);
                    var particle1 = particles.geometry.vertices[index];
                    var particle2 = particles.geometry.vertices[particles.geometry.vertices.length - index];
                    TweenMax.to(particle, Math.random() * 2 + 1, { x: particle2.x, y: particle2.y, ease: Power2.easeInOut });
                    TweenMax.to(particle2, Math.random() * 2 + 1, { x: particle1.x, y: particle1.y, ease: Power2.easeInOut });
                    previousTime = a;
                }

                particles.geometry.verticesNeedUpdate = true;
                camera.position.x = Math.sin(a / 5000) * 100;
                camera.lookAt(centerVector);

                renderer.render(scene, camera);
            };

            init();
        }); //document.ready end



    </script>
    <style>
        #loader {
            position: fixed;
            z-index: 99999;
            width: 100%;
            height: 100%;
            background: #333;
            transition: all 0.6s;
        }

        .line_container {
            position: relative;
            left: calc(50% - 20px);
            top: calc(50% - 20px);
            width: 40px;
            height: 40px;
        }

        #loader .line {
            width: 8px;
            position: absolute;
            border-radius: 5px;
            bottom: 0;
            background: -webkit-gradient(linear, left top, left bottom, from(#1ee95d), to(#5714ce));
            background: -webkit-linear-gradient(top, #1ee95d, #5714ce);
            background: -o-linear-gradient(top, #1ee95d, #5714ce);
            background: linear-gradient(to bottom, #1ee95d, #5714ce);
        }

        #loader .line1 {
            left: 0;
            -webkit-animation: line-grow 0.5s ease alternate infinite;
            animation: line-grow 0.5s ease alternate infinite;
        }

        #loader .line2 {
            left: 20px;
            -webkit-animation: line-grow 0.5s 0.2s ease alternate infinite;
            animation: line-grow 0.5s 0.2s ease alternate infinite;
        }

        #loader .line3 {
            left: 40px;
            -webkit-animation: line-grow 0.5s 0.4s ease alternate infinite;
            animation: line-grow 0.5s 0.4s ease alternate infinite;
        }

        @-webkit-keyframes line-grow {
            0% {
                height: 0;
            }

            100% {
                height: 40px;
            }
        }

        @keyframes line-grow {
            0% {
                height: 0;
            }

            100% {
                height: 40px;
            }
        }
    </style>
</head>

<body>
    <div id="loader">
        <div class="line_container">
            <div class="line line1"></div>
            <div class="line line2"></div>
            <div class="line line3"></div>
        </div>
    </div>
    <script>
        window.addEventListener('load', () => {
            $('#loader').fadeOut();
        });
    </script>
    <div id="home_app">
        <div class="nav_bar flexbox">
            <div class="hamburger" @click="hamburger_click">
                <div class="hamburger-box">
                    <div class="hamburger-inner"></div>
                </div>
            </div>
            <div class="mobile_list" @click="stopPropagation">
                <div class="paint_border"></div>
                <ul>
                    <li class="REMIX flexbox">
                        <a href="./remix.html">
                        </a>
                    </li>
                    <li class="COLLECTION flexbox">
                        <a href="./collection.html">
                        </a>
                    </li>
                    <li class="ACTIVITY flexbox">
                        <a href="./activity.html">
                        </a>
                    </li>
                    <li class="LIBRARY flexbox">
                        <a href="./library.html">
                        </a>
                    </li>
                </ul>
            </div>
            <div class="logo_container">
                <a href="./index.html">
                    <div class="logo"></div>
                    <div class="finger"></div>
                </a>
            </div>
            <ul class="main_list flexbox">
                <li class="REMIX flexbox">
                    <a href="./remix.html">
                    </a>
                </li>
                <li class="COLLECTION flexbox">
                    <a href="./collection.html">
                    </a>
                </li>
                <li class="ACTIVITY flexbox">
                    <a href="./activity.html">
                    </a>
                </li>
                <li class="LIBRARY flexbox">
                    <a href="./library.html">
                    </a>
                </li>
            </ul>
            <div class="search_bt" @click="search_bt_click">
                <a href="#"></a>
            </div>
            <div class="search_bar" @click="stopPropagation">
                <input class="search" type="text" />
                <div class="tag_container">
                </div>
            </div>

            <div class="mem_bt" @click="mem_bt_click" v-if="mem_login == true">
                <a href="#"></a>
            </div>
            <div class="login_bt" @click="" v-if="mem_login == false">
                <a href="./login.html"></a>
            </div>
            <div class="mem_list" @click="stopPropagation">
                <div class="paint_border"></div>
                <ul>
                    <li>
                        <a href="./profile.html">
                            <h4>Profile</h4>
                        </a>
                    </li>
                    <li>
                        <a href="./library.html">
                            <h4>Library</h4>
                        </a>
                    </li>
                    <li>
                        <a href="./songsadded.html">
                            <h4>
                                Song Upload
                                <br />&amp; Remove
                            </h4>
                        </a>
                    </li>
                    <li>
                        <a href="./store.html">
                            <h4>
                                Store Value
                                <br />&amp;Store Record
                            </h4>
                        </a>
                    </li>
                    <li>
                        <a href="./donate.html">
                            <h4>Donate Record</h4>
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        <div id="pagepiling">
            <div class="home_sec home_sec01 section">
                <div class="home_paint01"></div>
                <div class="home_paint02"></div>
                <div class="home_img_container">
                    <div class="home_stylus"></div>
                    <div class="home_vinyl_records">
                        <div class="home_cover_img">
                        </div>
                    </div>
                </div>
                <div class="home_ctrl_container flexbox">
                    <div class="home_top_arrow"></div>
                    <div class="home_songInfo_container">
                        <div class="home_song_cover"></div>
                        <div class="contain flexbox">
                            <span class="home_song_name">Lucid Dreamer</span>
                            <span class="home_song_author">Spazz Cardigan</span>
                        </div>
                        <div class="home_control_container">
                            <button class="home_prev"><i class="fas fa-step-backward"></i></button>
                            <button class="home_play"><i class="fas fa-play"></i></button>
                            <button class="home_next"><i class="fas fa-step-forward"></i></button>
                        </div>
                    </div>
                    <div class="home_bot_arrow"></div>
                </div>
                <div class="home_wave_container">
                    <canvas class="home_line"></canvas>
                    <!-- <div class="home_line"></div> -->
                </div>
            </div>
            <div class="home_sec home_sec02 section">
                <div class="home_paint01"></div>
                <div class="home_paint02"></div>
                <div class="home_mixer">
                </div>
                <div class="home_container">
                    <div class="home_remix">
                    </div>
                    <h2>Creative melody and beat<span>Keeping it real!</span></h2>
                    <div class="content1">
                        <div class="design_text designlead opened" style="display: block;">
                            <h3>A light in the dark...</h3>
                            <p>We help make your boldest ideas come alive and turn even your most ambitious visions into
                                reality. Let us breathe life into your message effectively and innovatively, both online
                                and
                                in print, to get you and your product noticed. With the help of sophisticated marketing
                                and
                                well-planned image campaigns, we’ll help raise your brand awareness and anchor your
                                company
                                firmly in the minds your targeted market giving you a valuable advantage over your
                                competitors.</p>
                            <h4 class="togglebox-hinweis">Results that speak volumes...</h4>
                        </div>
                        <div class="hidden"></div>
                    </div>
                    <div class="content2">
                        <ul>
                            <li id="design-1" class="designlink"><a href="" ng-click="openSlideIn(1)"><span
                                        class="dex-number">1</span><span class="dex-toptext">Remix</span><span
                                        class="dex-bottomtext">Online</span><span class="dex-arrow">▶</span></a>
                            </li>
                            <li id="design-2" class="designlink"><a href="" ng-click="openSlideIn(2)"><span
                                        class="dex-number">2</span><span class="dex-toptext">Compose</span><span
                                        class="dex-bottomtext">Beat</span><span class="dex-arrow">▶</span></a>
                            </li>
                            <li id="design-3" class="designlink"><a href="" ng-click="openSlideIn(3)"><span
                                        class="dex-number">3</span><span class="dex-toptext">Upload</span><span
                                        class="dex-bottomtext">Rank</span><span class="dex-arrow">▶</span></a></li>
                        </ul>
                        <div class="design_text design_design-1">
                            <h3>Web Design, E-Commerce and Online-Marketing</h3>
                            <p>Nowadays, a professional website is a basic necessity for all companies and client
                                expectations rely on a modern website to give them a comprehensive experience and leave
                                no questions unanswered. Our websites and e-commerce solutions score with sophisticated
                                and innovative design as well as a high degree of user-friendliness. The consistent use
                                of responsive web design means that we can achieve the flexibility that the market
                                demands with regard to the mobile sector, so guaranteeing that your website will work
                                perfectly on all devices from your desktop pc right down to your smart phone.</p>
                        </div>
                        <div class="design_text design_design-2" style="display: none;">
                            <h3>Corporate Design and Branding</h3>
                            <p>The corporate identity of a company embodies all of its characteristics and conveys the
                                company’s philosophy, competence as well as its understanding of its respective branch.
                                As an integral part of this, the corporate design plays a leading role by dictating how
                                the public views you. Corporate design is much more than just the company logo, it’s
                                about how your stationary is designed or how your online-image is presented and follows
                                a common theme present throughout all of your correspondence. By unifying the design of
                                all these elements, we can project a compelling visual image, which conveys your firm’s
                                message effectively and competently – let us turn your company into a brand.</p>
                        </div>
                        <div class="design_text design_design-3" style="display: none;">
                            <h3>Print Advertising and Graphic Design</h3>
                            <p>We are avid followers of modern trends as well as staunch supporters of traditional tried
                                and tested marketing concepts and are more than happy to mix ground-breaking innovation
                                with classical elements to create visual results of the greatest consistency. We don’t
                                just highlight your products, we aim to tell a story designed to evoke emotions and
                                transport your audience into your world. The secret of a successful print marketing
                                campaign lies in creating a permanent and enduring connection between your company and
                                your targeted consumer group.</p>
                        </div>
                    </div>
                </div>
                <p>
                    You can mix andmaster EDM in here.It’s easy for everyonewho want create music on their own.
                </p>
                <div class="home_more_bt">
                    <a href="./remix.html"></a>
                </div>
            </div>
            <div class="home_sec home_sec03 section">
                <div class="home_pot">
                </div>
                <div class="home_rank">
                </div>
                <div class="home_slider">
                    <div class="home_title">
                        <h1>Favorite TOP 10</h1>
                    </div>
                    <div class="home_perspective">
                        <div class="home_song_container">
                            <div class="home_song home_song1">
                                <div class="home_cover_img flexbox">
                                    <i class="far fa-play-circle"></i>
                                    <i class="far fa-play-circle"></i>
                                </div>
                                <div class="home_shadow"></div>
                                <div class="home_song_info">
                                    <div class="container flexbox">
                                        <span class="home_song_name">{{rank.song_name[0]}}</span>
                                        <span class="home_song_author">{{rank.song_author[0]}}</span>
                                    </div>
                                    <div class="home_icon_container flexbox">
                                        <div class="home_favorite">
                                            <i class="fas fa-heart"></i>
                                            <span>{{rank.favorite[0]}}</span>
                                        </div>
                                        <div class="home_donate">
                                            <i class="fas fa-coins"></i>
                                            <span>{{rank.donate[0]}}</span>
                                        </div>
                                    </div>
                                    <div class="introduction">
                                        {{rank.song_intro[0]}}
                                        <div class="more"></div>
                                    </div>
                                </div>
                                <div class="home_vinyl_records_s"></div>
                            </div>
                            <div class="home_song home_song2">
                                <div class="home_cover_img"><a href="" draggable="home_false"></a></div>
                                <div class="home_shadow"></div>
                                <div class="home_song_info">
                                    <div class="container flexbox">
                                        <span class="home_song_name">{{rank.song_name[1]}}</span>
                                        <span class="home_song_author">{{rank.song_author[1]}}</span>
                                    </div>
                                    <div class="home_icon_container flexbox">
                                        <div class="home_favorite">
                                            <i class="fas fa-heart"></i>
                                            <span>{{rank.favorite[1]}}</span>
                                        </div>
                                        <div class="home_donate">
                                            <i class="fas fa-coins"></i>
                                            <span>{{rank.donate[1]}}</span>
                                        </div>
                                    </div>
                                    <div class="introduction">
                                        {{rank.song_intro[1]}}
                                        <div class="more"></div>
                                    </div>
                                </div>
                                <div class="home_vinyl_records_s"></div>
                            </div>
                            <div class="home_song home_song3">
                                <div class="home_cover_img"><a href="" draggable="home_false"></a></div>
                                <div class="home_shadow"></div>
                                <div class="home_song_info">
                                    <div class="container flexbox">
                                        <span class="home_song_name">{{rank.song_name[2]}}</span>
                                        <span class="home_song_author">{{rank.song_author[2]}}</span>
                                    </div>
                                    <div class="home_icon_container flexbox">
                                        <div class="home_favorite">
                                            <i class="fas fa-heart"></i>
                                            <span>{{rank.favorite[2]}}</span>
                                        </div>
                                        <div class="home_donate">
                                            <i class="fas fa-coins"></i>
                                            <span>{{rank.donate[2]}}</span>
                                        </div>
                                    </div>
                                    <div class="introduction">
                                        {{rank.song_intro[2]}}
                                        <div class="more"></div>
                                    </div>
                                </div>
                                <div class="home_vinyl_records_s"></div>
                            </div>
                            <div class="home_song home_song4">
                                <div class="home_cover_img"><a href="" draggable="home_false"></a></div>
                                <div class="home_shadow"></div>
                                <div class="home_song_info">
                                    <div class="container flexbox">
                                        <span class="home_song_name">{{rank.song_name[3]}}</span>
                                        <span class="home_song_author">{{rank.song_author[3]}}</span>
                                    </div>
                                    <div class="home_icon_container flexbox">
                                        <div class="home_favorite">
                                            <i class="fas fa-heart"></i>
                                            <span>{{rank.favorite[3]}}</span>
                                        </div>
                                        <div class="home_donate">
                                            <i class="fas fa-coins"></i>
                                            <span>{{rank.donate[3]}}</span>
                                        </div>
                                    </div>
                                    <div class="introduction">
                                        {{rank.song_intro[3]}}
                                        <div class="more"></div>
                                    </div>
                                </div>
                                <div class="home_vinyl_records_s"></div>
                            </div>
                            <div class="home_song home_song5">
                                <div class="home_cover_img"><a href="" draggable="home_false"></a></div>
                                <div class="home_shadow"></div>
                                <div class="home_song_info">
                                    <div class="container flexbox">
                                        <span class="home_song_name">{{rank.song_name[4]}}</span>
                                        <span class="home_song_author">{{rank.song_author[4]}}</span>
                                    </div>
                                    <div class="home_icon_container flexbox">
                                        <div class="home_favorite">
                                            <i class="fas fa-heart"></i>
                                            <span>{{rank.favorite[4]}}</span>
                                        </div>
                                        <div class="home_donate">
                                            <i class="fas fa-coins"></i>
                                            <span>{{rank.donate[4]}}</span>
                                        </div>
                                    </div>
                                    <div class="introduction">
                                        {{rank.song_intro[4]}}
                                        <div class="more"></div>
                                    </div>
                                </div>
                                <div class="home_vinyl_records_s"></div>
                            </div>
                            <div class="home_song home_song6">
                                <div class="home_cover_img"><a href="" draggable="home_false"></a></div>
                                <div class="home_shadow"></div>
                                <div class="home_song_info">
                                    <div class="container flexbox">
                                        <span class="home_song_name">{{rank.song_name[5]}}</span>
                                        <span class="home_song_author">{{rank.song_author[5]}}</span>
                                    </div>
                                    <div class="home_icon_container flexbox">
                                        <div class="home_favorite">
                                            <i class="fas fa-heart"></i>
                                            <span>{{rank.favorite[5]}}</span>
                                        </div>
                                        <div class="home_donate">
                                            <i class="fas fa-coins"></i>
                                            <span>{{rank.donate[5]}}</span>
                                        </div>
                                    </div>
                                    <div class="introduction">
                                        {{rank.song_intro[5]}}
                                        <div class="more"></div>
                                    </div>
                                </div>
                                <div class="home_vinyl_records_s"></div>
                            </div>
                            <div class="home_song home_song7">
                                <div class="home_cover_img"><a href="" draggable="home_false"></a></div>
                                <div class="home_shadow"></div>
                                <div class="home_song_info">
                                    <div class="container flexbox">
                                        <span class="home_song_name">{{rank.song_name[6]}}</span>
                                        <span class="home_song_author">{{rank.song_author[6]}}</span>
                                    </div>
                                    <div class="home_icon_container flexbox">
                                        <div class="home_favorite">
                                            <i class="fas fa-heart"></i>
                                            <span>{{rank.favorite[6]}}</span>
                                        </div>
                                        <div class="home_donate">
                                            <i class="fas fa-coins"></i>
                                            <span>{{rank.donate[6]}}</span>
                                        </div>
                                    </div>
                                    <div class="introduction">
                                        {{rank.song_intro[6]}}
                                        <div class="more"></div>
                                    </div>
                                </div>
                                <div class="home_vinyl_records_s"></div>
                            </div>
                            <div class="home_song home_song8">
                                <div class="home_cover_img"><a href="" draggable="home_false"></a></div>
                                <div class="home_shadow"></div>
                                <div class="home_song_info">
                                    <div class="container flexbox">
                                        <span class="home_song_name">{{rank.song_name[7]}}</span>
                                        <span class="home_song_author">{{rank.song_author[7]}}</span>
                                    </div>
                                    <div class="home_icon_container flexbox">
                                        <div class="home_favorite">
                                            <i class="fas fa-heart"></i>
                                            <span>{{rank.favorite[7]}}</span>
                                        </div>
                                        <div class="home_donate">
                                            <i class="fas fa-coins"></i>
                                            <span>{{rank.donate[7]}}</span>
                                        </div>
                                    </div>
                                    <div class="introduction">
                                        {{rank.song_intro[7]}}
                                        <div class="more"></div>
                                    </div>
                                </div>
                                <div class="home_vinyl_records_s"></div>
                            </div>
                            <div class="home_song home_song9">
                                <div class="home_cover_img"><a href="" draggable="home_false"></a></div>
                                <div class="home_shadow"></div>
                                <div class="home_song_info">
                                    <div class="container flexbox">
                                        <span class="home_song_name">{{rank.song_name[8]}}</span>
                                        <span class="home_song_author">{{rank.song_author[8]}}</span>
                                    </div>
                                    <div class="home_icon_container flexbox">
                                        <div class="home_favorite">
                                            <i class="fas fa-heart"></i>
                                            <span>{{rank.favorite[8]}}</span>
                                        </div>
                                        <div class="home_donate">
                                            <i class="fas fa-coins"></i>
                                            <span>{{rank.donate[8]}}</span>
                                        </div>
                                    </div>
                                    <div class="introduction">
                                        {{rank.song_intro[8]}}
                                        <div class="more"></div>
                                    </div>
                                </div>
                                <div class="home_vinyl_records_s"></div>
                            </div>
                            <div class="home_song home_song10">
                                <div class="home_cover_img"><a href="" draggable="home_false"></a></div>
                                <div class="home_shadow"></div>
                                <div class="home_song_info">
                                    <div class="container flexbox">
                                        <span class="home_song_name">{{rank.song_name[9]}}</span>
                                        <span class="home_song_author">{{rank.song_author[9]}}</span>
                                    </div>
                                    <div class="home_icon_container flexbox">
                                        <div class="home_favorite">
                                            <i class="fas fa-heart"></i>
                                            <span>{{rank.favorite[9]}}</span>
                                        </div>
                                        <div class="home_donate">
                                            <i class="fas fa-coins"></i>
                                            <span>{{rank.donate[9]}}</span>
                                        </div>
                                    </div>
                                    <div class="introduction">
                                        {{rank.song_intro[9]}}
                                        <div class="more"></div>
                                    </div>
                                </div>
                                <div class="home_vinyl_records_s"></div>
                            </div>

                        </div>
                    </div>
                    <div class="home_arrow_container">
                        <div class="home_left_arrow"></div>
                        <div class="home_right_arrow"></div>
                    </div>
                </div>

            </div>
            <div class="home_sec home_sec04 section">
                <div class="home_paint01"></div>
                <div class="home_paint02"></div>
                <div class="home_activity"></div>
                <div class="home_DJ">
                </div>
                <div class="home_activity_info">
                    <div class="home_activity_img">
                    </div>
                    <h2>
                        Electronic dance music contest 2019
                    </h2>
                    <h3>
                        Information
                    </h3>
                    <p>
                        American Idol is an annual American singing competition which began its first season in June 11,
                        2002. Part of the Idol franchise, it originated from the UK reality program Pop Idol.
                    </p>
                    <h3>
                        Time
                    </h3>
                    <p>
                        2019 Dec 31 to 2020 Dec 31
                    </p>
                    <div class="enter_bt">
                        <a href="./activity.html"></a>
                    </div>
                </div>

            </div>
            <div class="home_sec home_sec05 section">
                <div class="home_paint01"></div>
                <div class="home_collection">
                </div>
                <p>
                    We have more than 10,000,00 songs in here. enjoy together!
                </p>
                <div class="home_sort_container">
                    <div class="home_sort home_sort01 flexbox">
                        <div class="selector">
                            <svg width="250" height="250" viewbox="0,0,200,200">
                                <path class="st0" stroke="#26F5F7" stroke-width="10" stroke-linecap="round" fill="none"
                                    d="M49.2,32.9c-3.5-5.5-11-7.3-17-5.2S21.7,35.2,19,41.2S15.2,54,14.4,60.6c-3,24.9-3,50.2-2.7,75.3
                                c0.1,8.7,0.3,17.7,4.1,25.4c5.3,10.7,16.5,16.6,27.5,19.7c17.9,5,36.8,4.4,55.3,2.8c17-1.4,50.9-5,67.4-9.4
                                c6.3-1.7,15.8-11.7,17.4-18.3c2.1-9.1,5-37.4,5.3-46.7c0.8-21.9-1.4-44.1-8.6-64.6c-0.9-2.6-2-5.3-3.7-7.5
                                c-1.9-2.4-4.5-4.1-7.1-5.6c-16-9.6-33.7-16.4-52-18.7s-33.4-1.1-50,7.2" />
                            </svg>
                        </div>
                        <a class="flexbox" href="./collection.html">Rock</a>
                    </div>
                    <div class="home_sort home_sort02 flexbox">
                        <div class="selector">
                            <svg width="250" height="250" viewbox="0,0,200,200">
                                <path class="st0" stroke="#26F5F7" stroke-width="10" stroke-linecap="round" fill="none"
                                    d="M49.2,32.9c-3.5-5.5-11-7.3-17-5.2S21.7,35.2,19,41.2S15.2,54,14.4,60.6c-3,24.9-3,50.2-2.7,75.3
                                c0.1,8.7,0.3,17.7,4.1,25.4c5.3,10.7,16.5,16.6,27.5,19.7c17.9,5,36.8,4.4,55.3,2.8c17-1.4,50.9-5,67.4-9.4
                                c6.3-1.7,15.8-11.7,17.4-18.3c2.1-9.1,5-37.4,5.3-46.7c0.8-21.9-1.4-44.1-8.6-64.6c-0.9-2.6-2-5.3-3.7-7.5
                                c-1.9-2.4-4.5-4.1-7.1-5.6c-16-9.6-33.7-16.4-52-18.7s-33.4-1.1-50,7.2" />
                            </svg>
                        </div>
                        <a class="flexbox" href="./collection.html">Matel</a>
                    </div>
                    <div class="home_sort home_sort03 flexbox">
                        <div class="selector">
                            <svg width="250" height="250" viewbox="0,0,200,200">
                                <path class="st0" stroke="#26F5F7" stroke-width="10" stroke-linecap="round" fill="none"
                                    d="M49.2,32.9c-3.5-5.5-11-7.3-17-5.2S21.7,35.2,19,41.2S15.2,54,14.4,60.6c-3,24.9-3,50.2-2.7,75.3
                                c0.1,8.7,0.3,17.7,4.1,25.4c5.3,10.7,16.5,16.6,27.5,19.7c17.9,5,36.8,4.4,55.3,2.8c17-1.4,50.9-5,67.4-9.4
                                c6.3-1.7,15.8-11.7,17.4-18.3c2.1-9.1,5-37.4,5.3-46.7c0.8-21.9-1.4-44.1-8.6-64.6c-0.9-2.6-2-5.3-3.7-7.5
                                c-1.9-2.4-4.5-4.1-7.1-5.6c-16-9.6-33.7-16.4-52-18.7s-33.4-1.1-50,7.2" />
                            </svg>
                        </div>
                        <a class="flexbox" href="./collection.html">R & B</a>
                    </div>
                    <div class="home_sort home_sort04 flexbox">
                        <div class="selector">
                            <svg width="250" height="250" viewbox="0,0,200,200">
                                <path class="st0" stroke="#26F5F7" stroke-width="10" stroke-linecap="round" fill="none"
                                    d="M49.2,32.9c-3.5-5.5-11-7.3-17-5.2S21.7,35.2,19,41.2S15.2,54,14.4,60.6c-3,24.9-3,50.2-2.7,75.3
                                c0.1,8.7,0.3,17.7,4.1,25.4c5.3,10.7,16.5,16.6,27.5,19.7c17.9,5,36.8,4.4,55.3,2.8c17-1.4,50.9-5,67.4-9.4
                                c6.3-1.7,15.8-11.7,17.4-18.3c2.1-9.1,5-37.4,5.3-46.7c0.8-21.9-1.4-44.1-8.6-64.6c-0.9-2.6-2-5.3-3.7-7.5
                                c-1.9-2.4-4.5-4.1-7.1-5.6c-16-9.6-33.7-16.4-52-18.7s-33.4-1.1-50,7.2" />
                            </svg>
                        </div>
                        <a class="flexbox" href="./collection.html">Hip-hop</a>
                    </div>
                    <div class="home_sort home_sort05 flexbox">
                        <div class="selector">
                            <svg width="250" height="250" viewbox="0,0,200,200">
                                <path class="st0" stroke="#26F5F7" stroke-width="10" stroke-linecap="round" fill="none"
                                    d="M49.2,32.9c-3.5-5.5-11-7.3-17-5.2S21.7,35.2,19,41.2S15.2,54,14.4,60.6c-3,24.9-3,50.2-2.7,75.3
                                c0.1,8.7,0.3,17.7,4.1,25.4c5.3,10.7,16.5,16.6,27.5,19.7c17.9,5,36.8,4.4,55.3,2.8c17-1.4,50.9-5,67.4-9.4
                                c6.3-1.7,15.8-11.7,17.4-18.3c2.1-9.1,5-37.4,5.3-46.7c0.8-21.9-1.4-44.1-8.6-64.6c-0.9-2.6-2-5.3-3.7-7.5
                                c-1.9-2.4-4.5-4.1-7.1-5.6c-16-9.6-33.7-16.4-52-18.7s-33.4-1.1-50,7.2" />
                            </svg>
                        </div>
                        <a class="flexbox" href="./collection.html">Classical</a>
                    </div>
                    <div class="home_sort home_sort06 flexbox">
                        <div class="selector">
                            <svg width="250" height="250" viewbox="0,0,200,200">
                                <path class="st0" stroke="#26F5F7" stroke-width="10" stroke-linecap="round" fill="none"
                                    d="M49.2,32.9c-3.5-5.5-11-7.3-17-5.2S21.7,35.2,19,41.2S15.2,54,14.4,60.6c-3,24.9-3,50.2-2.7,75.3
                                c0.1,8.7,0.3,17.7,4.1,25.4c5.3,10.7,16.5,16.6,27.5,19.7c17.9,5,36.8,4.4,55.3,2.8c17-1.4,50.9-5,67.4-9.4
                                c6.3-1.7,15.8-11.7,17.4-18.3c2.1-9.1,5-37.4,5.3-46.7c0.8-21.9-1.4-44.1-8.6-64.6c-0.9-2.6-2-5.3-3.7-7.5
                                c-1.9-2.4-4.5-4.1-7.1-5.6c-16-9.6-33.7-16.4-52-18.7s-33.4-1.1-50,7.2" />
                            </svg>
                        </div>
                        <a class="flexbox" href="./collection.html">Country</a>
                    </div>
                </div>
            </div>
            <div class="home_sec home_sec06 section">
                <div class="home_about">
                </div>
                <p>
                    We love EDM, so we get togehterto share morew music for you.
                </p>
                <canvas class="home_map"></canvas>
            </div>
        </div>

        <!-- player start -->
        <div id="player">
            <audio src="" id="audioPlayer"></audio>
            <div class="player_s">
                <div class="info">
                    <div class="cover"><img src="./img/collection/album1.jpg"></div>
                    <div class="songInfo">
                        <span class="name">Lucid Dreamer</span>
                        <span class="creator">Spazz Cardigan</span>
                    </div>
                    <div class="heart becomeRed"><img src="./img/collection/redheart.png" alt=""></div>
                    <div class="clearfix"></div>
                </div>

                <div class="controlPanel">
                    <div class="progressbar">
                        <div class="progress"></div>
                    </div>
                    <div class="time">
                        <span class="start">00:00</span>
                        <span class="end">04:30</span>
                        <div class="clearfix"></div>
                    </div>
                    <div class="btns">
                        <div class="controls">
                            <button class="prev"><i class="fas fa-step-backward"></i></button>
                            <button class="play"><i class="fas fa-play"></i></button>
                            <button class="next"><i class="fas fa-step-forward"></i></button>
                            <button class="stop"><i class="fas fa-stop"></i></button>
                            <button class="rand"><i class="fas fa-random"></i></button>
                            <button class="loop"><i class="fas fa-undo-alt"></i></button>
                            <div class="clearfix"></div>
                        </div>
                        <div class="vol">
                            <div class="volicon"><i class="fas fa-volume-down"></i></div>
                            <div class="volLine">
                                <div class="volControl"></div>
                            </div>
                            <div class="clearfix"></div>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                </div>

                <div class="expand" id="expand"><i class="fas fa-expand"></i></div>
                <div class="clearfix"></div>
            </div>

            <!-- 詳細版 -->
            <div class="player_b">
                <div class="left">
                    <div class="info">
                        <div class="songCover">
                            <img src="./img/collection/album1.jpg">
                            <div class="coverRec"><img src="./img/library/player_record.png" alt=""></div>
                        </div>
                    </div>
                    <div class="songInfo">
                        <div class="name">Lucid Dreamer</div>
                        <div class="creator">Spazz Cardigan</div>
                        <div class="heart becomeRed"><img src="./img/collection/redheart.png" alt=""></div>
                        <div class="clearfix"></div>
                    </div>
                    <div class="controlPanel">
                        <div class="progressbar">
                            <div class="progress"></div>
                        </div>
                        <div class="time">
                            <span class="start">00:00</span>
                            <span class="end">00:00</span>
                            <div class="clearfix"></div>
                        </div>
                        <div class="btns">
                            <div class="controls">
                                <button class="rand"><i class="fas fa-random"></i></button>
                                <button class="prev"><i class="fas fa-step-backward"></i></button>
                                <button class="play"><i class="fas fa-play"></i></button>
                                <button class="next"><i class="fas fa-step-forward"></i></button>
                                <button class="stop"><i class="fas fa-stop"></i></button>
                                <button class="loop"><i class="fas fa-undo-alt"></i></button>
                                <div class="clearfix"></div>
                            </div>
                            <div class="vol">
                                <div class="volicon"><i class="fas fa-volume-down"></i></div>
                                <div class="volLine">
                                    <div class="volControl"></div>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                    <div class="pushBtn"></div>
                </div>

                <div class="right">
                    <div class="pushBtn"></div>
                    <div class="listTitle">
                        <div class="listCover">
                            <img src="./img/library/list_pic0.jpg"></div>
                        <div class="listName">
                            <h2>Liked songs</h2>
                            <span>8 songs</span>
                        </div>
                        <button class="selectBtn" id="selectBtn">SELECT</button>
                        <div class="clearfix"></div>
                    </div>
                    <div class="list">
                        <ul class="chooseList">
                            <!-- <li>
                      <div class="songCover">
                        <img src="./img/collection/album1.jpg" alt="">
                        <div class="listPlay nowlistening"><img src="./img/library/coverPlay-s.png"></div>
                      </div>
                      <div class="listSongInfo">
                        <div class="name">
                          <h4>Lucid Dreamer</h4>
                          <p> Spazz Cardigan</p>
                        </div>
                      </div>
                      <div class="totalTime">3:11</div>
                      <div class="heart becomeRed"><img src="./img/collection/redheart.png"></div>
                      <div class="clearfix"></div>
                    </li>
                    <li>
                      <div class="songCover">
                        <img src="./img/collection/album2.jpg" alt="">
                        <div class="listPlay"><img src="./img/library/coverPlay-s.png"></div>
                      </div>
                      <div class="listSongInfo">
                        <div class="name">
                          <h4>Spring In My Step</h4>
                          <p>Silent Partner</p>
                        </div>
                      </div>
                      <div class="totalTime">1:59</div>
                      <div class="heart becomeRed"><img src="./img/collection/redheart.png" alt=""></div>
                      <div class="clearfix"></div>
                    </li>
                    <li>
                      <div class="songCover">
                        <img src="./img/collection/album3.jpg" alt="">
                        <div class="listPlay"><img src="./img/library/coverPlay-s.png"></div>
                      </div>
                      <div class="listSongInfo">
                        <div class="name">
                          <h4>On My Way Home</h4>
                          <p>The 126ers</p>
                        </div>
                      </div>
                      <div class="totalTime">1:56</div>
                      <div class="heart becomeRed"><img src="./img/collection/redheart.png" alt=""></div>
                      <div class="clearfix"></div>
                    </li>
                    <li>
                      <div class="songCover">
                        <img src="./img/collection/album4.jpg" alt="">
                        <div class="listPlay"><img src="./img/library/coverPlay-s.png"></div>
                      </div>
                      <div class="listSongInfo">
                        <div class="name">
                          <h4>Lucid Dreamer</h4>
                          <p> Spazz Cardigan</p>
                        </div>
                      </div>
                      <div class="totalTime">4:30</div>
                      <div class="heart becomeRed"><img src="./img/collection/redheart.png" alt=""></div>
                      <div class="clearfix"></div>
                    </li>
                    <li>
                      <div class="songCover">
                        <img src="./img/collection/album5.jpg" alt="">
                        <div class="listPlay"><img src="./img/library/coverPlay-s.png"></div>
                      </div>
                      <div class="listSongInfo">
                        <div class="name">
                          <h4>Lucid Dreamer</h4>
                          <p> Spazz Cardigan</p>
                        </div>
                      </div>
                      <div class="totalTime">4:30</div>
                      <div class="heart becomeRed"><img src="./img/collection/redheart.png" alt=""></div>
                      <div class="clearfix"></div>
                    </li>
                    <li>
                      <div class="songCover">
                        <img src="./img/collection/album6.jpg" alt="">
                        <div class="listPlay"><img src="./img/library/coverPlay-s.png"></div>
                      </div>
                      <div class="listSongInfo">
                        <div class="name">
                          <h4>Lucid Dreamer</h4>
                          <p> Spazz Cardigan</p>
                        </div>
                      </div>
                      <div class="totalTime">4:30</div>
                      <div class="heart becomeRed"><img src="./img/collection/redheart.png" alt=""></div>
                      <div class="clearfix"></div>
                    </li>
                    <li>
                      <div class="songCover">
                        <img src="./img/collection/album7.jpg" alt="">
                        <div class="listPlay"><img src="./img/library/coverPlay-s.png"></div>
                      </div>
                      <div class="listSongInfo">
                        <div class="name">
                          <h4>Lucid Dreamer</h4>
                          <p> Spazz Cardigan</p>
                        </div>
                      </div>
                      <div class="totalTime">4:30</div>
                      <div class="heart becomeRed"><img src="./img/collection/redheart.png" alt=""></div>
                      <div class="clearfix"></div>
                    </li> -->
                        </ul>
                    </div>
                </div>
                <div class="close" id="closePlayer"><i class="fas fa-times"></i></div>
                <div class="clearfix"></div>

                <!-- 撥放器燈箱 -->
                <div class="lightCover">
                    <div class="lightbox_s" id="myAllList">
                        <div class="closeLight"><i class="fas fa-times"></i></div>
                        <h4>My List</h4>
                        <div class="lightSelectMenu">
                            <ul>
                                <!-- <li class="chooseList">Liked songs</li>
                      <li>Peaceful songs</li>
                      <li>party</li> -->
                            </ul>
                        </div>
                        <input type="hidden" name="plistName" id="plistName">
                        <button id="mylistOK">ok</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- player end -->



        <div id="lightCover">
            <div class="lightbox_s" id="myAllList">
                <div class="close closeLight"><i class="fas fa-times"></i></div>
                <h3>My List</h3>
                <div class="lightSelectMenu">
                    <ul>
                        <li>Liked songs</li>
                        <li>Peaceful songs</li>
                        <li>party</li>
                    </ul>
                </div>
                <button class="">ok</button>
            </div>
        </div>


    </div>




    <script>
        let vm = new Vue({
            el: "#home_app",
            data: {
                //nav_bar
                mobile_list: false,
                search_bar: false,
                mem_list: false,
                mem_login: false,

                // home
                rank: {
                    song_name: [],
                    song_author: [],
                    favorite: [],
                    donate: [],
                    song_intro: [],
                    song_img: [],
                    song_addr: [],
                }

            },
            mounted() {
                // nav_bar start
                document.querySelector('.mem_list ul').setAttribute('style', `height: ${window.innerHeight}px;`);
                document.querySelector('.mobile_list ul').setAttribute('style', `height: ${window.innerHeight}px;`);
                document.querySelectorAll('.paint_border')[0].setAttribute('style', `height: ${window.innerHeight}px;`);
                document.querySelectorAll('.paint_border')[1].setAttribute('style', `height: ${window.innerHeight}px;`);

                document.addEventListener('click', () => {
                    this.mem_list = false;
                    this.search_bar = false;
                    this.mobile_list = false;

                    document
                        .querySelector(".search_bar")
                        .setAttribute("style", "height: 0px; filter: opacity(0);");
                    document
                        .querySelector(".mem_list")
                        .setAttribute("style", "transform: translateX(270px); filter: opacity(0);");
                    document
                        .querySelector(".mobile_list")
                        .setAttribute("style", "transform: translateX(-270px); filter: opacity(0);");
                });
                // nav_bar end




            },
            methods: {
                // nav_bar
                hamburger_click(e) {
                    // e.stopPropagation();
                    document
                        .querySelector(".hamburger").classList.toggle("is-active");
                },
                search_bt_click(e) {
                    e.stopPropagation();
                    if (this.search_bar == false) {
                        this.search_bar = true;
                        this.mem_list = false;
                        this.mobile_list = false;
                        document
                            .querySelector(".search_bar")
                            .setAttribute("style", "height: 240px; filter: opacity(1);");
                        document.querySelector("input.search").focus();
                        document
                            .querySelector(".mem_list")
                            .setAttribute("style", "transform: translateX(270px); filter: opacity(0);");
                        document
                            .querySelector(".mobile_list")
                            .setAttribute("style", "transform: translateX(-270px); filter: opacity(0);");
                    } else {
                        this.search_bar = false;
                        document
                            .querySelector(".search_bar")
                            .setAttribute("style", "height: 0px; filter: opacity(0);");
                        document.querySelector("input.search").blur();
                        document
                            .querySelector(".mem_list")
                            .setAttribute("style", "transform: translateX(270px); filter: opacity(0);");
                        document
                            .querySelector(".mobile_list")
                            .setAttribute("style", "transform: translateX(-270px); filter: opacity(0);");
                    }
                },

                stopPropagation(e) {
                    e.stopPropagation();
                },

                mem_bt_click(e) {
                    e.stopPropagation();
                    if (this.mem_list == false) {
                        this.mem_list = true;
                        this.search_bar = false;
                        this.mobile_list = false;
                        document
                            .querySelector(".mem_list")
                            .setAttribute("style", "transform: translateX(0); filter: opacity(1);");
                        document
                            .querySelector(".search_bar")
                            .setAttribute("style", "height: 0px; filter: opacity(0);");
                        document
                            .querySelector(".mobile_list")
                            .setAttribute("style", "transform: translateX(-270px); filter: opacity(0);");
                    } else {
                        this.mem_list = false;
                        document
                            .querySelector(".mem_list")
                            .setAttribute("style", "transform: translateX(270px); filter: opacity(0);");
                        document
                            .querySelector(".search_bar")
                            .setAttribute("style", "height: 0px; filter: opacity(0);");
                        document
                            .querySelector(".mobile_list")
                            .setAttribute("style", "transform: translateX(-270px); filter: opacity(0);");
                    }
                },

                hamburger_click(e) {
                    e.stopPropagation();
                    if (this.mobile_list == false) {
                        this.mobile_list = true;
                        this.mem_list = false;
                        this.search_bar = false;
                        document
                            .querySelector(".mobile_list")
                            .setAttribute("style", "transform: translateX(0); filter: opacity(1);");
                        document
                            .querySelector(".mem_list")
                            .setAttribute("style", "transform: translateX(270px); filter: opacity(0);");
                        document
                            .querySelector(".search_bar")
                            .setAttribute("style", "height: 0px; filter: opacity(0);");
                    } else {
                        this.mobile_list = false;
                        document
                            .querySelector(".mobile_list")
                            .setAttribute("style", "transform: translateX(-270px); filter: opacity(0);");
                        document
                            .querySelector(".mem_list")
                            .setAttribute("style", "transform: translateX(270px); filter: opacity(0);");
                        document
                            .querySelector(".search_bar")
                            .setAttribute("style", "height: 0px; filter: opacity(0);");
                    }
                },

                logout() {
                    let xhr = new XMLHttpRequest();
                    xhr.onload = () => {
                        this.mem_login = false;
                        document
                            .querySelector(".mem_list")
                            .setAttribute("style", "transform: translateX(270px); filter: opacity(0);");
                    }
                    xhr.open("get", "./php/logout.php", true);
                    xhr.send(null)
                }
            }
        });
        let get_login_info = () => {
            let xhr = new XMLHttpRequest();
            xhr.onload = () => {
                member = JSON.parse(xhr.responseText);
                if (member.mem_acct) {
                    vm.mem_login = true;
                } else {
                    vm.mem_login = false;
                }
            }
            xhr.open("get", "./php/getLoginInfo.php", true);
            xhr.send(null);
        }

        let = get_rank_info = () => {
            let xhr = new XMLHttpRequest();
            xhr.onload = () => {
                let rank = JSON.parse(xhr.responseText);
                for (let i = 0; i < 10; i++) {
                    vm.rank.song_name.push(rank[i].song_name);
                    vm.rank.song_author.push(rank[i].mem_name);
                    vm.rank.favorite.push(rank[i].fav_total);
                    vm.rank.donate.push(rank[i].donate_acount);
                    vm.rank.song_intro.push(rank[i].song_idn);
                    vm.rank.song_img.push(rank[i].song_pic);
                    vm.rank.song_addr.push(rank[i].song_addr);
                }

                console.log(rank)
            }
            xhr.open("get", "./php/getRankInfo.php", true);
            xhr.send(null);
        }

        window.addEventListener('load', () => {
            get_login_info();
            get_rank_info();
        });
    </script>
</body>

</html>