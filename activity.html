<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>SOUNDWAVE | activity</title>
    <link rel="stylesheet" href="./css/main.css">
    <!-- <link rel="stylesheet" href="./css/activity.css"> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.10/vue.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"></script>
    <link rel="Shortcut Icon" type="image/x-icon" href="./img/collection/smalllogo.ico" />

</head>

<body>

    <div>
        <div id="nav_app">
            <!-- nav_bar start -->
            <div class="nav_bar flexbox">
                <div class="hamburger" @click="hamburger_click">
                    <div class="hamburger-box">
                        <div class="hamburger-inner"></div>
                    </div>
                </div>
                <div class="mobile_list" @click="stopPropagation">
                    <div class="paint_border"></div>
                    <ul>
                        <li class="REMIX flexbox">
                            <a href="./remix.html">
                            </a>
                        </li>
                        <li class="COLLECTION flexbox">
                            <a href="./collection.html">
                            </a>
                        </li>
                        <li class="ACTIVITY flexbox">
                            <a href="./activity.html">
                            </a>
                        </li>
                        <li class="LIBRARY flexbox">
                            <a href="./library.html">
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="logo_container">
                    <a href="./home.html">
                        <div class="logo"></div>
                    </a>
                    <div class="finger"></div>
                </div>
                <ul class="main_list flexbox">
                    <li class="REMIX flexbox">
                        <a href="./remix.html">
                        </a>
                    </li>
                    <li class="COLLECTION flexbox">
                        <a href="./collection.html">
                        </a>
                    </li>
                    <li class="ACTIVITY flexbox">
                        <a href="./activity.html">
                        </a>
                    </li>
                    <li class="LIBRARY flexbox">
                        <a href="./library.html">
                        </a>
                    </li>
                </ul>
                <div class="search_bt" @click="search_bt_click">
                    <a href="#"></a>
                </div>
                <div class="search_bar" @click="stopPropagation">
                    <input class="search" type="text" />
                    <div class="tag_container">
                    </div>
                </div>
    
                <div class="mem_bt" @click="mem_bt_click" v-if="mem_login == true">
                    <a href="#"></a>
                </div>
                <div class="login_bt" v-if="mem_login == false">
                    <a href="./login.html"></a>
                </div>
                <div class="mem_list" @click="stopPropagation">
                    <div class="paint_border"></div>
                    <ul>
                        <li>
                            <a href="./profile.html">
                                <h4>Profile</h4>
                            </a>
                        </li>
                        <li>
                            <a href="./songsadded.html">
                                <h4>
                                    Song Upload
                                    <br />&amp; Remove
                                </h4>
                            </a>
                        </li>
                        <li>
                            <a href="./store.html">
                                <h4>
                                    Store Value
                                    <br />&amp;Store Record
                                </h4>
                            </a>
                        </li>
                        <li>
                            <a href="./donate.html">
                                <h4>Donate Record</h4>
                            </a>
                        </li>
                        <li @click="logout">
                            <a href="#">
                                <h4>Log Out</h4>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- nav_bar end -->
        </div>
        <div id="player">
            <audio src="" id="audioPlayer"></audio>
            <div class="player_s">
                <div class="info">
                    <div class="cover"><img src="./img/collection/album1.jpg"></div>
                    <div class="songInfo">
                        <span class="name">Lucid Dreamer</span>
                        <span class="creator">Spazz Cardigan</span>
                    </div>
                    <div class="heart becomeRed"><img src="./img/collection/redheart.png" alt=""></div>
                    <div class="clearfix"></div>
                </div>

                <div class="controlPanel">
                    <div class="progressbar">
                        <div class="progress"></div>
                    </div>
                    <div class="time">
                        <span class="start">00:00</span>
                        <span class="end">04:30</span>
                        <div class="clearfix"></div>
                    </div>
                    <div class="btns">
                        <div class="controls">
                            <button class="prev"><i class="fas fa-step-backward"></i></button>
                            <button class="play"><i class="fas fa-play"></i></button>
                            <button class="next"><i class="fas fa-step-forward"></i></button>
                            <button class="stop"><i class="fas fa-stop"></i></button>
                            <button class="rand"><i class="fas fa-random"></i></button>
                            <button class="loop"><i class="fas fa-undo-alt"></i></button>
                            <div class="clearfix"></div>
                        </div>
                        <div class="vol">
                            <div class="volicon"><i class="fas fa-volume-down"></i></div>
                            <div class="volLine">
                                <div class="volControl"></div>
                            </div>
                            <div class="clearfix"></div>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                </div>

                <div class="expand" id="expand"><i class="fas fa-expand"></i></div>
                <div class="clearfix"></div>
            </div>

            <!-- 詳細版 -->
            <div class="player_b">
                <div class="left">
                    <div class="info">
                        <div class="songCover">
                            <img src="./img/collection/album1.jpg">
                            <div class="coverRec"><img src="./img/library/player_record.png" alt=""></div>
                        </div>
                    </div>
                    <div class="songInfo">
                        <div class="name">Lucid Dreamer</div>
                        <div class="creator">Spazz Cardigan</div>
                        <div class="heart becomeRed"><img src="./img/collection/redheart.png" alt=""></div>
                        <div class="clearfix"></div>
                    </div>
                    <div class="controlPanel">
                        <div class="progressbar">
                            <div class="progress"></div>
                        </div>
                        <div class="time">
                            <span class="start">00:00</span>
                            <span class="end">00:00</span>
                            <div class="clearfix"></div>
                        </div>
                        <div class="btns">
                            <div class="controls">
                                <button class="rand"><i class="fas fa-random"></i></button>
                                <button class="prev"><i class="fas fa-step-backward"></i></button>
                                <button class="play"><i class="fas fa-play"></i></button>
                                <button class="next"><i class="fas fa-step-forward"></i></button>
                                <button class="stop"><i class="fas fa-stop"></i></button>
                                <button class="loop"><i class="fas fa-undo-alt"></i></button>
                                <div class="clearfix"></div>
                            </div>
                            <div class="vol">
                                <div class="volicon"><i class="fas fa-volume-down"></i></div>
                                <div class="volLine">
                                    <div class="volControl"></div>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                    <div class="pushBtn"></div>
                </div>

                <div class="right">
                    <div class="pushBtn"></div>
                    <div class="listTitle">
                        <div class="listCover">
                            <img src="./img/library/list_pic1.jpg"></div>
                        <div class="listName">
                            <h2>peaceful list</h2>
                            <span>8 songs</span>
                        </div>
                        <button class="selectBtn" id="selectBtn">SELECT</button>
                        <div class="clearfix"></div>
                    </div>
                    <div class="list">
                        <ul>
                            <li>
                                <div class="songCover">
                                    <img src="./img/collection/album1.jpg" alt="">
                                    <div class="listPlay nowlistening"><img src="./img/library/coverPlay-s.png"></div>
                                </div>
                                <div class="listSongInfo">
                                    <div class="name">
                                        <h4>Lucid Dreamer</h4>
                                        <p> Spazz Cardigan</p>
                                    </div>
                                </div>
                                <div class="totalTime">3:11</div>
                                <div class="heart becomeRed"><img src="./img/collection/redheart.png"></div>
                                <div class="clearfix"></div>
                            </li>
                            <li>
                                <div class="songCover">
                                    <img src="./img/collection/album2.jpg" alt="">
                                    <div class="listPlay"><img src="./img/library/coverPlay-s.png"></div>
                                </div>
                                <div class="listSongInfo">
                                    <div class="name">
                                        <h4>Spring In My Step</h4>
                                        <p>Silent Partner</p>
                                    </div>
                                </div>
                                <div class="totalTime">1:59</div>
                                <div class="heart becomeRed"><img src="./img/collection/redheart.png" alt=""></div>
                                <div class="clearfix"></div>
                            </li>
                            <li>
                                <div class="songCover">
                                    <img src="./img/collection/album3.jpg" alt="">
                                    <div class="listPlay"><img src="./img/library/coverPlay-s.png"></div>
                                </div>
                                <div class="listSongInfo">
                                    <div class="name">
                                        <h4>On My Way Home</h4>
                                        <p>The 126ers</p>
                                    </div>
                                </div>
                                <div class="totalTime">1:56</div>
                                <div class="heart becomeRed"><img src="./img/collection/redheart.png" alt=""></div>
                                <div class="clearfix"></div>
                            </li>
                            <li>
                                <div class="songCover">
                                    <img src="./img/collection/album4.jpg" alt="">
                                    <div class="listPlay"><img src="./img/library/coverPlay-s.png"></div>
                                </div>
                                <div class="listSongInfo">
                                    <div class="name">
                                        <h4>Lucid Dreamer</h4>
                                        <p> Spazz Cardigan</p>
                                    </div>
                                </div>
                                <div class="totalTime">4:30</div>
                                <div class="heart becomeRed"><img src="./img/collection/redheart.png" alt=""></div>
                                <div class="clearfix"></div>
                            </li>
                            <li>
                                <div class="songCover">
                                    <img src="./img/collection/album5.jpg" alt="">
                                    <div class="listPlay"><img src="./img/library/coverPlay-s.png"></div>
                                </div>
                                <div class="listSongInfo">
                                    <div class="name">
                                        <h4>Lucid Dreamer</h4>
                                        <p> Spazz Cardigan</p>
                                    </div>
                                </div>
                                <div class="totalTime">4:30</div>
                                <div class="heart becomeRed"><img src="./img/collection/redheart.png" alt=""></div>
                                <div class="clearfix"></div>
                            </li>
                            <li>
                                <div class="songCover">
                                    <img src="./img/collection/album6.jpg" alt="">
                                    <div class="listPlay"><img src="./img/library/coverPlay-s.png"></div>
                                </div>
                                <div class="listSongInfo">
                                    <div class="name">
                                        <h4>Lucid Dreamer</h4>
                                        <p> Spazz Cardigan</p>
                                    </div>
                                </div>
                                <div class="totalTime">4:30</div>
                                <div class="heart becomeRed"><img src="./img/collection/redheart.png" alt=""></div>
                                <div class="clearfix"></div>
                            </li>
                            <li>
                                <div class="songCover">
                                    <img src="./img/collection/album7.jpg" alt="">
                                    <div class="listPlay"><img src="./img/library/coverPlay-s.png"></div>
                                </div>
                                <div class="listSongInfo">
                                    <div class="name">
                                        <h4>Lucid Dreamer</h4>
                                        <p> Spazz Cardigan</p>
                                    </div>
                                </div>
                                <div class="totalTime">4:30</div>
                                <div class="heart becomeRed"><img src="./img/collection/redheart.png" alt=""></div>
                                <div class="clearfix"></div>
                            </li>

                        </ul>
                    </div>
                </div>
                <div class="close" id="closePlayer"><i class="fas fa-times"></i></div>
                <div class="clearfix"></div>

                <!-- 撥放器燈箱 -->
                <div class="lightCover">
                    <div class="lightbox_s" id="myAllList">
                        <div class="closeLight"><i class="fas fa-times"></i></div>
                        <h3>My List</h3>
                        <div class="lightSelectMenu">
                            <ul>
                                <li>Liked songs</li>
                                <li>Peaceful songs</li>
                                <li>party</li>
                            </ul>
                        </div>
                        <button class="">ok</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="./js/player.js"></script>
    <script src="./js/nav_bar.js"></script>

    <header>
        <div id="act_title"><img src="./img/activity/title.png" alt=""></div>
    </header>
    <section id="activity">
        <div id="actHead" class="wrapper">

            <div id="act_radioBg">
                <img src="./img/activity/radio.png" alt="">


                <h2 v-if=" content=='actNow'" v-for='item in actInformation.slice(0,1)'>{{item.activity_name}}</h2>
                <h2 v-if=" content=='actOld'">Previous activities</h2>

                <div id="act_HeadBtn">
                    <div @click="content='actNow' ">
                        <span>Now</span>
                        <img v-if=" content=='actNow'" :src=" tabImgON" alt="">
                        <img v-else :src=" tabImgOFF" alt="">
                    </div>
                    <div @click="content='actOld' ">
                        <span> Old</span>
                        <img v-if=" content=='actNow'" :src=" tabImgOFF" alt="">
                        <img v-else :src=" tabImgON" alt="">
                    </div>


                </div>

                <div id="act_sectionAnchor" v-if=" content=='actNow'">
                    <a href="#act_Now-Introduction" class="act_Anchor">
                        <img :src="sectionAnchor" alt="">
                        <span>Introduction</span>
                    </a>
                    <a href="#act_Now-Sign-up" class="act_Anchor">
                        <img :src="sectionAnchor" alt="">
                        <span>Sign up</span>
                    </a>
                    <a href="#act_Now-Vote" class="act_Anchor">
                        <img :src="sectionAnchor" alt="">
                        <span>Vote</span>
                    </a>

                </div>

                <div id="act_oldyear_Anchor" v-if=" content=='actOld'">
                    <a href="#act_old-year2018" class="act_Anchor">
                        <img src="./img/activity/yearbutton.png"><span v-for="(information,index) in actInformation.slice(1,2)">{{information.activity_no}}</span>
                    </a>

                    <a href="#act_old-year2017" class="act_Anchor">
                        <img src="./img/activity/yearbutton.png"> <span v-for="(information,index) in actInformation.slice(2,3)">{{information.activity_no}}</span>
                    </a>
                </div>

                <div id="act_TopAnchor" @click="GoTopAnima">

                    <a href="body" class="act_Anchor ">
                        <img src="./img/activity/top-bush.png" alt="" class="act_Bush">

                        <div class="act_ShowTopBush" v-if="GoTopBush==true">
                            <img src="./img/activity/top-bush02.png" alt="">
                        </div>

                        TOP
                    </a>

                </div>

                <div id="act_carouselSelect">
                    <div @click.prevent="changeBanner(0),isActive =0" :class=" {btncolor:isActive==0}">
                    </div>
                    <div @click.prevent="changeBanner(1),isActive =1" :class=" {btncolor:isActive==1}">
                    </div>
                    <div @click.prevent="changeBanner(2),isActive =2" :class=" {btncolor:isActive==2}">
                    </div>
                </div>

                <div id="act_carousel">
                    <a :href="imageHref">
                        <img :src=" imageActive">
                    </a>

                </div>



                <div id="act_countdown" v-if=" content=='actNow'">
                    <p>
                        Activity end time countdown...
                    </p>
                    <div v-if="distance>0">
                        <div>
                            <p :days="days">{{days}}</p>
                            <span>day</span>
                        </div>
                        <div>
                            <p :hours="hours">{{hours}}</p>
                            <span>hour</span>
                        </div>
                        <div>
                            <p :minutes="minutes">{{minutes}}</p>
                            <span>min</span>
                        </div>
                        <div>
                            <p :seconds="seconds">{{seconds}}</p>
                            <span>sec</span>
                        </div>
                    </div>

                </div>
            </div>



        </div>
        <component :is="content" :vote-All="voteAll" :act-Information="actInformation" :mem-Heart="memHeart" :mem-Votes="memVotes"
            :member="member">
        </component>


    </section>
    <script type="text/x-template" id="act-old">
        <div>
         <article class="act_old_years " id="act_old-year2018"  
         v-for="(information,index) in actInformation.slice(1,2)">
         <input type="hidden" name="contestNowYear" v-model="contestOldYear1=information.activity_no"> 
             <div class="act_oldink"><img src="./img/activity/Splash-ink05.png" alt=""></div>
             <div>
                 <div class="act_year">{{information.activity_no}}</div>
                 <h2>Information</h2>
                 <h3>{{information.activity_name}}</h3>
     
                 <p>
     
                    {{information.activity_con}}
                   
                 </p>
                 <div class="act_oldVotes">
                     <h3>Votes</h3>
                     <span v-if="oldVoteAllOne">{{oldVoteAllOne}}</span>
                 </div>
             </div>
     
     
             <div class="act_oldposterbox">
                 <div class="act_oldposter">
                     <img :src="information.activity_img" alt="">
                 </div>
     
                 <div class="act_oldSplash-ink">
                     <img src="./img/activity/Splash-ink02.png" alt="">
                 </div>
     
             </div>
     
     
         </article>
         <section class="act_oldsongbox wrapper">
             <div class="act_oldTop">
                 <h3>TOP 3</h3>

                 <div v-for="(oldSong,index) in oldVoteSong2018.slice(0, 3)">
                    <p >Votes <span>{{oldSong.vote_per}}</span></p>
                    <div>
                       <img :src="oldSong.entries_img" alt="">
                       <div class="act_old-play" @click="showChangePlay2018($event,oldSong)" ref="playSongsOld2018"> </div>
                        
                     </div>
                  
                     <div class="act_songBox"> 
                      <div class="act_old-hear1" @click="showChangeHeart($event,oldSong.entries_name)"ref="oneOldHearts"> </div>
                      <input type="hidden" name="favorStatus" v-model="heartSaute" ref="oneOldHeartsVal">
                      <input type="hidden" name="favorSongName" v-model="getHeartSong" > 
                      <a :href="'songinfo.html?song_no='+oneSongNo"@click="changeHref(oldSong.entries_name)"><h4>'{{oldSong.entries_name}}'</h4></a>  
                       
                           <p>  {{oldSong.mem_name}} </p>
                    
                     </div>
                    
                  </div>
              
                
             </div>
             <div class="act_oldAll">
                 <h3> All contest music </h3>
                 <div v-for="oldSong in oldVoteSong2018.slice(3, oldVoteSong2018.length)">
                    <p >Votes <span>{{oldSong.vote_per}}</span></p>
                    <div>
                       <img :src="oldSong.entries_img" alt="">
                       <div class="act_old-play"@click="showChangePlay2018($event,oldSong)" ref="playSongsOld2018"> </div>
                        
                     </div>
                  
                     <div class="act_songBox"> 
                      <div class="act_old-hear1" @click="showChangeHeart($event,oldSong.entries_name)"ref="oneOldHearts"> </div>
                      <input type="hidden" name="favorStatus" v-model="heartSaute" ref="oneOldHeartsVal">
                      <input type="hidden" name="favorSongName" v-model="getHeartSong" > 
                      <a :href="'songinfo.html?song_no='+oneSongNo"@click="changeHref(oldSong.entries_name)"><h4>'{{oldSong.entries_name}}'</h4></a>  
                       
                           <p>  {{oldSong.mem_name}} </p>
                    
                     </div>
                    
                  </div>
                      
                
            </div> 
         </section>
         <article class="act_old_years " id="act_old-year2017" v-for="(information,index) in actInformation.slice(2,3)">
             <div class="act_oldink"><img src="./img/activity/Splash-ink06.png" alt=""></div>
             <input type="hidden" name="contestNowYear" v-model="contestOldYear2=information.activity_no"> 
             <div>
                 <div class="act_year">{{information.activity_no}}</div>
                 <h2>Information</h2>
                 <h3>{{information.activity_name}}</h3>
     
                 <p>
                    {{information.activity_con}}
                 </p>
                 <div class="act_oldVotes">
                     <h3>Votes</h3>
                     <span v-if="oldVoteAllTwo">{{oldVoteAllTwo}}</span>
                 </div>
             </div>
     
     
             <div class="act_oldposterbox">
                 <!-- <div class="act_oldposter-linetop">
                     <img src="./img/activity/0.textline-top.svg" alt="">
                 </div> -->
                 <div class="act_oldposter">
                     <img :src="information.activity_img" alt="">
                 </div>
     
                 <div class="act_oldSplash-ink">
                     <img src="./img/activity/Splash-ink02.png" alt="">
                 </div>
                 <!-- <div class="act_oldposter-linebotom">
                     <img src="./img/activity/0.textline-bottom.svg ">
                 </div> -->
     
             </div>
     
     
         </article>
         <section class="act_oldsongbox wrapper">
            <div class="act_oldTop">
                <h3>TOP 3</h3>
                <div v-for="(oldSong,index) in oldVoteSong2017.slice(0, 3)">
                    <p >Votes <span>{{oldSong.vote_per}}</span></p>
                    <div>
                       <img :src="oldSong.entries_img" alt="">
                       <div class="act_old-play"@click="showChangePlay2017($event,oldSong)" ref="playSongsOld2017"> </div>
                        
                     </div>
                  
                     <div class="act_songBox"> 
                      <div class="act_old-hear1" @click="showChangeHeart($event,oldSong.entries_name)" ref="twoOldHearts"> </div>
                      <input type="hidden" name="favorStatus" v-model="heartSaute" ref="twoOldHeartsVal">
                      <input type="hidden" name="favorSongName" v-model="getHeartSong" > 
                      <a :href="'songinfo.html?song_no='+oneSongNo"@click="changeHref(oldSong.entries_name)"><h4>'{{oldSong.entries_name}}'</h4></a>  
                       
                           <p>  {{oldSong.mem_name}} </p>
                    
                     </div>
                    
                  </div>
               
               
            </div>
            <div class="act_oldAll">
                <h3> All contest music </h3>

                <div v-for="oldSong in oldVoteSong2017.slice(3, oldVoteSong2017.length)">
                    <p >Votes <span>{{oldSong.vote_per}}</span></p>
                    <div>
                       <img :src="oldSong.entries_img" alt="">
                       <div class="act_old-play" @click="showChangePlay2017($event,oldSong)" ref="playSongsOld2017"> </div>
                        
                     </div>
                  
                     <div class="act_songBox"> 
                      <div class="act_old-hear1" @click="showChangeHeart($event,oldSong.entries_name)" ref="twoOldHearts"> </div>
                      <input type="hidden" name="favorStatus" v-model="heartSaute" ref="twoOldHeartsVal">
                      <input type="hidden" name="favorSongName" v-model="getHeartSong" > 
                      <a :href="'songinfo.html?song_no='+oneSongNo"@click="changeHref(oldSong.entries_name)"><h4>'{{oldSong.entries_name}}'</h4></a>  
                       
                           <p>  {{oldSong.mem_name}} </p>
                    
                     </div>
                    
                  </div>
               
           </div> 
         </section>
     
 
        </div>
         
     </script>

    <script type="text/x-template" id="act-now">
        <div >
             <article class="act_now-year" id="act_Now-Introduction" 
             v-for="(information,index) in actInformation.slice(0, 1)">
 
                 <div >

                     <h2>Introduction</h2>
                     <div>{{information.activity_name}}</div>
                     <h3>Information</h3>
                     <p style="word-break: keep-all;">
                        {{information.activity_con}}
                      
                     </p>
                     <h3>Time</h3>
                     <p>Start:{{information.activity_str}}<br>
                        End:{{information.activity_fin}} </p>
                     
         
                 </div>
         
         
                 <div class="act_nowposterbox">
                  
                     <div class="act_nowposter">
                         <img :src="information.activity_img" alt="">
                     </div>
         
                     <div class="act_nowSplash-ink">
                         <img src="./img/activity/Splash-ink02.png" alt="">
                     </div>
                     
         
                 </div>
         
         
         
             </article>
         
             <section  id="act_Now-Sign-up">
               <h2>Sign up</h2>
               
               
                
                <div>
                    <div class="act_now-marry">
                    <img src="./img/activity/mary.png" alt=""> 
                     </div>
                    <div class="act_now-marry-ink">
                    <img src="./img/activity/Splash-ink01.png" alt="">
                     </div>    
                </div>
                
            <article v-if="formContent==0">
                   <div>
                      <h3>Qualifications</h3>
                      <p>
                          1.Must be a website member,please login or register<br>
                          2.Cannot register with songs that have already participated in previous events
                        
                     </p>
                       <p class="act_from-button-box">
                        <button type="button" @click="formLogin" >Go</button>
                      </p>
    
                   </div>
               </article>
        <form method='post'  id="act_form" > 
            <!-- <input type="hidden" name="post" id="postAction"> -->
             <article  v-if="formContent==1">
                <div >
                   <h3>Choose your contest song!</h3>
                 
              
              
                      <div>  
                        Upload from my local song:
                         <label  class="act_SignUPButton"for="act_SignUp-UpLoadSong" >Upload</label>
                        
                         <input type="file" id="act_SignUp-UpLoadSong" style="display:none"
                         @change="changeSignUpload"  accept="audio/mpeg" name="entries_song"  > 
                         </div>

                     <div  class="act_SignSongURL-box" v-if="SignSongURL">{{SignSongURL}}</div>
                     
                     <div>
                        Select from my music list:
                          <label class="act_SignUPButton" for="act_SignUp-selectSong" @click="selectSignUpload" v-if='memberContestSong'>  Select</label>
                          <br>   
                          <select id="act_SignUp-selectSong"  v-model="selectSong" @click="selectSignUpload" v-if='memberContestSong'>
                            <option value="" disabled selected>select you song</option>
                           <option  v-for="(list,index) in memberContestSong" :value="memberContestSong[index]">{{list.song_name}}</option>
                          </select>
                          <input type="hidden" name="Select_song" v-model="selectSong.song_addr">
                       </div>

                
                   <p class="act_from-button-box">
                     <button type="button"  @click="BackFormPage(0)">Back</button>
                     <button type="button"  @click="formNextsong" >Next </button>
                   </p>
                </div>
                
            </article>

             <article  v-if="formContent==2">
                <div >
                   <h3>Fill in your song information!</h3>
                   
                        <div>
                            <h4>Song name:</h4>
                            <input type="text" class="act_Sign-up-song-name"maxlength="13"
                                    v-model="SongName"placeholder="Your song name!"  v-if="SignSongURL" required 
                                    name="entries_name">
                            
                            <div  class="act_Sign-up-song-name" v-if="selectSong">{{selectSong.song_name}}</div>
                            <input type="hidden"  v-model="selectSong.song_name" name="Select_name">
                                    
                        </div>

                        <div>
                            <h4>Song information:</h4>
                            <textarea class="act_Sign-up-song-information" 
                                      maxlength="100"
                                      v-model="SongInformation"
                                      placeholder="Introduce your song!"
                                      v-if="SignSongURL" required
                                      name="introduction"></textarea>
                            
                            <div class="act_Sign-up-song-information" 
                                     v-if="selectSong">{{selectSong.song_idn}}</div>
                            <input type="hidden" v-model="selectSong.song_idn" name="Select_information">
                                   

                        </div>

                        <div>
                            <h4>Song img:</h4>
                          
                                <p v-if="SignSongURL">Upload The album cover:
                                   <label class="act_SignUPButton2"  for="act_SignUp-Song-img"  v-if="SignSongURL">Upload</label>
                                </p>
                               <input type="file" id="act_SignUp-Song-img" style="display:none" @change="changeSignUpImg" 
                                      name="Song_img" accept="image/jpeg" required>
                               <div class="act_showSignUpImg" v-if="SignUpImg&&SignSongURL"> <img :src="SignUpImg" alt=""></div>
                               
                               <div class="act_showSignUpImg" v-if="selectSong"> <img :src="selectSong.song_pic" alt=""></div>
                               <input type="hidden" v-model="selectSong.song_pic"name="Select_img" >
                               
                        
                        </div>

                
                <p class="act_from-button-box">
                  <button type="button"  @click="BackFormPage(1)">Back</button>
                  <button type="button" @click=" NextFormPage(3)"  v-if="selectSong">Next </button>
                  <button type="button" @click=" formNextInformation"  v-if="SignSongURL">Next </button>
                  </p>
                </div>
                
            </article> 
            <article  v-if="formContent==3">
                <div >
                   <h3>Check your song information!</h3>   
                  
                      <div>
                         <h4>Member name:</h4> 
                         {{member.mem_name}}
                      </div>
                      <div>
                             <h4>Menber email:</h4>
                             {{member.mem_acct}}
                      </div>
                      <div>
                         <h4>Song img:</h4>
                         <div class="act_showSignUpImgSmall" 
                         v-if="SignUpImg&&SignSongURL"><img :src="SignUpImg" alt=""></div>
                         <div class="act_showSignUpImgSmall" 
                         v-if="selectSong"><img :src="selectSong.song_pic" alt=""></div> 
                       </div>
                       <div>
                            <h4>Song name:</h4>
                             <p  v-if="SongName">{{SongName}}</p>
                             <p  v-if="selectSong">{{selectSong.song_name}}</p>

                       </div>
                       <div>
                              <h4>Song information:</h4>
                              <p class="act_showSong-information" v-if="SongInformation" >{{SongInformation}}</p> 
                              <p class="act_showSong-information" v-if="selectSong" >{{selectSong.song_idn}}</p> 
                       </div>
                       <div> 
                           <h4>Song URL:</h4>    
                            <p  class="act_SignSongURL-box" v-if="SignSongURL">{{SignSongURL}}</p> 
                            <p  class="act_SignSongURL-box" v-if="selectSong">{{selectSong.song_addr}}</p> 
                       </div>
                       <p class="act_from-button-box">
                           <button type="button"  @click="BackFormPage(2)">Back</button>
                           <input type="button" value="Comfirm" @click="sendForm" class="signUpComfirm" >
                       </p>
                </div>
            </article>  
        </form>   
            <article v-if="formContent==4">
                <div >
                   <h3>Qualifications</h3>
                   <p>  
                       1.Must be a website member,please login or register<br>
                       2.Cannot register with songs that have already participated in previous events
                  </p>
                  <p class="act_from-button-box">
                        <button type="button" disable style="background-color:gray;border:none ">Done</button>
                  </p>
                 
                </div>
            </article> 
         </section>
            
             <section id="act_Now-Vote"> 
                <h2>Vote</h2>
                 <article class="act_Now-Vote-content">
                   <input type="hidden" name="contestNowYear" v-model="contestYear"> 
                   <img src="./img/activity/Splash-ink07.png" alt="">
                   <h3>Rules</h3>
                   <p>
                    Depending on the category, submissions are judged on the following criteria:<br>
                    <br>
                    1.Creativity<br>
                    2.Originality<br>
                    3.Lyrics (excludes songs that do not have lyrics)<br>
                    4.Melody<br>
                    5.Arrangement<br>
                    6.Overall likeability<br>
                   </p>
                   <div>
                     <h3>Votes</h3>
                     <span v-if="nowVoteAll">{{nowVoteAll}}</span>
                   </div>
                   
                 </article>
         
                 <section>
                    <div v-for="(item,index) in nowVoteSong" :key="index">   
                        <button type="button" @click.once="showChangeVote($event,item)" ref="votes">Vote</button>
                        <p >Votes <span>{{item.vote_per}}</span></p>
                        <input type="hidden" name="entries_no" v-model='voteSongNo'>
                        <div>
                              <img :src="item.entries_img" alt="">
                              <div class="act_old-play"@click="showChangePlay($event,item)" ref="playSongs"></div>

                              
                        </div>
                          <div class="act_songBox"> 
                              <div class="act_old-hear1"  @click="showChangeHeart($event,item.entries_name)" ref="hearts"></div>
                              <input type="hidden" name="favorStatus" v-model="heartSaute" ref="heartsVal">
                              <input type="hidden" name="favorSongName" v-model="getHeartSong" > 
                              <a :href="'songinfo.html?song_no='+oneSongNo" @click="changeHref(item.entries_name)"><h4>' {{item.entries_name}}'</h4></a>  
                              <input type="hidden" v-model="hrefNoName" name="hrefNoName">
                              <p> {{item.mem_name}} </p>
                          </div>
                     </div>
                 </section>

             </section>
           </div>
     </script>



    <style scoped>
        @import "./css/main.css";
    </style>



    <script>
        let songObj = {};


        Vue.component('actNow', {
            template: '#act-now',
            props: {
                voteAll: [Array],
                actInformation: [Array],
                memHeart: [Array],
                memVotes: [Array],
                member: Object,
            },
            data: function () {
                return {
                    //參賽歌曲
                    nowVoteSong: [],
                    
                    //表單步驟頁面
                    formContent: 0,

                    //報名歌曲，本地上傳資料
                    SongName: "",
                    SongInformation: "",
                    SignUpImg: "",
                    SignSongURL: "",
                    SignSong: '',
                    SignImg: "",
                    
                    //會員選擇已有歌曲，資料陣列
                    selectSong: [],

                    //會員資料
                    // member: [],
                    memberContestSong: [],

                    //被投票的歌曲編號
                    voteSongNo: '',
                    
                    //投票總數
                    nowVoteAll:'',


                    //愛心收藏
                    heartSaute: [],
                    getHeartSong: [],


                    //撥放
                    myPlaylist: [],

                    //比賽歌曲年分
                    contestYear: "",
                    // nowInformation:[],

                    //跳轉單曲
                    hrefNoName: "",
                    backSong: '',
                    oneSongNo: '',

                }

            },

            methods: {
                formLogin() {//確認會員登入後才能繼續填寫表單

                    if (vml.mem_login == false) {

                        alert("Please login.");

                    } else {
                        this.formContent = 1;
                        this.SignSongURL = "";
                        this.selectSong = "";

                        fetch('./phps/getMemContestSong.php').then(res => res.json()).then(data => this.memberContestSong = data);
                    };

                },
                formNextsong() {//確認有填寫歌曲路徑
                    let upload = this.SignSongURL;
                    let select = this.selectSong;

                    if (upload == "" && select == "") {
                        alert('Song path cannot be empty!');
                    } else {
                        this.formContent = 2;
                    }
                },
                formNextInformation() {//確認有填寫歌曲路徑
                    let Name = this.SongName;
                    let Information = this.SongInformation;
                    let Img = this.SignUpImg;

                    if (Name == "" || Information == "" || Img == "") {
                        alert('Song introduce cannot be empty!');
                    } else {
                        this.formContent = 3;
                    }
                },

                NextFormPage(Index) {//切換表單下一步
                    this.formContent = Index;
                },
                BackFormPage(Index) {//切換表單上一步
                    this.formContent = Index;
                },
                changeSignUpImg(img) {//獲取檔案路徑
                    const imgFile = img.target.files.item(0);
                    this.SignImg = imgFile;
                    const reader = new FileReader();
                    reader.addEventListener('load', this.imageLoader);
                    reader.readAsDataURL(imgFile);

                },
                imageLoader(img) {//獲取檔案路徑，顯示在頁面
                    this.SignUpImg = img.target.result;
                },

                changeSignUpload(event) {//獲取檔案
                    let song = event.target.files.item(0);
                    this.SignSong = song;
                    this.SignSongURL = this.getObjectURL(song);
                    if (this.selectSong != "") {
                        this.selectSong = "";
                    }
                },
                getObjectURL(song) {//獲取檔案路徑
                    let url = null;
                    if (window.createObjectURL != undefined) { // basic
                        url = window.createObjectURL(song);
                    } else if (window.webkitURL != undefined) { // webkit or chrome
                        url = window.webkitURL.createObjectURL(song);
                    } else if (window.URL != undefined) { // mozilla(firefox)
                        url = window.URL.createObjectURL(song);
                    }
                    return url;
                },



                selectSignUpload() {//清除上傳路徑確保本地上傳和選擇上傳二擇一
                    if (this.SignSongURL != "") {
                        this.SignSongURL = "";
                    }
                },
                sendForm() {//表單確認後，輸入資料庫
                    this.formContent = 4;
                    this.contestYear = this.actInformation[0].activity_no;
                    if (this.selectSong != "") {
                        var Select_sign = $.ajax({
                            url: './phps/act_formSelectSignUp.php',
                            data: {
                                Select_name: this.selectSong.song_name,
                                Select_song: this.selectSong.song_addr,
                                Select_information: this.selectSong.song_idn,
                                Select_img: this.selectSong.song_pic,
                                contestNowYear: this.contestYear,
                            },
                            type: 'POST',
                            datatype: 'text',
                            success: function (data) {
                                alert("Success sign up!");
                                location.reload();
                            }

                        });


                    } else {
                        let myForm = new FormData(document.getElementById("act_form"));
                        myForm.append("Song_img", this.SignImg);
                        myForm.append("entries_song", this.SignSong);
                        myForm.append("entries_name", this.SongName);
                        myForm.append("introduction", this.SongInformation);
                        myForm.append("contestNowYear", this.contestYear);
                        let xhr = new XMLHttpRequest();
                        xhr.onload = function () {
                            // console.log("-----------final");
                            // console.log(xhr.status);
                            // console.log(xhr.responseText);
                            if (xhr.status == 200) {
                                alert("Success sign up!");
                                location.reload();
                            } else {
                                alert("Sign up failed!");
                            }
                        }
                        // console.log(myForm);
                        xhr.open("post", "./phps/act_formSignUp.php", true);
                        xhr.send(myForm);
                        

                    }

                },
                changeSignForm() {//更換已報名的表單狀態
                    if (vml.mem_login == true) {
                        let getMem = this.member.mem_name;
                        // console.log(getMem);
                        for (let i = 0; i < this.nowVoteSong.length; i++) {
                            let contestMem = this.nowVoteSong[i].mem_name;
                            // console.log(contestMem);
                            if (getMem == contestMem) {
                                this.formContent = 4;
                                break;
                            } else {
                                this.formContent = 0;
                            }
                        }
                    }

                },
                showChangeHeart(e, value) {//確認會員登入狀態，變更收藏愛心顏色

                    if (vml.mem_login == false) {
                        alert("Please login.");
                    } else {
                        let heartButton = e.target;
                        this.getHeartSong = value;

                        if (heartButton.classList.contains('actShowHeart') == false) {
                            this.heartSaute = "red";
                            heartButton.classList.add('actShowHeart');

                            var addHeart = $.ajax({
                                url: './phps/act_contestSongHeart.php',
                                data: {
                                    favorStatus: this.heartSaute,
                                    favorSongName: this.getHeartSong,
                                },
                                type: 'POST',
                                dataType: 'json',

                            });
                            alert("Success to add!");
                            location.reload();

                        } else {
                            this.heartSaute = "gray";
                            heartButton.classList.remove('actShowHeart');

                            var deleteHeart = $.ajax({
                                url: './phps/act_contestSongHeart.php',
                                data: {
                                    favorStatus: this.heartSaute,
                                    favorSongName: this.getHeartSong,
                                },
                                type: 'POST',
                                dataType: 'json',

                            });
                            alert("Success to cancel!");
                            location.reload();

                        }

                    }
                },

                ChangeRedHeart() {//獲取會員已收藏歌曲，並更換顏色
                    var HL = this.memHeart.length;
                    var NL = this.nowVoteSong.length;

                    for (let j = 0; j < HL; j++) {
                        for (let i = 0; i < NL; i++) {
                            var heart = (this.nowVoteSong[i].entries_name == this.memHeart[j].song_name);
                            if (heart == true) {
                                var heartExist = this.$refs.hearts[i].classList.contains('actShowHeart');
                                if (heartExist == false) {
                                    this.$refs.hearts[i].classList.add('actShowHeart');
                                };
                                this.$refs.heartsVal[i].value = "red";
                            } else {
                                this.$refs.heartsVal[i].value = "gray";

                            }
                        };
                    };
                },

                showChangePlay(e, item) {//切換撥放按鈕
                    let playButton = e.target;

                    songObj = {};
                    songObj.song_addr = item.entries_song;
                    songObj.song_name = item.entries_name;
                    songObj.mem_name = item.mem_name;
                    songObj.song_pic = item.entries_img;

                    myPlaylist = [songObj];
                    nowPlaying = 0;
                    listLen = myPlaylist.length;
                    $('#player audio').attr('src', myPlaylist[0].song_addr);
                    // console.log(myPlaylist);

                    for (let i = 0; i < this.nowVoteSong.length; i++) {
                        let allSongName = this.nowVoteSong[i].entries_name;
                        let playStatus = this.$refs.playSongs[i].classList.contains("act_old-play-Pause");

                        if (allSongName == item.entries_name) {
                            if (playStatus == false) {
                                playButton.classList.add("act_old-play-Pause");
                                isPlaying(false);
                            } else {
                                playButton.classList.remove("act_old-play-Pause");
                                isPlaying(true);
                            }

                        } else {
                            this.$refs.playSongs[i].classList.remove("act_old-play-Pause");
                        }
                    };

                    playerAuto = false;
                    // console.log(myPlaylist[0].song_name);
                    heartStatus(myPlaylist[0].song_name);

                },

                showChangeVote(e, item) {//確認會員登入後才能繼續投票
                    if (vml.mem_login == false) {

                        alert("Please login.");
                    } else {

                        this.voteSongNo = item.entries_no;

                        if (this.voteSongNo) {
                            var vote = $.ajax({
                                url: './phps/act_VoteSong.php',
                                data: {
                                    entries_no: this.voteSongNo,
                                },
                                type: 'POST',
                                dataType: 'json'
                            });
                            alert("Success vote!");
                            let voteButton = e.target;
                            voteButton.style = "background-color:gray;border:none;";
                            voteButton.disabled = true;
                            location.reload();


                        }
                    }
                },

                ChangeGrayVotes() {//判斷歌曲是否已被會員投票，變換投票可點選狀態
                    var i = 0;
                    var l = this.nowVoteSong.length;
                    for (let j = 0; j < this.memVotes.length; j++) {
                        for (i = 0; i < l; i += 1) {
                            var vote = (this.nowVoteSong[i].entries_no == this.memVotes[j].entries_no);
                            if (vote == true) {
                                this.$refs.votes[i].disabled = true;
                                this.$refs.votes[i].style = "background-color:gray;border:none;";
                                vote = "";

                            }
                        };
                    };
                },


                changeVoteAll(){
                    let nowYear=this.contestYear;
                  
                    for(let i=0;i<this.voteAll.length;i++){
                        let year =this.voteAll[i].activity_no;
                        if(nowYear==year){
                           this.nowVoteAll=this.voteAll[i].total_vote;
                           break;
                        }else{
                            this.nowVoteAll="0";
                        }

                    }
                },
                getNewContestYear() {//動態更換新活動歌曲
                    // fetch('./phps/getContestInformation.php').then(res => res.json()).then(data => this.nowInformation = data);
                    this.contestYear = this.actInformation[0].activity_no;
                    console.log(this.contestYear);
                    if (this.contestYear != "") {
                        var year = $.ajax({
                            url: './phps/getContestSong.php',
                            data: {
                                contestNowYear: this.contestYear,
                            },
                            type: 'GET',
                            dataType: 'json',
                            async: false,
                            success: function (data, textStatus, jqXHR) {
                                return;
                            }
                        });
                    }
                    this.nowVoteSong = year.responseJSON;
                  
                },

                changeHref(no) {//獲得跳轉單頁的歌曲編號
                    this.hrefNoName = no;
                    var songNo = $.ajax({
                        url: './phps/getallSong.php',
                        data: {
                            hrefNoName: this.hrefNoName,
                        },
                        type: 'GET',
                        dataType: 'json',
                        async: false,
                        success: function (data, textStatus, jqXHR) {
                            return;
                        }
                    });
                    this.backSong = songNo.responseJSON;

                    if (this.backSong != "") {
                        this.oneSongNo = this.backSong[0].song_no;
                    }

                },


            },
            created() {
                // fetch('./phps/getContestNowSong.php').then(res => res.json()).then(data => this.nowVoteSong = data);
                this.getYear = setTimeout(this.getNewContestYear, 500);
                this.NowVote = setTimeout(this.changeVoteAll,600);
            },
            mounted() {
                this.ChangeHeart = setTimeout(this.ChangeRedHeart, 800);
                this.ChangeVotes = setTimeout(this.ChangeGrayVotes, 800);
                this.ChangeForm = setTimeout(this.changeSignForm, 800);

            },


        });

        Vue.component('actOld', {
            template: '#act-old',
            props: {
                voteAll: [Array],
                actInformation: [Array],
                memHeart: [Array],

            },
            data: function () {
                return {
                    total_vote: [],
                    //愛心收藏
                    heartSaute: [],
                    getHeartSong: [],

                    //撥放
                    myPlaylist: [],

                    //跳轉單曲
                    hrefNoName: "",
                    backSong: '',
                    oneSongNo: '',
                    
                    //動態更換舊歌曲
                    contestOldYear1: '',
                    contestOldYear2: '',
                    oldVoteSong2018: [],
                    oldVoteSong2017: [],

                    //投票總數
                    oldVoteAllOne:'',
                    oldVoteAllTwo:'',

                }

            },
            methods: {
                showChangePlay(e) {
                    let playButton = e.target;
                    playButton.classList.toggle('act_old-play-Pause');
                },
                showChangeHeart(e, value) {//確認會員登入狀態，變更收藏愛心顏色

                    if (vml.mem_login == false) {
                        alert("Please login first!");
                        location.href = "./login.html";
                    } else {
                        let heartButton = e.target;
                        this.getHeartSong = value;

                        if (heartButton.classList.contains('actShowHeart') == false) {
                            this.heartSaute = "red";
                            heartButton.classList.toggle('actShowHeart');

                            var addHeart = $.ajax({
                                url: './phps/act_contestSongHeart.php',
                                data: {
                                    favorStatus: this.heartSaute,
                                    favorSongName: this.getHeartSong,
                                },
                                type: 'POST',
                                dataType: 'json'
                            });
                            // console.log(addHeart);
                            // console.log(this.heartSongNo);
                        } else {
                            this.heartSaute = "gray";
                            heartButton.classList.toggle('actShowHeart');

                            var deleteHeart = $.ajax({
                                url: './phps/act_contestSongHeart.php',
                                data: {
                                    favorStatus: this.heartSaute,
                                    favorSongName: this.getHeartSong,
                                },
                                type: 'POST',
                                dataType: 'json'
                            });
                            // console.log(this.heartSongNo);
                            // console.log(deleteHeart);

                        }

                    }
                },
                ChangeRedHeart2018() {//獲取會員已收藏歌曲，並更換顏色

                    for (let j = 0; j < this.memHeart.length; j++) {
                        for (let i = 0; i < this.oldVoteSong2018.length; i++) {
                            var heart = (this.oldVoteSong2018[i].entries_name == this.memHeart[j].song_name);
                            if (heart == true) {
                                var heartExist = this.$refs.oneOldHearts[i].classList.contains('actShowHeart');
                                if (heartExist == false) {
                                    this.$refs.oneOldHearts[i].classList.add('actShowHeart');
                                };
                                this.$refs.oneOldHeartsVal[i].value = "red";
                            } else {
                                this.$refs.oneOldHeartsVal[i].value = "gray";

                            }
                        };
                    };
                },
                ChangeRedHeart2017() {//獲取會員已收藏歌曲，並更換顏色
                    for (let j = 0; j < this.memHeart.length; j++) {
                        for (let i = 0; i < this.oldVoteSong2017.length; i++) {

                            var heart = (this.oldVoteSong2017[i].entries_name == this.memHeart[j].song_name);
                            if (heart == true) {
                                var heartExist = this.$refs.twoOldHearts[i].classList.contains('actShowHeart');
                                if (heartExist == false) {
                                    this.$refs.twoOldHearts[i].classList.add('actShowHeart');
                                };
                                this.$refs.twoOldHeartsVal[i].value = "red";
                            } else {
                                this.$refs.twoOldHeartsVal[i].value = "gray";

                            }
                        };
                    };
                },

                showChangePlay2018(e, item) {//切換撥放按鈕
                    let playButton = e.target;

                    songObj = {};
                    songObj.song_addr = item.entries_song;
                    songObj.song_name = item.entries_name;
                    songObj.mem_name = item.mem_name;
                    songObj.song_pic = item.entries_img;

                    myPlaylist = [songObj];
                    nowPlaying = 0;
                    listLen = myPlaylist.length;
                    $('#player audio').attr('src', myPlaylist[0].song_addr);
                    for (let j = 0; j < this.oldVoteSong2017.length; j++) {
                        this.$refs.playSongsOld2017[j].classList.remove("act_old-play-Pause");
                    }

                    for (let i = 0; i < this.oldVoteSong2018.length; i++) {
                        let allSongName = this.oldVoteSong2018[i].entries_name;
                        let playStatus = this.$refs.playSongsOld2018[i].classList.contains("act_old-play-Pause");

                        if (allSongName == item.entries_name) {
                            if (playStatus == false) {
                                playButton.classList.add("act_old-play-Pause");
                                isPlaying(false);
                            } else {
                                playButton.classList.remove("act_old-play-Pause");
                                isPlaying(true);
                            }

                        } else {
                            this.$refs.playSongsOld2018[i].classList.remove("act_old-play-Pause");
                        }
                    };
                    playerAuto = false;
                    heartStatus(myPlaylist[0].song_name);

                },
                showChangePlay2017(e, item) {//切換撥放按鈕
                    let playButton = e.target;

                    songObj = {};
                    songObj.song_addr = item.entries_song;
                    songObj.song_name = item.entries_name;
                    songObj.mem_name = item.mem_name;
                    songObj.song_pic = item.entries_img;

                    myPlaylist = [songObj];
                    nowPlaying = 0;
                    listLen = myPlaylist.length;
                    $('#player audio').attr('src', myPlaylist[0].song_addr);
                    for (let j = 0; j < this.oldVoteSong2018.length; j++) {
                        this.$refs.playSongsOld2018[j].classList.remove("act_old-play-Pause");
                    }

                    for (let i = 0; i < this.oldVoteSong2017.length; i++) {
                        let allSongName = this.oldVoteSong2017[i].entries_name;
                        let playStatus = this.$refs.playSongsOld2017[i].classList.contains("act_old-play-Pause");

                        if (allSongName == item.entries_name) {
                            if (playStatus == false) {
                                playButton.classList.add("act_old-play-Pause");
                                isPlaying(false);
                            } else {
                                playButton.classList.remove("act_old-play-Pause");
                                isPlaying(true);
                            }

                        } else {
                            this.$refs.playSongsOld2017[i].classList.remove("act_old-play-Pause");
                        }
                    };
                    playerAuto = false;
                    heartStatus(myPlaylist[0].song_name);

                },

                changeHref(no) {//獲得跳轉單頁的歌曲編號
                    console.log(no);
                    this.hrefNoName = no;
                    var songNo = $.ajax({
                        url: './phps/getallSong.php',
                        data: {
                            hrefNoName: this.hrefNoName,
                        },
                        type: 'GET',
                        dataType: 'json',
                        async: false,
                        success: function (data, textStatus, jqXHR) {
                            return;
                        }
                    });
                    this.backSong = songNo.responseJSON;
                    console.log(this.backSong);
                    if (this.backSong != "") {
                        this.oneSongNo = this.backSong[0].song_no;
                        console.log(this.oneSongNo);
                        // location.href= "'./songinfo.html?song_no'=+this.oneSongNo";
                    }
                    console.log(songNo);
                },

                getOldContestYear() {//動態更換新活動歌曲

                    if (this.contestOldYear1 != "") {
                        var year = $.ajax({
                            url: './phps/getContestSong.php',
                            data: {
                                contestNowYear: this.contestOldYear1,
                            },
                            type: 'GET',
                            dataType: 'json',
                            async: false,
                            success: function (data, textStatus, jqXHR) {
                                return;
                            }
                        });

                        this.oldVoteSong2018 = year.responseJSON;
                    };
                    if (this.contestOldYear2 != "") {
                        var year2 = $.ajax({
                            url: './phps/getContestSong.php',
                            data: {
                                contestNowYear: this.contestOldYear2,
                            },
                            type: 'GET',
                            dataType: 'json',
                            async: false,
                            success: function (data, textStatus, jqXHR) {
                                return;
                            }
                        });

                        this.oldVoteSong2017 = year2.responseJSON;

                    };

                },
                
                changeVoteAll1(){
                    let Year=this.contestOldYear1;
                  
                    for(let i=0;i<this.voteAll.length;i++){
                        let years =this.voteAll[i].activity_no;
                        
                        if(Year==years){
                            this.oldVoteAllOne=this.voteAll[i].total_vote;
                            break;
                        }
                    }
                },
                changeVoteAll2(){
                    let Year=this.contestOldYear2;

                    for(let i=0;i<this.voteAll.length;i++){
                        let years =this.voteAll[i].activity_no;
                        
                        if(Year==years){
                            this.oldVoteAllTwo=this.voteAll[i].total_vote;
                            break;
                        }
                    }
                },
            },
            created() {
               this.getVoteAll1=setTimeout(this.changeVoteAll1,500);
               this.getVoteAll2=setTimeout(this.changeVoteAll2,500);

            },
            mounted() {
                this.getYear = setTimeout(this.getOldContestYear, 500);
                this.ChangeHeart2018 = setTimeout(this.ChangeRedHeart2018, 500);
                this.ChangeHeart2017 = setTimeout(this.ChangeRedHeart2017, 800);
            },

        });




        let vml = new Vue({
            el: '#activity',
            data: {
                //當前頁面
                content: 'actNow',

                //切換按鈕顏色
                tabImgON: './img/activity/button-on.png',
                tabImgOFF: './img/activity/button-off.png',
                sectionAnchor: './img/activity/button2-on.png',

                //活動倒數時間
                countDownDate: "",
                days: 0,
                hours: 0,
                minutes: 0,
                seconds: 0,
                distance: 0,

                //輪撥切換圖
                BannerImgURL: [
                    `./img/activity/banner-activ.jpg`,
                    `./img/activity/banner-collection.jpg`,
                    `./img/activity/banner-remix02.jpg`,
                ],
                imageActive: `./img/activity/banner-activ.jpg`,
                imageHref: `./activity.html`,
                isActive: 0,
                currentIndex: 1,

                //GOTOP動畫判斷
                GoTopBush: false,

                //會員登入狀態
                mem_login: false,
                member: {},
               
                //投票總數
                voteAll: [],
                total_vote: [],

                //會員已投票歌曲
                memVotes: [],

                //會員收藏
                memHeart: [],

                //活動資訊
                actInformation: [],
               

                //播放歌曲
                getMyPlaylist: []


            },

            methods: {

                changeBanner(Index) {
                    this.imageActive = this.BannerImgURL[Index];
                    vml.currentIndex = Index;
                    vml.isActive = vml.currentIndex;
                },
                timeChangeBanner() {
                    Index = vml.currentIndex++;
                    vml.imageActive = vml.BannerImgURL[Index];
                    vml.isActive = Index;

                    if (Index >= 2) {
                        vml.currentIndex = 0;

                    }
                },
                getCountDownDate() {
                    let finTime = this.actInformation[0].activity_fin;
                    this.countDownDate = new Date(finTime).getTime();

                },
                timerCount() {
                    now = new Date().getTime();
                    this.distance = this.countDownDate - now;
                    this.days = Math.floor(this.distance / (1000 * 60 * 60 * 24));
                    this.hours = Math.floor((this.distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    this.minutes = Math.floor((this.distance % (1000 * 60 * 60)) / (1000 * 60));
                    this.seconds = Math.floor((this.distance % (1000 * 60)) / 1000);
                },
                GoTopAnima(e) {
                    let GoTopButton = e.target;
                    if (GoTopButton.classList.contains('act_ShowTopAnchor') == true) {
                        // this.clearBush();
                    } else {
                        GoTopButton.classList.toggle('act_ShowTopAnchor');
                    }
                    this.GoTopBush = true;
                },


            },
            created() {
            
                fetch('./phps/getContestVoteAll.php').then(res => res.json()).then(data => this.voteAll = data);
                fetch('./phps/getContestInformation.php').then(res => res.json()).then(data => this.actInformation = data);
                this.getYear = setTimeout(this.getNewContestYear, 1000);

            },
            mounted() {
                // this.get_member();
                this.timer = setTimeout(this.getCountDownDate, 500);
                this.ChangeBannerImg = setInterval(this.timeChangeBanner, 3000);
                this.countTimer = setInterval(this.timerCount, 1000);

            },



        });

        //----Vue 結束---------------------------------------------------------------

        window.onload = function () {
            let xhrI = new XMLHttpRequest();
            xhrI.onload = function () {
                member = JSON.parse(xhrI.responseText);

                if (member.mem_acct) {
                    vml.mem_login = true;

                    let xhrH = new XMLHttpRequest();
                    xhrH.onload = function () {
                        vml.memHeart = JSON.parse(xhrH.responseText);
                    }
                    xhrH.open("get", "./phps/getMemcontestheart.php", true);
                    xhrH.send(null);

                    let xhrV = new XMLHttpRequest();
                    xhrV.onload = function () {
                        vml.memVotes = JSON.parse(xhrV.responseText);
                    }
                    xhrV.open("get", "./phps/getMemcontestvote.php", true);
                    xhrV.send(null);

                    let xhrM = new XMLHttpRequest();
                    xhrM.onload = function () {
                        vml.member = JSON.parse(xhrM.responseText);
                    }
                    xhrM.open("get", "./phps/getMemInfo.php", true);
                    xhrM.send(null);


                } else {
                    vml.mem_login = false;
                }
            }
            xhrI.open("get", "./phps/getLoginInfo.php", true);
            xhrI.send(null);
            // console.log(location.href.search(2017))

            if (location.href.search('/?year=') != -1) {
                new Promise((res) => {
                    vml.content = 'actOld';
                    res(res);
                }).then((res) => {
                    let year = location.search.substr(6);
                    location.hash = `#act_old-year${year}`;
                });
            }


            $(function () {
                $('.act_Anchor').on('click', function (e) {
                    e.preventDefault();
                    $('html, body').animate({ scrollTop: $($(this).attr('href')).offset().top }, 700, 'swing');

                });

            });


        }



    </script>





</body>

</html>