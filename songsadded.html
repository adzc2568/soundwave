<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <meta http-equiv="X-UA-Compatible" content="ie=edge"> -->
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <title>SOUNDWAVE | songsadded</title>
    <link rel="Shortcut Icon" type="image/x-icon" href="./img/collection/smalllogo.ico" />
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.10/vue.js"></script>
    <!-- <script src="./js/public.js"></script> -->
    <style>
        .songsadded_lif h2 {
            /* margin-bottom: 23px; */
            padding: 30px 0px;
        }

        .songsadded_leftli {
            list-style-type: none;
        }

        .songsadded_leftli ul {
            list-style-type: none;
            padding: 0px;
        }

        .songsadded_inside2 li {
            list-style-type: none;
        }

        .songsadded_body {
            background: url(./img/songupload/addimg0.jpg);
            background-repeat: no-repeat;
        }

        input[type="radio"] {
            -webkit-appearance: none;
            vertical-align: middle;
            margin-top: 0;
            background: #fff;
            border: #d0d6d6 solid 1px;
            border-radius: 3px;
            min-height: 20px;
            min-width: 20px;
        }

        input[type="radio"]:checked {
            background: #7ED5E5;
        }

        input[type=radio]:checked::after {
            content: '';
            top: 3px;
            left: 3px;
            position: absolute;
            background: transparent;
            border: #fff solid 2px;
            border-top: none;
            border-right: none;
            height: 6px;
            width: 10px;
            -moz-transform: rotate(-45deg);
            -ms-transform: rotate(-45deg);
            -webkit-transform: rotate(-45deg);
            transform: rotate(-45deg);
        }

        input[type="checkbox"] {
            -webkit-appearance: none;
            vertical-align: middle;
            margin-top: 0;
            background: #fff;
            border: #d0d6d6 solid 1px;
            border-radius: 3px;
            min-height: 20px;
            min-width: 20px;
        }

        input[type="checkbox"]:checked {
            background: #7ED5E5;
        }

        input[type=checkbox]:checked::after {
            content: '';
            top: 3px;
            left: 3px;
            position: absolute;
            background: transparent;
            border: #fff solid 2px;
            border-top: none;
            border-right: none;
            height: 6px;
            width: 10px;
            -moz-transform: rotate(-45deg);
            -ms-transform: rotate(-45deg);
            -webkit-transform: rotate(-45deg);
            transform: rotate(-45deg);
        }
    </style>
</head>

<body class="songsadded_body">
    <div class="addallall">
        <!-- nav_bar start -->
        <div id="nav_app">
            <div class="nav_bar flexbox">
                <div class="hamburger" @click="hamburger_click">
                    <div class="hamburger-box">
                        <div class="hamburger-inner"></div>
                    </div>
                </div>
                <div class="mobile_list" @click="stopPropagation">
                    <div class="paint_border"></div>
                    <ul>
                        <li class="REMIX flexbox">
                            <a href="./remix.html">
                            </a>
                        </li>
                        <li class="COLLECTION flexbox">
                            <a href="./collection.html">
                            </a>
                        </li>
                        <li class="ACTIVITY flexbox">
                            <a href="./activity.html">
                            </a>
                        </li>
                        <li class="LIBRARY flexbox">
                            <a href="./library.html">
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="logo_container">
                    <a href="./index.html">
                        <div class="logo"></div>
                    </a>
                    <div class="finger"></div>
                </div>
                <ul class="main_list flexbox">
                    <li class="REMIX flexbox">
                        <a href="./remix.html">
                        </a>
                    </li>
                    <li class="COLLECTION flexbox">
                        <a href="./collection.html">
                        </a>
                    </li>
                    <li class="ACTIVITY flexbox">
                        <a href="./activity.html">
                        </a>
                    </li>
                    <li class="LIBRARY flexbox">
                        <a href="./library.html">
                        </a>
                    </li>
                </ul>
                <div class="search_bt" @click="search_bt_click">
                    <a href="#"></a>
                </div>
                <div class="search_bar" @click="stopPropagation">
                    <input class="search" type="text" />
                    <div class="tag_container">
                    </div>
                </div>

                <div class="mem_bt" @click="mem_bt_click" v-if="mem_login == true">
                    <a href="#"></a>
                </div>
                <div class="login_bt" v-if="mem_login == false">
                    <a href="./login.html"></a>
                </div>
                <div class="mem_list" @click="stopPropagation">
                    <div class="paint_border"></div>
                    <ul>
                        <li>
                            <a href="./profile.html">
                                <h4>Profile</h4>
                            </a>
                        </li>
                        <li>
                            <a href="./songsadded.html">
                                <h4>
                                    Song Upload
                                    <br />&amp; Remove
                                </h4>
                            </a>
                        </li>
                        <li>
                            <a href="./store.html">
                                <h4>
                                    Store Value
                                    <br />&amp;Store Record
                                </h4>
                            </a>
                        </li>
                        <li>
                            <a href="./donate.html">
                                <h4>Donate Record</h4>
                            </a>
                        </li>
                        <li @click="logout">
                            <a href="#">
                                <h4>Log Out</h4>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- nav_bar end -->
        </div>
        <header>
            <div>
                <img src="./img/songupload/addtitle.png" alt="">
            </div>
        </header>

        <div class="songadd_all">
            <section class="songsadded_adds2">
                <ol class="songsadded_leftli">
                    <!-- <div class="songsadded-lif-container is-click"> -->
                    <li class="songsadded_lif">
                        <div>
                            <h2 id="songsadded_lif_first" style="cursor: pointer;border: 2.5px solid rgb(133, 133, 133);">&emsp;Upload song
                                <!-- <div class="songsadded-lif" style="float: right;margin-right: 30px;"></div> -->
                            </h2>
                        </div>
                        <ol class="songsadded_inside">
                            <form id="myForm" class="addinsideadd" style="margin: 0 auto;" method="POST"
                                enctype="multipart/form-data">
                                <article>
                                    <br>
                                    <p style="width: 100px;height: 100px;">
                                        <img id="imagePreView"
                                            style="width: 300px;height: 300px;background-color: #D0D6D6;">
                                    </p>
                                    <input type="file" name="song_pic" id="inputImageFile" style="display: none;">
                                    <label class="songsadded_ff" for="inputImageFile"
                                        style="text-align: center;margin-left: -5px;">Edit</label>
                                </article>
                                <div>
                                    <p style="font-weight: bold;">Song Name:
                                        <input type="text" id="add_pp" name="song_name"
                                            style="border: 1px solid #d0d6d6;width:350px;height:28px;background-color: #d0d6d6;"
                                            required>
                                    </p>
                                    <div id="infopath">
                                        <span
                                            style="position: relative;left: -100px;top: -20px;font-weight: bold;">Upload：</span>
                                        <p class="songsadd_path"></p>
                                        <input type="file" name="song_addr" id="songinfo_btn" style="display: none;">
                                        <label class="songinfo_bb" for="songinfo_btn"
                                            style="text-align: center;">Choose</label>
                                    </div>
                                    <br>
                                    <div id="infohashtag">
                                        <span style="font-weight: bold;">Song type : </span>
                                        <input type="radio" name="cat_no" value="3"> House&ensp;
                                        <input type="radio" style="border-radius: 5px;" name="cat_no" value="2">Trap<br>
                                        <span style="font-weight: bold;">Hashtag : </span><br>
                                        <input type="radio" name="song_hashtag" value="1"> #Scratch&ensp;
                                        <input type="radio" name="song_hashtag" value="2"> #Stress&ensp;
                                        <input type="radio" name="song_hashtag" value="3"> #Ethereal&ensp;
                                        <br>
                                        <p style="font-weight: bold;">Introduction :</p>
                                        <textarea name="song_idn" id="add_tta" cols="65" rows="6" style="border: 1px solid #d0d6d6;background-color: #D0D6D6;"></textarea>
                                    </div>
                                </div>
                                <section>
                                    <input type="button" id="btnSubmit" name="submit">
                                    <label class="sd_btn" for="btnSubmit">Send</label>
                                </section>
                            </form>
                        </ol>
                    </li>
                    <li class="songsadded_lif">
                        <div>
                            <h2 id="songsadded_lif_second" style="cursor: pointer;border: 2.5px solid rgb(133, 133, 133);">&emsp;Uploaded
                                <!-- <div class="songsadded-lif2" style="float: right;margin-right: 30px;"></div> -->
                            </h2>
                        </div>
                        <ol id="songsList" style="list-style: none;overflow-y:scroll;background: #fff;height: 100vh;padding:40px 20px;">
                        </ol>
                    </li>
                </ol>
        </div>

        <!-- ---------------------------------------------------------------------- -->

        


        <!-- ---------------------------------------------------------------------- -->

        <div class="uploadmic">
            <img src="./img/songupload/mic.png" alt="">
        </div>
        <!-- <div class="songsadded_adds3"></div> -->
        </section>
        <!-- <section class="songsadded_adds3"></section> -->
    </div>
    </div>

    <!-- 播放器 -->
    <div id="player">
        <audio src="" id="audioPlayer"></audio>
        <div class="player_s">
            <div class="info">
                <div class="cover"><img src="./img/collection/album1.jpg"></div>
                <div class="songInfo">
                    <span class="name">Lucid Dreamer</span>
                    <span class="creator">Spazz Cardigan</span>
                </div>
                <div class="heart"><img src="./img/collection/grayheart.png" alt=""></div>
                <div class="clearfix"></div>
            </div>

            <div class="controlPanel">
                <div class="progressbar">
                    <div class="progress"></div>
                </div>
                <div class="time">
                    <span class="start">00:00</span>
                    <span class="end">04:30</span>
                    <div class="clearfix"></div>
                </div>
                <div class="btns">
                    <div class="controls">
                        <button class="prev"><i class="fas fa-step-backward"></i></button>
                        <button class="play"><i class="fas fa-play"></i></button>
                        <button class="next"><i class="fas fa-step-forward"></i></button>
                        <button class="stop"><i class="fas fa-stop"></i></button>
                        <button class="rand"><i class="fas fa-random"></i></button>
                        <button class="loop"><i class="fas fa-undo-alt"></i></button>
                        <div class="clearfix"></div>
                    </div>
                    <div class="vol">
                        <div class="volicon"><i class="fas fa-volume-down"></i></div>
                        <div class="volLine">
                            <div class="volControl"></div>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>

            <div class="expand" id="expand"><i class="fas fa-expand"></i></div>
            <div class="clearfix"></div>
        </div>

        <!-- 詳細版 -->
        <div class="player_b">
            <div class="left">
                <div class="info">
                    <div class="songCover">
                        <img src="./img/collection/album1.jpg">
                        <div class="coverRec"><img src="./img/library/player_record.png" alt=""></div>
                    </div>
                </div>
                <div class="songInfo">
                    <div class="name">Lucid Dreamer</div>
                    <div class="creator">Spazz Cardigan</div>
                    <div class="heart"><img src="./img/collection/grayheart.png" alt=""></div>
                    <div class="clearfix"></div>
                </div>
                <div class="controlPanel">
                    <div class="progressbar">
                        <div class="progress"></div>
                    </div>
                    <div class="time">
                        <span class="start">00:00</span>
                        <span class="end">00:00</span>
                        <div class="clearfix"></div>
                    </div>
                    <div class="btns">
                        <div class="controls">
                            <button class="rand"><i class="fas fa-random"></i></button>
                            <button class="prev"><i class="fas fa-step-backward"></i></button>
                            <button class="play"><i class="fas fa-play"></i></button>
                            <button class="next"><i class="fas fa-step-forward"></i></button>
                            <button class="stop"><i class="fas fa-stop"></i></button>
                            <button class="loop"><i class="fas fa-undo-alt"></i></button>
                            <div class="clearfix"></div>
                        </div>
                        <div class="vol">
                            <div class="volicon"><i class="fas fa-volume-down"></i></div>
                            <div class="volLine">
                                <div class="volControl"></div>
                            </div>
                            <div class="clearfix"></div>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                </div>
                <div class="pushBtn"></div>
            </div>

            <div class="right">
                <div class="pushBtn"></div>
                <div class="listTitle">
                    <div class="listCover">
                        <img src="./img/library/list_pic_no.jpg"></div>
                    <div class="listName">
                        <h2>Total songs</h2>
                        <span>0 songs</span>
                    </div>
                    <button class="selectBtn" id="selectBtn">SELECT</button>
                    <div class="clearfix"></div>
                </div>
                <div class="list">
                    <ul class="chooseList">
                        <!-- <li>
              <div class="songCover">
                <img src="./img/collection/album1.jpg" alt="">
                <div class="listPlay nowlistening"><img src="./img/library/coverPlay-s.png"></div>
              </div>
              <div class="listSongInfo">
                <div class="name">
                  <h4>Lucid Dreamer</h4>
                  <p> Spazz Cardigan</p>
                </div>
              </div>
              <div class="totalTime">3:11</div>
              <div class="heart becomeRed"><img src="./img/collection/redheart.png"></div>
              <div class="clearfix"></div>
            </li> -->
                    </ul>
                </div>
            </div>
            <div class="close" id="closePlayer"><i class="fas fa-times"></i></div>
            <div class="clearfix"></div>

            <!-- 撥放器燈箱 -->
            <div class="lightCover">
                <div class="lightbox_s allmylist" id="myAllList">
                    <div class="closeLight"><i class="fas fa-times"></i></div>
                    <h4>My List</h4>
                    <div class="lightSelectMenu">
                        <ul>
                            <!-- <li class="chooseList">Liked songs</li>-->
                        </ul>
                    </div>
                    <input type="hidden" name="plistName" id="plistName">
                    <button id="mylistOK">ok</button>
                </div>
                <div class="lightbox_s" id="playerAlert">
                    <div class="closeLight"><i class="fas fa-times"></i></div>
                    <h4></h4>
                    <button>ok</button>
                </div>
            </div>
        </div>
    </div>

    

    <footer class="songaddfoot">
    </footer>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.0.4/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
    <script src="./js/nav_bar.js"></script>
    <script src="./js/player.js"></script>
    <script>
        $(function(){
            let inputImageFile = $("#inputImageFile"),
                imagePreView = $("#imagePreView"),
                songsAddPath = $(".songsadd_path"),
                songNameSpan = $("#songNameSpan"),
                leftFirst = $("#songsadded_lif_first"),
                leftSec = $("#songsadded_lif_second"),
                secContainer = $(".songsadded_inside2"),
                btnSongInfo = $("#songinfo_btn"),
                btnSubmit = $("#btnSubmit"),
                myForm = $("#myForm"),
                image = $("#imageCover"),
                songsList = $("#songsList"),
                memInfo = {};
            function SongsAdd(){
   
            }
            let SA = SongsAdd.prototype ={};
            function songType(type){
                let typeId = Number(type);
                if (isNaN(typeId)){
                    return "Unknown";
                }
                switch (typeId) {
                   case 3:
                       return "House";
                   case 2:
                       return "Trap";
                   default:
                       return "Unknown";
                }
            }
            function songTag(tag){
                let t = Number(tag);
                if (isNaN(t)){
                    return "Unknown";
                }
                switch (t) {
                    case 1:
                        return "#Scratch";
                    case 2:
                        return "#Stress";
                    case 3:
                        return "#Ethereal";
                    default:
                        return "#Unknown";
                }
            }
            /**
             * 更新資料，在HTML顯示
             * @param resultSet 結果集
             */
            function updateInfo(resultSet){
               let defCover = "./img/songinfo/cover1.jpg",
                   li = $("<li style=\"cursor: pointer;float: left;width: 100%;\"  />"),
                   itemContainer = $("<div style=\"border: 1px solid gray;padding-left: 20px;padding-top:10px;padding-bottom:10px;position: relative;\" />"),
                   mainTitle = $("<span style=\"width: 90%;\" />"),
                   moreIcon = $("<i class=\"fas fa-ellipsis-h\" style=\"line-height:1.7em;position: absolute;right: 20px;\" />"),
                   moreMenuContainer = $("<div  style=\"position: absolute;right: 0;border: 1px solid grey; display: none;\" />"),
                   menuUl = $("<ul style=\"padding: 4px;border:1px solid gray;text-align: center;background: #eee;position: absolute;right: 0;z-index: 1000;\"  />"),
                   menuEdit = $("<li><span>Edit</span></li>"),
                   menuDel = $("<li style='border-top: 1px solid #888;'><span>Delete</span></li>"),
                   contentContainer = $(" <div style=\"float: left;cursor: auto;border: 1px solid grey;border-top:none; width: 100%;padding:20px;\" />"),
                   imageContainer = $("<div style=\"float: left;width: 380px;\" />"),
                   img = $("<img style=\"width: 250px;height: 250px;vertical-align: center;\" />"),
                   infoContainer = $("<div style=\"float: left;width:50%;\" />"),
                   infoTitle = $("<span style=\"font-weight: bold;\" />"),
                   infoContext = $("<span  style=\"font-size:16px; word-wrap:break-word;\" />"),
                //    infoContext = $("<input style=\"font-size:16px; word-wrap:break-word;\" type=\"text;\" readonly=\"readonly;\" />"),
                   newLine = $("<br/>");
               if (!resultSet || !resultSet.length){
                   return;
               }
               // 清除舊資料
               //    songsList.empty();
            //    function deletesong(){
            //     $.get("./phps/addmemsongdelt.php")
            //      .done(function(ret){
            //         item.remove();
            //         content.remove();
            //      })
            //      .fail(function(e){
            //          alert("加載失敗");
            //      });
            //    }
   
               for(let i = 0; i < resultSet.length; ++i){
                   let result = resultSet[i], menu = moreMenuContainer.clone(),
                   item = itemContainer.clone().append(
                                     mainTitle.clone().html(result["song_name"]))
                                     .append(moreIcon.clone().data("menu", menu).click(function(evt){
                                         $(this).data("menu").fadeIn();
                                         evt.stopPropagation();
                                     })
                                )
                                .append(
                                    menu.append(
                                        menuUl.clone()
                                              .data("menu", menu)
                                            //   .append(
                                            //       menuEdit.clone()
                                            //           .data("result", result)
                                            //           .click(function(evt){
                                            //               alert("編輯：" + $(this).data("result")["song_no"])
                                            //               evt.stopPropagation();
                                            //           })
                                            //   )
                                              .append(
                                                  menuDel.clone().clone()
                                                      .data("result", result)
                                                      .click(function(evt){
                                                          let ret = $(this).data("result");
                                                          if (confirm("刪除："+ ret["song_name"] + "?")){
                                                            //   alert("刪除ID：" + ret["song_no"]);
                                                            // item.remove();
                                                            // content.remove();
                                                            function deletesong(){
                                                               $.get("./phps/addmemsongdelt.php")
                                                                 .done(function(ret){
                                                                  item.remove();
                                                                  content.remove();
                                                               })
                                                            //    .fail(function(e){
                                                            //     alert("加載失敗");
                                                            //    });
                                                            }
                                                            deletesong();
                                                          }
                                                          evt.stopPropagation();
                                                      })
                                              ).mouseleave(function(){
                                                 $(this).data("menu").fadeOut();
                                              })
                                    )
                                ),
                   content = contentContainer.clone().append(
                           imageContainer.clone().append(img.clone().prop("src", result["song_pic"] || defCover))
                       )
                       .append(
                           infoContainer.clone().append(infoTitle.clone().text("Song Name ："))
                           .append(infoContext.clone().html(result["song_name"]))
                           .append(newLine.clone())
                        //    .append(infoTitle.clone().text("Author ："))
                        //    .append(infoContext.clone().html("Andy Warhol"))
                        //    .append(newLine.clone())
                           .append(infoTitle.clone().text("Song Type ："))
                           .append(infoContext.clone().html(songType(result["cat_no"])))
                           .append(newLine.clone())
                           .append(infoTitle.clone().text("HashTag ："))
                           .append(infoContext.clone().html(songTag(result["song_hashtag"])))
                           .append(newLine.clone())
                           .append(infoTitle.clone().text("Introduction ："))
                           .append(infoContext.clone().html(result["song_idn"]))
                           .append(newLine.clone())
                       );
                   li.clone().append(item).append(content.hide()).appendTo(songsList)
                       .data("content", content)
                       .click(function () {
                         $(this).data("content").slideToggle();
                   });
               }
            }
            /**
             * 綁定事件以及處理
             */
            function bindEvt(){
   
                //圖片預覽功能
                inputImageFile.change(function(){
                    let file = this.files[0], readFile = new FileReader();
                    readFile.readAsDataURL(file);
                    readFile.addEventListener('load', function () {
                        imagePreView.prop("src", this.result)
                                    .css({
                                        maxWidth: "500px",
                                        maxHeight: "400px"
                                    });
                    });
                });
                // 上傳歌曲
                btnSongInfo.change(function(){
                    let fileName = $(this).val();
                    songsAddPath.text(fileName.substr(fileName.lastIndexOf("\\") + 1));
                });
                //上傳表單資料
                btnSubmit.click(function(){
                    let formData = new FormData(myForm[0]);
                    $.ajax({
                        url: "./phps/songsupload.php",
                        type: "POST",
                        cache: false,
                        data: formData,
                        contentType: false,
                        processData: false,
                        success: function(result){
                           let ret = $.parseJSON(result);
                            updateInfo(ret);
                           leftFirst.click();
                        },
                        error: function(err){
                            console.error(err);
                            alert("存儲失敗了,請重試");
                        }
                    });
                });
            }
            //檢查賬戶是否已登錄
            function checkAccount(){
                $.get("./phps/getLoginInfo.php")
                 .done(function(ret){
                     memInfo = $.parseJSON(ret);
                     if (!memInfo["mem_acct"]){
                         alert("Please login first!");
                         return location.href = "./login.html";
                     }
                 })
                 .fail(function(e){
                     alert("加載失敗");
                 });
             //展開於第一個頁簽
              leftFirst.click(function(){
                  myForm.parent().slideToggle();
              });
              leftSec.click(function(){
                  secContainer.slideToggle();
              });
            }
            function loadMySongs(){
                $.ajax({
                    url: "./phps/getMySongs.php",
                    type: "POST",
                    cache: false,
                    data: {},
                    success: function(result){
                        let ret = $.parseJSON(result);
                        updateInfo(ret);
                        myForm.parent().slideToggle();
                    },
                    error: function(err){
                        console.error(err);
                    }
                });
            }
            function init(){
                checkAccount();
                loadMySongs();
                bindEvt();
                return this;
            }
            let _this = window["SongsAdd"] = init.apply(new SongsAdd());
        });
     </script>



    <!-- <script>
        // $(document).ready(function(){
        //     $('.addinsideadd').on('submit',function (){
        //       $ajax({
        //           url:'songsupload.php',
        //           method:'POST',
        //           dataType:'json',
        //           data:$('form').serialize(),
        //           success:
        //             alert('success'),
        //       })
        //     });
        //     return false;
        // });

        // let xhr = new XMLHttpRequest();
        //     console.log(xhr.readyState);
        //     xhr.onreadystatechange = function () {
        //         if (xhr.readyState == XMLHttpRequest.DONE) {
        //             if (xhr.status == 200) { //success
        //                 // document.getElementById("idMsg").innerHTML = xhr.responseText;
        //             } else { //其它
        //                 alert(xhr.status);
        //             }
        //         }
        //     }
        //     //設定好所要連結的程式
        //     let url = "songsupload.php?song_name=" + document.getElementsByName("song_name").value 
        //                            + "&song_idn=" + document.getElementsByName("song_idn").value 
        //                            + "&song_pic=" + document.getElementsByName("song_pic").value
        //                            + "&cat_no" + document.getElementsByName("cat_no").value
        //                            + "&song_hashtag" + document.getElementsByName("song_hashtag").value
        //                            + "&song_addr" + document.getElementsByName("song_addr").value;
        //     xhr.open("get", url, true); //
        //     //送出資料
        //     xhr.send(null);

        window.addEventListener('load', function () {
            $('#sd').click(function () {
                if (member.mem_acct == false) {
                    alert("Please login first!");
                    location.href = "./login.html";
                } else {
                    this.formContent = 1;
                    this.SignSongURL = "";
                    this.selectSong = "";
                    fetch('./phps/getMemInfo.php').then(res => res.json()).then(data => this.member =
                        data);
                };
                let form = new FormData(document.querySelector('.addinsideadd'));
                let xhr = new XMLHttpRequest();
                console.log(xhr.readyState);
                xhr.onreadystatechange = function () {
                    if (xhr.readyState == 4) {
                        if (xhr.status == 200) {

                            // $(location).attr('href', '//www.localhost/g1test/index.html');
                            // alert(xhr.responseText);
                            // let test = document.createElement(xhr.responseText);

                            // let songaddList = document.querySelector(".songsadded_inside2");
                            // let addtemp = document.querySelector(".songsadded_inside2_li");
                            // let addtempol = document.querySelector(".songsadded_inside2_ol");
                            // let addnewSong = addtemp.cloneNode(true);
                            // let addnewSongend = addtempol.cloneNode(true);
                            // let myForm = document.getElementById("myForm");
                            // addnewSong.style.display = "";
                            // addnewSongend.style.display = "";
                            // let addsongName = document.querySelector(
                            //     "#myForm input[name='song_name']").value;
                            // let addsongType = document.querySelector(
                            //     "#myForm input[name='cat_no']").value;
                            // let addsongTag = document.querySelector(
                            //     "#myForm input[name='song_hashtag']").value;
                            // let addsongIdn = document.querySelector(
                            //     "#myForm input[name='song_idn']").value;

                            // addnewSongend.querySelector("input[name='song_name']").innerText = document.querySelector(
                            //     "#myForm input[name='song_name']").value;

                            // addnewSongend.querySelector("input[name='cat_no']").innerText = document.querySelector(
                            //     "#myForm input[name='cat_no']").value;

                            // addnewSongend.querySelector("input[name='song_hashtag']").innerText = document.querySelector(
                            //     "#myForm input[name='song_hashtag']").value;

                            // addnewSongend.querySelector("input[name='song_idn']").innerText = document.querySelector(
                            //     "#myForm input[name='song_idn']").value;


                            // addnewSongend.querySelector("input[name='song_name']").innerText = document.querySelector(
                            //     "#myForm input[name='song_name']").value;

                            // addnewSongend.querySelector("input[name='cat_no']").innerText = document.querySelector(
                            //     "#myForm input[name='cat_no']").value;

                            // addnewSongend.querySelector("input[name='song_hashtag']").innerText = document.querySelector(
                            //     "#myForm input[name='song_hashtag']").value;

                            // addnewSongend.querySelector("input[name='song_idn']").innerText = document.querySelector(
                            //     "#myForm input[name='song_idn']").value;


                            // addnewSongend.querySelectorAll("input")[0].innerText




                            // addnewSongend.querySelector("input[name='song_name']").value = document
                            //     .querySelector(
                            //         ".addinsideadd input[name='song_name']").value;
                            // addnewSongend.querySelector("input[name='cat_no']").value = document
                            //     .querySelector(
                            //         ".addinsideadd input[name='cat_no']").value;
                            // addnewSongend.querySelector("input[name='song_hashtag']").value =
                            //     document.querySelector(
                            //         ".addinsideadd input[name='song_hashtag']").value;
                            // addnewSongend.querySelector("input[name='song_idn']").value = document
                            //     .querySelector(
                            //         ".addinsideadd input[name='song_idn']").value;

                            // songaddList.appendChild(addnewSong);
                            // songaddList.appendChild(addnewSongend);



                            // let btnsend = document.querySelector('#sd')
                            // let temp = document.querySelector('.addinsideadd');
                            // let newSong = temp.cloneNode(true);
                            // let myForm = document.getElementById("myForm");
                            // newSong.style.display = '';
                            // console.log( newSong );
                            // newSong.getElementsByName("song_name")[0].value = document.querySelector(
                            //     "#myForm input[name='song_name']").value;

                            // newSong.querySelector("input[name='song_name']").value = document.querySelector(
                            //     "#myForm input[name='song_name']").value;

                            // // newSong.getElementsByName("song_idn")[0].value = document.querySelector(
                            // //     "#myForm input[name='song_name']").value;

                            // newSong.querySelector("input[name='song_idn']").value = document.querySelector(
                            //     "#myForm input[name='song_idn']").value;

                            // // newSong.getElementsByName("song_pic")[0].value = document.getElementsByName(
                            // //     'song_pic')[0].value;

                            // // newSong.querySelector("input[name='song_pic']").value = document.querySelector(
                            // //     "#myForm input[name='song_pic']").value;

                            // // newSong.getElementsByName("cat_no")[0].value = document.getElementsByName('cat_no')[
                            // //     0].value;

                            // newSong.querySelector("input[name='cat_no']").value = document.querySelector(
                            //     "#myForm input[name='cat_no']").value;

                            // // newSong.getElementsByName("song_hashtag")[0].value = document.getElementsByName(
                            // //     'song_hashtag')[0].value;

                            // newSong.querySelector("input[name='song_hashtag']").value = document.querySelector(
                            //     "#myForm input[name='song_hashtag']").value;

                            // // newSong.getElementsByName("song_addr")[0].value = document.getElementsByName(
                            // //     'song_addr')[0].value;

                            // // newSong.querySelector("input[name='song_addr']").value = document.querySelector(
                            // //     "#myForm input[name='song_addr']").value;

                            // temp.insertBefore(newSong, btnsend);


                            let li = document.createElement('li');
                            li.className = 'songsadded_inside2_li';
                            // $('songsadded_inside2_li').bind("click", function (){
                            //     $(this).next("ol").slideToggle(300).slideUp(300);
                            // });
                            li.innerHTML = xhr.responseText;
                            let div = document.createElement('div');
                            document.querySelector('.songsadded_inside2').append(li);
                            // let aa = `<ol class="songsadded_inside2_ol" style="overflow: hidden; display: none;">
                            //         
                            //     `
                            //div.innerHTML = aa;
                            document.querySelector('.songsadded_inside2').append(div);


                            console.log(xhr.responseText);
                        } else {
                            // alert(xhr.responseText);
                            console.log(xhr.responseText);
                        }
                    }
                }
                let url = "./phps/songsupload.php";
                xhr.open("post", url, true);
                // xhr.setRequestHeader("content-type", "application/x-www-form-urlencoded");
                // let songsadd_send = "song_name=" + document.getElementsByClassName(".song_name").value+"&song_idn=" + document.getElementsByClassName(".song_idn").value+"&song_pic=" + document.getElementsByClassName(".song_pic").value+"&cat_no" + document.getElementsByClassName(".cat_no").value+"&song_hashtag" + document.getElementsByClassName(".song_hashtag").value+"&song_addr" + document.getElementsByClassName(".song_addr").value;
                xhr.send(form);
                // console.log(songsadd_send);
            });
        });
    </script> -->
    <!-- <script>
        $(document).ready(function(){
            $('#sd').click(function (){
                $.ajax({url:"./phps/songsupload.php",success:function(showsongName){
                    $(".songsadded_inside2").html(showsongName);
                    console.log();
                }});
            });
        });
    </script> -->

    <!-- <script>
        document.getElementById("sd").onclick = function () {
            let songaddList = document.querySelector(".songsadded_inside2");
            let addtemp = document.querySelector(".songsadded_inside2_li");
            let addtempol = document.querySelector(".songsadded_inside2_ol");
            let addnewSong = addtemp.cloneNode(true);
            let addnewSongend = addtempol.cloneNode(true);
            let myForm = document.getElementById("myForm");
            addnewSong.style.display = "";
            addnewSongend.style.display = "";
             // let addsongName = document.querySelector(
             //     "#myForm input[name='song_name']").value;
             // let addsongType = document.querySelector(
             //     "#myForm input[name='cat_no']").value;
             // let addsongTag = document.querySelector(
             //     "#myForm input[name='song_hashtag']").value;
             // let addsongIdn = document.querySelector(
             //     "#myForm input[name='song_idn']").value;

             console.log(addnewSongend.querySelector("input[name='song_name']").value);
            addnewSongend.querySelector("input[name='song_name']").value = document.querySelector(
                "#myForm input[name='song_name']").value;

            addnewSongend.querySelector("input[name='cat_no']").value = document.querySelector(
                "#myForm input[name='cat_no']").value;

            addnewSongend.querySelector("input[name='song_hashtag']").value = document.querySelector(
                "#myForm input[name='song_hashtag']").value;

            addnewSongend.querySelector("input[name='song_idn']").value = document.querySelector(
                "#myForm input[name='song_idn']").value;

            songaddList.appendChild(addnewSong);
            songaddList.appendChild(addnewSongend);
            console.log();
        };
    </script> -->

    <!-- <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script> -->
    <!-- <script>
        $(".test-b").on('click', function () {
            $.fancybox.open(
                '<div class="adddeletecheck"alt=""><div class="checkline"><br><p>Are you sure to delete?</p><br><br><button class="checkbtn">Yes</button> <button class="checkbtnNo" style="background-color: $yellow;font-size: 0.8rem;padding: 10px 30px;border: 1px solid $yellow;border-radius: 5px;color: #333;font-weight: bold;cursor: pointer;text-transform: capitalize;&:hover{transform: scale(1.1)};">No</button></div></div>'
            );
        });
    </script> -->



    <!-- <script>
        (function ($) {
            $(document).ready(function () {
                var dashButton = $('.songsadded_lif'),
                    album = $('.album');
                dashButton.on('click', function () {
                    $('.songsadded-lif-container').toggleClass('is-click');
                });
            });
        })(jQuery);
    </script> -->

    <!-- <script>
        function doFirst() {
            document.getElementById('theFile').onchange = fileChange;
        }

        function fileChange() {
            let file = document.getElementById('theFile').files[0];
            let content = '';
            //========================

            let readFile = new FileReader();
            readFile.readAsDataURL(file);
            readFile.addEventListener('load', function () {
                let image = document.getElementById('image');
                image.src = this.result;
                image.style.maxWidth = '500px';
                image.style.maxHeight = '400px';
            });
        }
        window.addEventListener('load', doFirst);
    </script> -->


    <!-- <script>
        $(".songsadded_inside2").on("mouseenter mouseleave", function (event) { //挷定滑鼠進入及離開事件
            if (event.type == "mouseenter") {
                $(this).css({
                    "overflow-y": "scroll"
                }); //滑鼠進入
            } else {
                $(this).scrollTop(0).css({
                    "overflow-y": "hidden"
                }); //滑鼠離開
            }
        });
    </script>
    <script>
        $(".songsadded_inside2_ol").on("mouseenter mouseleave", function (event) { //挷定滑鼠進入及離開事件
            if (event.type == "mouseenter") {
                $(this).css({
                    "overflow-y": "scroll"
                }); //滑鼠進入
            } else {
                $(this).scrollTop(0).css({
                    "overflow-y": "hidden"
                }); //滑鼠離開
            }
        });
    </script> -->

</body>

</html>